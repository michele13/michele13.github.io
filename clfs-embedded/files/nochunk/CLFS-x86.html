<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content=
    "application/xhtml+xml; charset=iso-8859-1" />
    <title>
      Cross-Compiled Linux From Scratch - Embedded
    </title>
    <meta name="generator" content="DocBook XSL Stylesheets V1.73.2" />
    <style type="text/css">
    /*<![CDATA[*/
    /* Global settings */
    body {
    font-family: verdana, tahoma, helvetica, arial, sans-serif;
    text-align: left;
    background: #fff;
    color: #222;
    margin: 1em;
    padding: 0;
    font-size: 1em;
    line-height: 1.2em
    }


    /* Links */
    a:link { color: #22b; }
    a.ulink:link { font-weight: bold; color: #55f; }
    a:visited { color: #7e4988 ! important; }
    a:hover, a:focus { color: #d30e08 ! important; }
    a:active { color: #6b77b1 ! important;}


    /* Book titlepage */
    .book {
    margin: 0px auto;
    padding: 0 1em;
    }

    .book h1, .book .authorgroup, .book .copyright, .book .legalnotice .revhistory {
    background: #f5f6f7;
    margin: 0px auto;
    padding: .1em 1em;
    }

    .book hr {
    background: #dbddec;
    height: .3em;
    border: 0px;
    margin: 0;
    padding: 0;
    }

    div.dedication {
    padding-left: 1em;
    }


    /* Sections */
    div.sect1, div.appendix {
    padding-left: .3em;
    }

    .package, .kernel, .installation, .commands, .testing, .configuration, .content {
    padding: 0 .5em .2em 0;
    margin: 0;
    }

    .lfs .package {
    background: #f5f6f7;
    border-bottom: 0.2em solid #dbddec;
    padding-top: .1em;
    margin-top: 0;
    }

    .lfs .configuration {
    background:   #fefefe;
    border-top: 0.2em solid #dbddec;
    }

    .lfs .content {
    background: #f5f6f7;
    border-top: 0.2em solid #dbddec;
    border-bottom: 0.2em solid #dbddec;
    padding-bottom: .1em;
    margin-bottom: 0;
    }


    /* Headers */
    h1, h2, h3, h4, h5, h6, b, .strong {
    color: #000;
    font-weight: bold;
    line-height: 1em;
    }

    h1 {
    font-size: 173%;
    text-align: center;
    }

    .book h1 {
    margin: 0;
    padding: 0.4em;
    }

    h1.title sup {
    font-size: small;
    }

    h2 {
    font-size: 144%;
    }

    .preface h2, .part h1, .chapter h2, .appendix h2, .index h1, .sect1 h2 {
    background: #f5f6f7;
    border-top: .2em solid #dbddec;
    border-bottom: .2em solid #dbddec;
    margin-bottom: 1em;
    margin-top: 1em;
    padding: .4em;
    text-align: center;
    }

    .sect1 h2, .appendix h2 {
    margin-left: -.2em;
    }

    .wrap h2 {
    background: #f5f6f7;
    border-bottom: 0;
    margin-top: 1em;
    margin-bottom: 0;
    padding-top: .4em;
    }

    .book h2.subtitle {
    text-align: center;
    background: #dbddec;
    margin: 0;
    padding: 0.2em;
    }

    h3 {
    font-size: 120%;
    }

    .appendix h3 {
    font-size: 133%;
    margin-top: .8em;
    margin-bottom: 0.2em;
    }

    h4 {
    font-size: 110%;
    }

    .package h4, h5, h6 {
    font-size: 100%;
    font-style: italic;
    }


    /* TOC */
    div.toc ul, div.index ul, div.navheader ul, div.navfooter ul {
    list-style: none;
    }

    div.toc {
    padding-left: 1em;
    }

    li.preface, .part li.appendix {
    margin-left: 1em;
    }

    div.toc h3 {
    margin: 1em 0 .3em 0;
    }

    li.appendix h3, li.glossary h3, li.index h3 {
    margin: .5em
    }

    div.toc h4 {
    margin: .6em 0 .2em 0;
    }

    li.chapter h4 a {
    display: block;
    margin-bottom: .4em
    }

    .dummy {
    display: block;
    font-weight: bold;
    font-size: 110%;
    margin: .6em 0 .2em 0;
    }


    /* Index */
    .item {
    float: left;
    margin-right: 1em
    }

    .secitem {
    font-weight: normal;
    float: left;
    margin-right: 1em
    }

    .indexref {
    display: block;
    }

    .item + .indexref {
    margin-left: 20em;
    }

    .secitem + .indexref {
    margin-left: 19em;
    }


    /* Admonitions */
    div.admon h3 {
    padding-left: 2.5em;
    padding-top: 1em;
    }

    div.admon p {
    margin-left: .5em;
    }

    div.admon pre {
    margin: 0.5em 3em;
    }

    div.note, div.tip {
    background-color: #fffff6;
    border: 2px solid #dbddec;
    width: 90%;
    margin: .5em auto;
    }

    div.important, div.warning, div.caution {
    background-color: #fffff6;
    border: medium solid #400;
    width: 90%;
    margin: .5em auto;
    color: #600;
    }

    div.important h3, div.warning h3, div.caution h3 {
    color: #900;
    }

    div.important em, div.warning em, div.caution em {
    color: #000;
    font-weight: bold;
    }


    /* table */
    .table p.title {
    text-align: center;
    margin-top: 0;
    margin-bottom: .3em;
    }

    .table table {
    margin-left: auto;
    margin-right: auto;
    }

    .table table th, .table table td {
    padding: 0.2em 2em 0.2em 2em;
    text-align: left;
    }

    .revhistory {
    padding-left: 1em;
    }

    .revhistory th {
    line-height: 2em;
    text-align: left;
    }

    .revhistory td {
    padding-right: 1em;
    }


    /* variablelist as table */
    .variablelist table {
    width: auto;
    margin: 0 1em 0 1em;
    }

    .variablelist td {
    vertical-align: top;
    }

    .variablelist td span, td p {
    margin: 0.25em;
    }

    .variablelist td p {
    margin-top: 0;
    }


    /* variablelist as list */
    dl {
    padding-left: 1em
    }

    dt {
    font-weight: bold;
    margin-left: 1em;
    }

    dd {
    margin-bottom: .6em;
    margin-left: 1em;
    }

    dd p {
    margin-top: 0;
    margin-bottom: 0;
    padding-top: 0;
    padding-bottom: 0;
    }

    div.materials dt {
    display: list-item;
    }

    div.materials dd {
    margin-left: 0;
    padding-left: 0;
    }


    /* segmentedlist */
    .appendix .segmentedlist {
    padding-left: 1em;
    }

    .package .seg {
    margin-bottom: 0em;
    margin-top: 0em;
    clear: left;
    }

    .content .seg {
    margin-bottom: .4em;
    margin-top: .4em;
    clear: left;
    }

    .segtitle {
    float: left;
    }

    .package .segbody, .appendix .segbody {
    display: block;
    padding-left: 14em;
    }

    .content .segbody {
    display: block;
    padding-left: 12em;
    }


    /* itemizedlist */
    ul {
    padding-left: 1em
    }

    .itemizedlist ul {
    margin-left: 1em
    }

    .itemizedlist li ul {
    margin-bottom: 1.2em;
    }

    .itemizedlist li ul li p {
    margin-top: .5em;
    margin-bottom: .5em;
    }

    .itemizedlist li ul li:first-child p:first-child {
    margin-top: -.6em;
    }

    ul.compact {
    list-style: none;
    }

    .blfs ul.compact {
    list-style: disc;
    }

    ul.compact li {
    margin: 0em;
    padding: 0em;
    }

    ul.compact li p {
    padding: 0.3em;
    margin: 0em;
    }

    .blfs ul.compact li p {
    background-color: #f0fff0;
    }

    /* orderedlist */
    ol {
    list-style: decimal;
    }

    ol ol {
    list-style: lower-alpha;
    }

    ol ol ol {
    list-style: lower-roman;
    }

    ol.compact li {
    margin: 0em;
    padding: 0em;
    }

    ol.compact li p {
    padding: 0.3em;
    margin: 0em;
    }


    /* Indented blocks */
    p, blockquote {
    padding-left: 1em;
    padding-right: 1em;
    }


    /* Monospaced elements */
    tt, code, kbd, pre, .command {
    font-family: monospace;
    }

    .systemitem {
    font-style: italic;
    }

    pre {
    background-color: #e5e5e5;
    border: 1px solid #050505;
    padding: .5em 1em;
    margin: 0 2em .5em 2em;
    font-weight: bold;
    }

    pre.userinput {
    color: #101310;
    }

    pre.root {
    color: #101310;
    border: 1px solid #11a;
    }

    pre.screen {
    color: #000;
    background-color: #e9e9e9;
    font-weight: normal;
    }

    .literal, .prompt {
    font-weight: normal;
    }


    /* Mixed tags */
    p.usernotes {
    margin-left: -1em;
    font-size: small;
    font-weight: bold;
    font-style: italic;
    }

    .underlined {
    text-decoration: underline;
    }


    /* Last edited info */
    p.updated {
    font-size: small;
    font-weight: bold;
    font-style: italic;
    }


    /* Special colored blocks */
    /* OrangeRed4 */
    .feature-ssp {
    color: #8B2500;
    }

    /* RoyalBlue3 */
    .feature-aslr {
    color: #3A5FCD;
    }

    /* NavyBlue */
    .feature-pax {
    color: #000080;
    }

    /* VioletRed */
    .feature-hardened_tmp {
    color: #d02090;
    }

    /* PaleTurquoise4 */
    .feature-warnings {
    color: #668b8b;
    }

    /* RosyBrown */
    .feature-misc {
    color: #bc8f8f;
    }

    /* Sienna*/
    .feature-blowfish {
    color: #8E6B23
    }
    /*]]>*/
    </style>
  </head>
  <body class="clfs" id="clfs-GIT-20240401-x86">
    <div class="book" lang="en" xml:lang="en">
      <div class="titlepage">
        <div>
          <div>
            <h1 class="title">
              <a id="idm1" name="idm1"></a>Cross-Compiled Linux From Scratch
              - Embedded
            </h1>
          </div>
          <div>
            <h2 class="subtitle">
              Version GIT-20240401-x86
            </h2>
          </div>
          <div>
            <p class="copyright">
              Copyright © 2005&ndash;2024 Andrew Bradford, Joe Ciccone, Jim
              Gifford, Maarten Lankhorst, Ryan Oliver, &amp; Michele Bucca
            </p>
          </div>
          <div>
            <div class="legalnotice">
              <a id="idm8" name="idm8"></a>
              <p>
                Copyright © 2005-2024, Joe Ciccone, Jim Gifford, Maarten
                Lankhorst, &amp; Ryan Oliver
              </p>
              <p>
                All rights reserved.
              </p>
              <p>
                This material may be distributed only subject to the terms
                and conditions set forth in the <a class="xref" href=
                "#license" title="Open Publication License">Open Publication
                License</a> v1.0 or later (the latest version is presently
                available at <a class="ulink" href=
                "http://www.opencontent.org/openpub/">http://www.opencontent.org/openpub/</a>).
              </p>
              <p>
                <span class="trademark">Linux</span>® is a registered
                trademark of Linus Torvalds.
              </p>
            </div>
          </div>
        </div>
        <hr />
      </div>
      <div class="toc">
        <h3>
          Table of Contents
        </h3>
        <ul>
          <li class="preface">
            <h4>
              Preface
            </h4>
            <ul>
              <li class="sect1">
                <a href="#pre-foreword">Foreword</a>
              </li>
              <li class="sect1">
                <a href="#pre-audience">Audience</a>
              </li>
              <li class="sect1">
                <a href="#pre-prerequisites">Prerequisites</a>
              </li>
              <li class="sect1">
                <a href="#pre-typography">Typography</a>
              </li>
              <li class="sect1">
                <a href="#pre-organization">Structure</a>
              </li>
              <li class="sect1">
                <a href="#license">Open Publication License</a>
              </li>
              <li class="sect1">
                <a href="#ch-preface-changelog">Master Changelog</a>
              </li>
              <li class="sect1">
                <a href="#ch-preface-acknowledgements">Cross-LFS
                Acknowledgements</a>
              </li>
              <li class="sect1">
                <a href="#pre-errata">Errata</a>
              </li>
            </ul>
          </li>
          <li class="part">
            <h3>
              I. Introduction
            </h3>
            <ul>
              <li class="chapter">
                <h4>
                  1. Introduction
                </h4>
                <ul>
                  <li class="sect1">
                    <a href="#ch-intro-how">How to Build a CLFS System</a>
                  </li>
                  <li class="sect1">
                    <a href="#hostreqs">Host System Requirements</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-intro-resources">Resources</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-intro-askforhelp">Help</a>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li class="part">
            <h3>
              II. Preparing for the Build
            </h3>
            <ul>
              <li class="chapter">
                <h4>
                  2. Build Directory, Packages, and Patches
                </h4>
                <ul>
                  <li class="sect1">
                    <a href="#ch-materials-introduction">Introduction</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-materials-creatingbuilddir">Creating Build
                    and Sources Directories</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-materials-packages-common">All Packages</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-materials-patches-common">Needed Patches</a>
                  </li>
                </ul>
              </li>
              <li class="chapter">
                <h4>
                  3. Final Preparations
                </h4>
                <ul>
                  <li class="sect1">
                    <a href="#ch-final-preps-aboutlfs">About $CLFS</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-final-preps-addinguser">Adding the CLFS
                    User</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-final-preps-settingenviron">Setting Up the
                    Environment</a>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li class="part">
            <h3>
              III. Make the Cross-Compile Tools
            </h3>
            <ul>
              <li class="chapter">
                <h4>
                  4. Constructing Cross-Compile Tools
                </h4>
                <ul>
                  <li class="sect1">
                    <a href="#ch-cross-tools-introduction">Introduction</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-cross-tools-cflags">Build CFLAGS</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-cross-tools-variables">Build Variables</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-cross-tools-sysroot">Create the Cross Tools
                    Sysroot Directory</a>
                  </li>
                  <li class="sect1">
                    <a href=
                    "#ch-cross-tools-linux-headers">Linux-Headers-6.7.4</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-cross-tools-binutils">Binutils-2.42</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-cross-tools-gcc-static">GCC-13.2.0 -
                    Static</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-cross-tools-libc">musl-1.2.5</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-cross-tools-gcc-final">GCC-13.2.0 -
                    Final</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-system-toolchain">ToolChain Variables</a>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li class="part">
            <h3>
              IV. Building the CLFS System
            </h3>
            <ul>
              <li class="chapter">
                <h4>
                  5. Installing Basic System Software
                </h4>
                <ul>
                  <li class="sect1">
                    <a href="#ch-system-introduction">Introduction</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-final-system-creatingdirs">Creating
                    Directories</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-final-system-creatingfiles">Creating the
                    passwd, group, and lastlog Files</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-final-system-libgcc">libgcc-13.2.0</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-final-system-libc">musl-1.2.5</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-system-busybox">BusyBox-1.36.1</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-system-iana-etc">iana-etc-20240125</a>
                  </li>
                </ul>
              </li>
              <li class="chapter">
                <h4>
                  6. Making the CLFS System Bootable
                </h4>
                <ul>
                  <li class="sect1">
                    <a href="#ch-bootable-introduction">Introduction</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-bootable-fstab">Creating the /etc/fstab
                    File</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-bootable-kernel">Linux-6.7.4</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-bootable-bootloaders">Bootloaders</a>
                  </li>
                </ul>
              </li>
              <li class="chapter">
                <h4>
                  7. Setting Up System Bootscripts
                </h4>
                <ul>
                  <li class="sect1">
                    <a href="#ch-scripts-introduction">Introduction</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-scripts-bootscripts">CLFS-Bootscripts-git
                    master HEAD</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-scripts-mdev">Configure mdev</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-scripts-profile">Creating /etc/profile</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-scripts-inittab">Creating /etc/inittab</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-scripts-hostname">Setting Hostname</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-scripts-hosts">Customizing the /etc/hosts
                    File</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-scripts-network">Configuring the network
                    Script</a>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li class="part">
            <h3>
              V. Beyond CLFS Embedded
            </h3>
            <ul>
              <li class="chapter">
                <h4>
                  8. Beyond CLFS Embedded
                </h4>
                <ul>
                  <li class="sect1">
                    <a href="#ch-bclfs">Introduction</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-beyond-packages">Beyond CLFS Packages</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-beyond-patches">Beyond CLFS Patches</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-beyond-zlib">Zlib-1.3.1</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-beyond-netplug">Netplug-1.2.9.2</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-beyond-dropbear">Dropbear-2022.83</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-beyond-wireless_tools">Wireless Tools-29</a>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li class="part">
            <h3>
              VI. Cleanup and Boot
            </h3>
            <ul>
              <li class="chapter">
                <h4>
                  9. Backup and Cleanup
                </h4>
                <ul>
                  <li class="sect1">
                    <a href="#ch-bootable-chowning">Changing the Ownership of
                    the CLFS System</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-cleanup-copy-to-target">Copy to Target</a>
                  </li>
                </ul>
              </li>
              <li class="chapter">
                <h4>
                  10. The End
                </h4>
                <ul>
                  <li class="sect1">
                    <a href="#ch-finish-theend">The End</a>
                  </li>
                  <li class="sect1">
                    <a href="#ch-finish-whatnow">What Now?</a>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li class="index">
            <h3>
              <a href="#idm2498">Index</a>
            </h3>
          </li>
        </ul>
      </div>
      <div class="preface" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title">
                <a id="preface" name="preface"></a>Preface
              </h2>
            </div>
          </div>
        </div>
        <div class="sect1" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title">
                  <a id="pre-foreword" name="pre-foreword"></a>Foreword
                </h2>
              </div>
            </div>
          </div>
          <p>
            The Linux From Scratch Project has seen many changes in the few
            years of its existence. I personally became involved with the
            project in 2000, around the time of the 3.x releases. At that
            time, the build process was to create static binaries with the
            host system, then chroot and build the final binaries on top of
            the static ones.
          </p>
          <p>
            Later came the use of the /static directory to hold the initial
            static builds, keeping them separated from the final system, then
            the PureLFS process developed by Ryan Oliver and Greg Schafer,
            introducing a new toolchain build process that divorces even our
            initial builds from the host. Finally, LFS 6 bought Linux Kernel
            2.6, the udev dynamic device structure, sanitized kernel headers,
            and other improvements to the Linux From Scratch system.
          </p>
          <p>
            The one "flaw" in LFS is that it has always been based on an x86
            class processor. With the advent of the Athlon 64 and Intel EM64T
            processors, the x86-only LFS is no longer ideal. Throughout this
            time, Ryan Oliver developed and documented a process by which you
            could build Linux for any system and from any system, by use of
            cross-compilation techniques. Thus, the Cross-Compiled LFS (CLFS)
            was born.
          </p>
          <p>
            CLFS Embedded follows the same guiding principles the LFS project
            has always followed, e.g., knowing your system inside and out by
            virtue of having built the system yourself. Additionally, during
            a CLFS Embedded build, you will learn advanced techniques such as
            cross-build toolchains, and how to create a smaller footprint
            system supporting architectures such as ARM and MIPS, in addition
            to x86.
          </p>
          <p>
            We hope you enjoy building your own CLFS Embedded system, and the
            benefits that come from a system tailored to your needs.
          </p>
          <div class="literallayout">
            <p>
              --<br />
              Jim&nbsp;Gifford,&nbsp;CLFS&nbsp;Project&nbsp;Co-leader&nbsp;(Page&nbsp;Author)<br />

              Jeremy&nbsp;Utley,&nbsp;CLFS&nbsp;1.x&nbsp;Release&nbsp;Manager&nbsp;(Page&nbsp;Author)<br />

              Ryan&nbsp;Oliver,&nbsp;CLFS&nbsp;Project&nbsp;Co-leader<br />
              Joe&nbsp;Ciccone,&nbsp;Justin&nbsp;Knierim,&nbsp;Chris&nbsp;Staub,&nbsp;Matt&nbsp;Darcy,&nbsp;Ken&nbsp;Moffat,<br />

              Maarten&nbsp;Lankhorst,&nbsp;Zack&nbsp;Winkles,&nbsp;Manuel&nbsp;Canales&nbsp;Esparcia,&nbsp;Michele&nbsp;Bucca<br />

              Nathan&nbsp;Coulson,&nbsp;and&nbsp;Andrew&nbsp;Bradford&nbsp;-&nbsp;CLFS&nbsp;Developers
            </p>
          </div>
        </div>
        <div class="sect1" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title">
                  <a id="pre-audience" name="pre-audience"></a>Audience
                </h2>
              </div>
            </div>
          </div>
          <p>
            There are many reasons why somebody would want to read this book.
            The principal reason is to install a Linux system from the source
            code. A question many people raise is, &ldquo;<span class=
            "quote">why go through all the hassle of manually building a
            Linux system from scratch when you can just download and install
            an existing one?</span>&rdquo; That is a good question and is the
            impetus for this section of the book.
          </p>
          <p>
            One important reason for the existence of CLFS is to help people
            understand how a Linux system works. Building an CLFS system
            helps demonstrate what makes Linux tick, and how things work
            together and depend on each other. One of the best things this
            learning experience provides is the ability to customize Linux to
            your own tastes and needs.
          </p>
          <p>
            A key benefit of CLFS is that it allows users to have more
            control over their system without any reliance on a Linux
            implementation designed by someone else. With CLFS, <span class=
            "emphasis"><em>you</em></span> are in the driver's seat and
            dictate every aspect of the system, such as the directory layout
            and bootscript setup. You also dictate where, why, and how
            programs are installed.
          </p>
          <p>
            Another benefit of CLFS is the ability to create a very compact
            Linux system. When installing a regular distribution, one is
            often forced to include several programs which are probably never
            used. These programs waste disk space or CPU cycles. It is not
            difficult to build an CLFS Embedded system of less than 10
            megabytes (MB), which is substantially smaller than the majority
            of existing installations. Try that with a regular distribution!
          </p>
          <p>
            We could compare Linux distributions to a hamburger purchased at
            a fast-food restaurant&mdash;you have no idea what might be in
            what you are eating. CLFS, on the other hand, does not give you a
            hamburger. Rather, CLFS provides the recipe to make the exact
            hamburger desired. This allows users to review the recipe, omit
            unwanted ingredients, and add your own ingredients to enhance the
            flavor of the burger. When you are satisfied with the recipe,
            move on to preparing it. It can be made to exact
            specifications&mdash;broil it, bake it, deep-fry it, or barbecue
            it.
          </p>
          <p>
            Another analogy that we can use is that of comparing CLFS with a
            finished house. CLFS provides the skeletal plan of a house, but
            it is up to you to build it. CLFS maintains the freedom to adjust
            plans throughout the process, customizing it to the needs and
            preferences of the user.
          </p>
          <p>
            Security is an additional advantage of a custom built Linux
            system. By compiling the entire system from source code, you are
            empowered to audit everything and apply all the security patches
            desired. It is no longer necessary to wait for somebody else to
            compile binary packages that fix a security hole. Unless you
            examine the patch and implement it yourself, you have no
            guarantee that the new binary package was built correctly and
            adequately fixes the problem.
          </p>
          <p>
            The goal of Cross Linux From Scratch is to build a complete and
            usable foundation-level system. Readers who do not wish to build
            their own Linux system from scratch may not benefit from the
            information in this book. If you only want to know what happens
            while the computer boots, we recommend the &ldquo;<span class=
            "quote">From Power Up To Bash Prompt</span>&rdquo; HOWTO located
            at <a class="ulink" href=
            "http://axiom.anu.edu.au/~okeefe/p2b/">http://axiom.anu.edu.au/~okeefe/p2b/</a>
            or on The Linux Documentation Project's (TLDP) website at
            <a class="ulink" href=
            "http://www.tldp.org/HOWTO/From-PowerUp-To-Bash-Prompt-HOWTO.html">
            http://www.tldp.org/HOWTO/From-PowerUp-To-Bash-Prompt-HOWTO.html</a>.
            The HOWTO builds a system which is similar to that of this book,
            but it focuses strictly on creating a system capable of booting
            to a shell prompt. Consider your objective. If you wish to build
            a Linux system and learn along the way, this book is your best
            choice.
          </p>
          <p>
            There are too many good reasons to build your own CLFS system to
            list them all here. This section is only the tip of the iceberg.
            As you continue in your CLFS experience, you will find the power
            that information and knowledge truly bring.
          </p>
        </div>
        <div class="sect1" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title">
                  <a id="pre-prerequisites" name=
                  "pre-prerequisites"></a>Prerequisites
                </h2>
              </div>
            </div>
          </div>
          <p>
            Building a CLFS system is not a simple task. It requires a
            certain level of existing knowledge of Unix system administration
            in order to resolve problems, and correctly execute the commands
            listed. In particular, as an absolute minimum, the reader should
            already have the ability to use the command line (shell) to copy
            or move files and directories, list directory and file contents,
            and change the current directory. It is also expected that the
            reader has a reasonable knowledge of using and installing Linux
            software. A basic knowledge of the architectures being used in
            the Cross LFS process and the host operating systems in use is
            also required.
          </p>
          <p>
            Because the CLFS book assumes <span class="emphasis"><em>at
            least</em></span> this basic level of skill, the various CLFS
            support forums are unlikely to be able to provide you with much
            assistance. Your questions regarding such basic knowledge will
            likely go unanswered, or you will be referred to the CLFS
            essential pre-reading list.
          </p>
          <p>
            Before building a CLFS system, we recommend reading the following
            HOWTOs:
          </p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
                  Software-Building-HOWTO <a class="ulink" href=
                  "http://www.tldp.org/HOWTO/Software-Building-HOWTO.html">http://www.tldp.org/HOWTO/Software-Building-HOWTO.html</a>
                </p>
                <p>
                  This is a comprehensive guide to building and installing
                  &ldquo;<span class="quote">generic</span>&rdquo; Unix
                  software distributions under Linux.
                </p>
              </li>
              <li>
                <p>
                  The Essential Pre-Reading Hint <a class="ulink" href=
                  "http://www.linuxfromscratch.org/hints/downloads/files/essential_prereading.txt">
                  http://www.linuxfromscratch.org/hints/downloads/files/essential_prereading.txt</a>
                </p>
                <p>
                  This is a hint written specifically for users new to Linux.
                  It includes a list of links to excellent sources of
                  information on a wide range of topics. Anyone attempting to
                  install CLFS should have an understanding of many of the
                  topics in this hint.
                </p>
              </li>
            </ul>
          </div>
        </div>
        <div class="sect1" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title">
                  <a id="pre-typography" name="pre-typography"></a>Typography
                </h2>
              </div>
            </div>
          </div>
          <p>
            To make things easier to follow, there are a few typographical
            conventions used throughout this book. This section contains some
            examples of the typographical format found throughout Linux From
            Scratch.
          </p>
          <pre class="userinput"><kbd class=
          "command">./configure --prefix=/usr</kbd></pre>
          <p>
            This form of text is designed to be typed exactly as seen unless
            otherwise noted in the surrounding text. It is also used in the
            explanation sections to identify which of the commands is being
            referenced.
          </p>
          <pre class="screen"><code class=
          "computeroutput">install-info: unknown option '--dir-file=/mnt/clfs/usr/info/dir'</code></pre>
          <p>
            This form of text (fixed-width text) shows screen output,
            probably as the result of commands issued. This format is also
            used to show filenames, such as <code class=
            "filename">/etc/ld.so.conf</code>.
          </p>
          <p>
            <span class="emphasis"><em>Emphasis</em></span>
          </p>
          <p>
            This form of text is used for several purposes in the book. Its
            main purpose is to emphasize important points or items.
          </p>
          <p>
            <a class="ulink" href="http://clfs.org/">http://clfs.org/</a>
          </p>
          <p>
            This format is used for hyperlinks, both within the CLFS
            community and to external pages. It includes HOWTOs, download
            locations, and websites.
          </p>
          <pre class="userinput"><kbd class=
          "command">cat &gt; ${CLFS}/etc/group &lt;&lt; "EOF"
<code class="literal">root:x:0:
bin:x:1:
......</code>
EOF</kbd></pre>
          <p>
            This format is used when creating configuration files. The first
            command tells the system to create the file <code class=
            "filename">${CLFS}/etc/group</code> from whatever is typed on the
            following lines until the sequence end of file (EOF) is
            encountered. Therefore, this entire section is generally typed as
            seen.
          </p>
          <p>
            <em class="replaceable"><code>[REPLACED TEXT]</code></em>
          </p>
          <p>
            This format is used to encapsulate text that is not to be typed
            as seen or copied-and-pasted.
          </p>
          <p>
            <code class="filename">passwd(5)</code>
          </p>
          <p>
            This format is used to refer to a specific manual page
            (hereinafter referred to simply as a &ldquo;<span class=
            "quote">man</span>&rdquo; page). The number inside parentheses
            indicates a specific section inside of <span class=
            "command"><strong>man</strong></span>. For example, <span class=
            "command"><strong>passwd</strong></span> has two man pages.
            <span class="command"><strong>man passwd</strong></span> will
            print the first man page it finds that matches
            &ldquo;<span class="quote">passwd</span>&rdquo;, which will be
            <code class="filename">/usr/share/man/man1/passwd.1</code>. For
            this example, you will need to run <span class=
            "command"><strong>man 5 passwd</strong></span> in order to read
            the specific page being referred to. It should be noted that most
            man pages do not have duplicate page names in different sections.
            Therefore, <span class="command"><strong>man <em class=
            "replaceable"><code>[program name]</code></em></strong></span> is
            generally sufficient.
          </p>
        </div>
        <div class="sect1" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title">
                  <a id="pre-organization" name=
                  "pre-organization"></a>Structure
                </h2>
              </div>
            </div>
          </div>
          <p>
            This book is divided into the following parts.
          </p>
          <div class="sect2" lang="en" xml:lang="en">
            <h3 class="sect2">
              Part I - Introduction
            </h3>
            <p>
              Part I explains a few important notes on how to proceed with
              the Cross-LFS installation. This section also provides
              meta-information about the book.
            </p>
          </div>
          <div class="sect2" lang="en" xml:lang="en">
            <h3 class="sect2">
              Part II - Preparing for the Build
            </h3>
            <p>
              Part II describes how to prepare for the building process
              including downloading the packages.
            </p>
          </div>
          <div class="sect2" lang="en" xml:lang="en">
            <h3 class="sect2">
              Part III - Make the Cross-Compile Tools
            </h3>
            <p>
              Part III shows you how to make a set of Cross-Compiler tools.
              These tools can run on your host system but allow you to build
              packages that will run on your target system.
            </p>
          </div>
          <div class="sect2" lang="en" xml:lang="en">
            <h3 class="sect2">
              Part IV - Building the CLFS System
            </h3>
            <p>
              Part IV shows you how to build the core CLFS system. Compiling
              and installing BusyBox and other required packages, making the
              system bootable, setting up the bootscripts, and installing a
              bootloader.
            </p>
          </div>
          <div class="sect2" lang="en" xml:lang="en">
            <h3 class="sect2">
              Part V - Beyond CLFS Embedded
            </h3>
            <p>
              Part V provides instructions on optional packages that can be
              installed to enhance your CLFS system.
            </p>
          </div>
          <div class="sect2" lang="en" xml:lang="en">
            <h3 class="sect2">
              Part VI - Cleanup and Boot
            </h3>
            <p>
              Part VI finishes up the system by making sure the target file
              system is ready to be booted, copying it to the target, and
              finally booting the system.
            </p>
          </div>
        </div>
        <div class="sect1" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title">
                  <a id="license" name="license"></a>Open Publication License
                </h2>
              </div>
            </div>
          </div>
          <h4>
            <a id="idm117" name="idm117"></a>v1.0, 8 June 1999
          </h4>
          <h3>
            <a id="idm118" name="idm118"></a>I. REQUIREMENTS ON BOTH
            UNMODIFIED AND MODIFIED VERSIONS
          </h3>
          <p>
            The Open Publication works may be reproduced and distributed in
            whole or in part, in any medium physical or electronic, provided
            that the terms of this license are adhered to, and that this
            license or an incorporation of it by reference (with any options
            elected by the author(s) and/or publisher) is displayed in the
            reproduction.
          </p>
          <p>
            Proper form for an incorporation by reference is as follows:
          </p>
          <div class="blockquote">
            <blockquote class="blockquote">
              <p>
                Copyright © 1999-2024 by each contributor. This material may
                be distributed only subject to the terms and conditions set
                forth in the Open Publication License, v1.0 or later (the
                latest version is presently available at <a class="ulink"
                href=
                "http://www.opencontent.org/openpub/">http://www.opencontent.org/openpub/</a>).
              </p>
            </blockquote>
          </div>
          <p>
            The reference must be immediately followed with any options
            elected by the author(s) and/or publisher of the document (see
            section VI).
          </p>
          <p>
            Commercial redistribution of Open Publication-licensed material
            is permitted.
          </p>
          <p>
            Any publication in standard (paper) book form shall require the
            citation of the original publisher and author. The publisher and
            author's names shall appear on all outer surfaces of the book. On
            all outer surfaces of the book the original publisher's name
            shall be as large as the bridgehead of the work and cited as
            possessive with respect to the bridgehead.
          </p>
          <h3>
            <a id="idm127" name="idm127"></a>II. COPYRIGHT
          </h3>
          <p>
            The copyright to each Open Publication is owned by its author(s)
            or designee.
          </p>
          <h3>
            <a id="idm129" name="idm129"></a>III. SCOPE OF LICENSE
          </h3>
          <p>
            The following license terms apply to all Open Publication works,
            unless otherwise explicitly stated in the document.
          </p>
          <p>
            Mere aggregation of Open Publication works or a portion of an
            Open Publication work with other works or programs on the same
            media shall not cause this license to apply to those other works.
            The aggregate work shall contain a notice specifying the
            inclusion of the Open Publication material and appropriate
            copyright notice.
          </p>
          <p>
            SEVERABILITY. If any part of this license is found to be
            unenforceable in any jurisdiction, the remaining portions of the
            license remain in force.
          </p>
          <p>
            NO WARRANTY. Open Publication works are licensed and provided "as
            is" without warranty of any kind, express or implied, including,
            but not limited to, the implied warranties of merchantability and
            fitness for a particular purpose or a warranty of
            non-infringement.
          </p>
          <h3>
            <a id="idm134" name="idm134"></a>IV. REQUIREMENTS ON MODIFIED
            WORKS
          </h3>
          <p>
            All modified versions of documents covered by this license,
            including translations, anthologies, compilations and partial
            documents, must meet the following requirements:
          </p>
          <div class="orderedlist">
            <ol>
              <li>
                <p>
                  The modified version must be labeled as such.
                </p>
              </li>
              <li>
                <p>
                  The person making the modifications must be identified and
                  the modifications dated.
                </p>
              </li>
              <li>
                <p>
                  Acknowledgement of the original author and publisher if
                  applicable must be retained according to normal academic
                  citation practices.
                </p>
              </li>
              <li>
                <p>
                  The location of the original unmodified document must be
                  identified.
                </p>
              </li>
              <li>
                <p>
                  The original author's (or authors') name(s) may not be used
                  to assert or imply endorsement of the resulting document
                  without the original author's (or authors') permission.
                </p>
              </li>
            </ol>
          </div>
          <h3>
            <a id="idm147" name="idm147"></a>V. GOOD-PRACTICE RECOMMENDATIONS
          </h3>
          <p>
            In addition to the requirements of this license, it is requested
            from and strongly recommended of redistributors that:
          </p>
          <div class="orderedlist">
            <ol>
              <li>
                <p>
                  If you are distributing Open Publication works on hardcopy
                  or CD-ROM, you provide email notification to the authors of
                  your intent to redistribute at least thirty days before
                  your manuscript or media freeze, to give the authors time
                  to provide updated documents. This notification should
                  describe modifications, if any, made to the document.
                </p>
              </li>
              <li>
                <p>
                  All substantive modifications (including deletions) be
                  either clearly marked up in the document or else described
                  in an attachment to the document.
                </p>
              </li>
              <li>
                <p>
                  Finally, while it is not mandatory under this license, it
                  is considered good form to offer a free copy of any
                  hardcopy and CD-ROM expression of an Open
                  Publication-licensed work to its author(s).
                </p>
              </li>
            </ol>
          </div>
          <h3>
            <a id="idm156" name="idm156"></a>VI. LICENSE OPTIONS
          </h3>
          <p>
            The author(s) and/or publisher of an Open Publication-licensed
            document may elect certain options by appending language to the
            reference to or copy of the license. These options are considered
            part of the license instance and must be included with the
            license (or its incorporation by reference) in derived works.
          </p>
          <p>
            A. To prohibit distribution of substantively modified versions
            without the explicit permission of the author(s). "Substantive
            modification" is defined as a change to the semantic content of
            the document, and excludes mere changes in format or
            typographical corrections.
          </p>
          <p>
            To accomplish this, add the phrase `Distribution of substantively
            modified versions of this document is prohibited without the
            explicit permission of the copyright holder.' to the license
            reference or copy.
          </p>
          <p>
            B. To prohibit any publication of this work or derivative works
            in whole or in part in standard (paper) book form for commercial
            purposes is prohibited unless prior permission is obtained from
            the copyright holder.
          </p>
          <p>
            To accomplish this, add the phrase 'Distribution of the work or
            derivative of the work in any standard (paper) book form is
            prohibited unless prior permission is obtained from the copyright
            holder.' to the license reference or copy.
          </p>
        </div>
        <div class="sect1" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title">
                  <a id="ch-preface-changelog" name=
                  "ch-preface-changelog"></a>Master Changelog
                </h2>
              </div>
            </div>
          </div>
          <p>
            This is version GIT-20240401 of the Cross-Compiled Linux From
            Scratch book, dated April 01, 2024. If this book is more than six
            months old, a newer and better version is probably already
            available. To find out, please check one of the mirrors via
            <a class="ulink" href=
            "http://trac.clfs.org/">http://trac.clfs.org/</a>.
          </p>
          <p>
            Below is a list of detailed changes made since the previous
            release of the book.
          </p>
          <div class="itemizedlist">
            <p class="title">
              <b>Changelog Entries:</b>
            </p>
            <ul>
              <li>
                <p>
                  March 23, 2024
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [michele13] - Fixed instructions for linux kernel
                        build.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  March 22, 2024
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [michele13] - Removed Iana-etc patch.
                      </p>
                    </li>
                    <li>
                      <p>
                        [michele13] - Fixed instructions for binutils,
                        linux-headers and Iana-etc.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  March 21, 2024
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [michele13] - Updated Busybox to version 1.36.1.
                      </p>
                    </li>
                    <li>
                      <p>
                        [michele13] - Updated Dropbear to version 2022.83.
                      </p>
                    </li>
                    <li>
                      <p>
                        [michele13] - Updated musl to version 1.2.5.
                      </p>
                    </li>
                    <li>
                      <p>
                        [michele13] - Updated Binutils to version 2.42.
                      </p>
                    </li>
                    <li>
                      <p>
                        [michele13] - Updated Linux to version 6.7.4.
                      </p>
                    </li>
                    <li>
                      <p>
                        [michele13] - Updated GCC to version 13.2.0.
                      </p>
                    </li>
                    <li>
                      <p>
                        [michele13] - Updated GMP to version 6.3.0.
                      </p>
                    </li>
                    <li>
                      <p>
                        [michele13] - Updated MPC to version 1.3.1.
                      </p>
                    </li>
                    <li>
                      <p>
                        [michele13] - Updated MPFR to version 4.2.1.
                      </p>
                    </li>
                    <li>
                      <p>
                        [michele13] - Fixed download links of Iana-etc and
                        Wireless-Tools.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  April 19, 2019
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [abradford] - Fix download links for MPC and
                        bootscripts.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  October 12, 2017
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [abradford] - Many small fixes submitted by "selk" on
                        IRC and "akhiezer" via email.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Update Linux to v4.9.22.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Update musl to version 1.1.16.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Add new concept of "targetfs" directory
                        parallel to the cross-tools which allows easier
                        retaining of cross-tools across target builds.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Remove utmp, wtmp, and btmp creation.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  December 28, 2016
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [abradford] - Add apt-get line to INSTALL document.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Update binutils to version 2.27.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Update busybox to version 1.24.2.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Update gmp to version 6.1.1.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Update Linux to version 4.4.21.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Update mpc to version 1.0.3.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Update mpfr to version 3.1.2.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Update musl to version 1.1.15.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Update GCC to version 6.2 which removes
                        the need for patching GCC for compatibility with
                        musl.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Update host requirements and script for
                        m4 and ncurses5.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  June 13, 2014
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [abradford] - Allow for easier starting over of
                        targetfs build.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Remove e2fsprogs, busybox version of
                        utilities are good enough.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Remove iptables, untested and largely
                        unused.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Add netplug utility to beyond.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Update binutils to v2.24.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Update busybox to v1.22.1.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Update musl to v1.0.3.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Simplify beyond sections into one
                        section.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  October 24, 2013
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [abradford] - Shorten triplets.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Reorder variable tables for easier
                        reading.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - ARM and x86 are assumed little endian.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Fix musl installation symlinking.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Fix iana-etc 'make get'.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  October 21, 2013
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [abradford] - Cleanup the kernel build.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Move bootloaders into bootable section,
                        just give recommendations no exact steps.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Create top level README and LICENSE.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  October 18, 2013
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [abradford] - Fix the networking configuration to use
                        eth0 and DHCP to obtain a valid IP address.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  October 17, 2013
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [abradford] - Update dropbear to 2013.60 and fix
                        instructions.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Assorted docbook updates for common
                        pages.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Reorganize things people don't need to
                        read into the preface and things that really should
                        be read into the chapters.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Delete hostapd and lib-nl.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Delete dependencies information, most
                        of it was wrong or outdated and so long as you follow
                        the book in order there's no issues.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  October 16, 2013
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [abradford] - Remove uClibc, use musl-libc.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Build cross compiler completely
                        separate from target file system.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Build GMP, MPFR, and MPC within GCC
                        tree.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Linewrap many configure switches for
                        easier reading and editing.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  August 12, 2013
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [abradford] - Don't copy libiberty.h from binutils.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Install linux headers directly without
                        cp.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Revert install of headers to
                        cross-tools.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  July 24, 2013
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [abradford] - Fix binutils build issue with some
                        Texinfo.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Install headers to cross-tools.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  June 17, 2013
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [abradford] - Change partitioning to creating build
                        dir.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  June 13, 2013
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [abradford] - Remove WRT arch.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  June 11, 2013
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [abradford] - Many package updates.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Removal of some LFS specific
                        information.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Update host requirements to at least
                        Debian Squeeze.
                      </p>
                    </li>
                    <li>
                      <p>
                        [kterrell] - Removal of sources from final tarball.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  September 22, 2012
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [abradford] - Small fixes to prologue and ch 1 and 2.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  September 13, 2012
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [ljump] - Fix System.map depmod command.
                      </p>
                    </li>
                    <li>
                      <p>
                        [ljump] - Fix console and null /dev node creation for
                        final system.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  September 02, 2012
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [William Harrington] - Fix uClibc patch MD5 sum.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  August 24, 2012
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [William Harrington] - Change Beyond Net hostapd page
                        to include bootscript and configuration sections.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  August 22, 2012
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [William Harrington] - Change Beyond Net Dropbear
                        page and edit the installation of bootscripts
                        section.
                      </p>
                    </li>
                    <li>
                      <p>
                        [William Harrington] - Remove bash reference in
                        hostreqs version script to use $SHELL variable.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  August 08, 2012
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [William Harrington] - Update version check script to
                        find the libc version with hosts that use paths other
                        than /lib and /lib64, such as multiarch distro.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  May 14, 2011
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [abradford] - Updated /etc/mdev.conf to Alpine
                        Linux's example to provide a better baseline example.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Reverted changes that removed the
                        mknod'ing of /dev/console and /dev/null. These nodes
                        may be needed on some systems for proper booting.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Added Wireless Tools package to Beyond
                        Networking section. Thanks to Ivan Castell Rovira for
                        providing a set of instructions for the installation
                        of this package.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Fixed some Dropbear issues with
                        symlinks and directory naming.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  April 20, 2011
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [abradford] - Created a Beyond section just for extra
                        libraries and moved zlib into it.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  April 19, 2011
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [abradford] - Created a Beyond section just for
                        networking tools.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Created a Beyond section just for file
                        system tools and moved e2fsprogs into it.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  April 8, 2011
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [jciccone] - Cleaned up the acknowledgements page.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  March 31, 2011
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [abradford] - Updated BusyBox to version 1.18.4.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Updated GCC to version 4.6.0.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Updated MPC to version 0.9.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Updated zlib to version 1.2.5.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Updated Linux kernel to version
                        2.6.38.2.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Require Gawk 3.1 or greater because of
                        Iana-Etc requirements.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Updated "What Now?" section to include
                        CBLFS link. Thanks go to Adrian Grigo.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Link ${CLFS}/etc/init.d/rcS to
                        ${CLFS}/etc/rc.d/startup so that BusyBox's init can
                        find the startup scripts.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Updated mdev configuration such that
                        video output is disabled by default to ensure no
                        errors if video is not available.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  March 23, 2011
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [abradford] - Remove mknod commands as mdev takes
                        care of creating all required entries in /dev
                        automatically.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Moved change ownership section to be as
                        late in the book as possible and only operate on a
                        copy of the file system.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  March 18, 2011
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [abradford] - Copy libgcc library to target as it's
                        needed by at least e2fsprogs.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  March 7, 2011
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [abradford] - Added optional information for building
                        C++ compiler.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Updated bootscripts install target and
                        package contents to match current bootscripts.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  February 24, 2011
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [abradford] - Added --disable-multilib to GCC builds.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  February 10, 2011
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [abradford] - Changed GCC Static and Final to build
                        GCC for ${CLFS_ABI} for ARM and MIPS, ${CLFS_CPU} for
                        x86. This removes the need for using the ${BUILD}
                        variable when building packages.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Updated Resources section.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  January 30, 2011
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [abradford] - Updated MPFR download link.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Updated GCC to version 4.5.2.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Updated Binutils to version 2.21.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Added information to GCC's configure
                        options.
                      </p>
                    </li>
                    <li>
                      <p>
                        [abradford] - Updated Iana-Etc to use more up-to-date
                        data.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  Janurary 10, 2011
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [jciccone] - Changes Submitted By Andrew Bradford via
                        the CLFS-Dev Mailing List. Updated E2fsprogs to
                        1.41.14 and changed some configure switches for
                        uClibc compatibility.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  November 28, 2010
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [jciccone] - Updated BusyBox to 1.17.3.
                      </p>
                    </li>
                    <li>
                      <p>
                        [jciccone] - Updated uClibc to 0.9.31.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  November 21, 2010
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [jciccone] - Added MPC 0.8.2.
                      </p>
                    </li>
                    <li>
                      <p>
                        [jciccone] - Updated GCC to 4.5.1.
                      </p>
                    </li>
                    <li>
                      <p>
                        [jciccone] - Updated Binutils to 2.20.1.
                      </p>
                    </li>
                    <li>
                      <p>
                        [jciccone] - Updated MPFR to 3.0.0.
                      </p>
                    </li>
                    <li>
                      <p>
                        [jciccone] - Updated GMP to 5.0.1.
                      </p>
                    </li>
                    <li>
                      <p>
                        [jciccone] - Updated the Linux Kernel to 2.6.36.
                      </p>
                    </li>
                    <li>
                      <p>
                        [jciccone] - Make sure we change CLFS_HOST before we
                        set it. Also make sure that CLFS_HOST gets saved to
                        the bashrc.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  November 8, 2008
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [jciccone] - Updated Busybox to 1.12.1.
                      </p>
                    </li>
                    <li>
                      <p>
                        [jciccone] - Updated uClibc to 0.9.30-rc3.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  November 8, 2008
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [jciccone] - Dropped the uClibc Headers Page.
                      </p>
                    </li>
                    <li>
                      <p>
                        [jciccone] - Updated GCC to 4.3.2.
                      </p>
                    </li>
                    <li>
                      <p>
                        [jciccone] - Updated Binutils to 2.19.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  Janurary 9, 2008
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [jciccone] - Updated Busybox to 1.8.2.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
              <li>
                <p>
                  November 5, 2006
                </p>
                <div class="itemizedlist">
                  <ul>
                    <li>
                      <p>
                        [jim] - Start of CLFS Embedded Development.
                      </p>
                    </li>
                  </ul>
                </div>
              </li>
            </ul>
          </div>
        </div>
        <div class="sect1" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title">
                  <a id="ch-preface-acknowledgements" name=
                  "ch-preface-acknowledgements"></a>Cross-LFS
                  Acknowledgements
                </h2>
              </div>
            </div>
          </div>
          <p>
            The CLFS team would like to acknowledge people who have assisted
            in making the book what it is today.
          </p>
          <p>
            Our Leaders:
          </p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
                  Ryan Oliver - Build Process Developer.
                </p>
              </li>
              <li>
                <p>
                  Joe Ciccone - Lead Developer.
                </p>
              </li>
              <li>
                <p>
                  Jim Gifford - Lead Developer.
                </p>
              </li>
            </ul>
          </div>
          <p>
            Our CLFS Team:
          </p>
          <div class="itemizedlist">
            <ul>
              <li>
                <p>
                  Andrew Bradford - Embedded Developer.
                </p>
              </li>
              <li>
                <p>
                  Manuel Canales Esparcia - Book XML.
                </p>
              </li>
              <li>
                <p>
                  Justin Knierim - Website Architect.
                </p>
              </li>
              <li>
                <p>
                  Maarten Lankhorst - MIPS/WRT Embedded Developer.
                </p>
              </li>
              <li>
                <p>
                  Chris Staub - Testing and Quality Control.
                </p>
              </li>
              <li>
                <p>
                  Zack Winkles - Testing and Quality Control.
                </p>
              </li>
            </ul>
          </div>
          <p>
            Thank you all for your support.
          </p>
        </div>
        <div class="sect1" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title">
                  <a id="pre-errata" name="pre-errata"></a>Errata
                </h2>
              </div>
            </div>
          </div>
          <p>
            The software used to create a CLFS system is constantly being
            updated and enhanced. Security warnings and bug fixes may become
            available after the CLFS book has been released. Once a release
            of the CLFS Embedded book is made, this page will provide a link
            to the CLFS Embedded errata page.
          </p>
        </div>
      </div>
      <div class="part" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h1 class="title">
                <a id="part1" name="part1"></a>Part&nbsp;I.&nbsp;Introduction
              </h1>
            </div>
          </div>
        </div>
        <div class="chapter" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title">
                  <a id="chapter-intro" name=
                  "chapter-intro"></a>Chapter&nbsp;1.&nbsp;Introduction
                </h2>
              </div>
            </div>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-intro-how" name=
                    "ch-intro-how"></a>1.1.&nbsp;How to Build a CLFS System
                  </h2>
                </div>
              </div>
            </div>
            <p>
              The CLFS system will be built by using a previously installed
              Linux distribution (such as Debian, Fedora, Mandriva, SUSE, or
              Ubuntu). This existing Linux system (the host) will be used as
              a starting point to provide necessary programs, including a
              compiler, linker, and shell, to build the new system. Select
              the &ldquo;<span class="quote">development</span>&rdquo; option
              during the distribution installation to be able to access these
              tools.
            </p>
            <p>
              As an alternative to installing an entire separate distribution
              onto your machine, you may wish to use the Linux From Scratch
              LiveCD. This CD works well as a host system, providing all the
              tools you need to successfully follow the instructions in this
              book. It does also contain source packages and patches for the
              LFS book, and a copy of the LFS book, but not the needed
              packages or book for CLFS. You can still use the CD for
              building CLFS, but you will need to download the packages,
              patches and book separately. You can also look at <a class=
              "ulink" href=
              "http://www.linuxfromscratch.org/hints/downloads/files/lfscd-remastering-howto.txt">
              http://www.linuxfromscratch.org/hints/downloads/files/lfscd-remastering-howto.txt</a>
              for infomation on building your own CD, replacing the LFS
              packages and book with those for CLFS. Once you have the CD, no
              network connection or additional downloads are necessary. For
              more information about the LFS LiveCD or to download a copy,
              visit <a class="ulink" href=
              "http://www.linuxfromscratch.org/livecd/">http://www.linuxfromscratch.org/livecd/</a>.
            </p>
            <p>
              <a class="xref" href="#chapter-getting-materials" title=
              "Chapter&nbsp;2.&nbsp;Build Directory, Packages, and Patches">Build
              Directory, Packages, and Patches</a> of this book describes how
              to create a temporary build directory and which packages and
              patches need to be downloaded to build a CLFS system. <a class=
              "xref" href="#chapter-final-preps" title=
              "Chapter&nbsp;3.&nbsp;Final Preparations">Final
              Preparations</a> discusses the setup for an appropriate working
              environment. Please read <a class="xref" href=
              "#chapter-final-preps" title=
              "Chapter&nbsp;3.&nbsp;Final Preparations">Final
              Preparations</a> carefully as it explains several important
              issues the developer should be aware of before beginning to
              work through <a class="xref" href="#chapter-cross-tools" title=
              "Chapter&nbsp;4.&nbsp;Constructing Cross-Compile Tools">Constructing
              Cross-Compile Tools</a> and beyond.
            </p>
            <p>
              <a class="xref" href="#chapter-cross-tools" title=
              "Chapter&nbsp;4.&nbsp;Constructing Cross-Compile Tools">Constructing
              Cross-Compile Tools</a> explains the installation of
              cross-compile tools which will be built on the host but be able
              to compile programs that run on the target machine. These
              cross-compile tools will be used to create the final-system.
            </p>
            <p>
              The process of building cross-compile tools first involves
              installing binutils into ${CLFS}/cross-tools, so that we have
              an asembler and a linker for our target architecture. GCC is
              then compiled statically and installed into
              ${CLFS}/cross-tools, this cross-compiler is used to build the
              libc for the final-system. The GCC cross-compiler is then
              rebuilt dynamically - this final cross-compiler is what will be
              used to build the final-system.
            </p>
            <p>
              In <a class="xref" href="#chapter-building-system" title=
              "Chapter&nbsp;5.&nbsp;Installing Basic System Software">Installing
              Basic System Software</a>, the full CLFS system is
              cross-compiled. The system is built using a sysroot compiler.
              Sysroot is a parameter passed to binutils and gcc that modifies
              its default search paths.
            </p>
            <p>
              To finish the installation, the CLFS-Bootscripts are set up in
              <a class="xref" href="#chapter-bootscripts" title=
              "Chapter&nbsp;7.&nbsp;Setting Up System Bootscripts">Setting Up
              System Bootscripts</a>, and the kernel and boot loader are set
              up in <a class="xref" href="#chapter-bootable" title=
              "Chapter&nbsp;6.&nbsp;Making the CLFS System Bootable">Making
              the CLFS System Bootable</a>. <a class="xref" href=
              "#chapter-finalizing" title="Chapter&nbsp;10.&nbsp;The End">The
              End</a> contains information on furthering the CLFS experience
              beyond this book. After the steps in this book have been
              implemented, the computer will be ready to reboot into the new
              CLFS system.
            </p>
            <p>
              This is the process in a nutshell. Detailed information on each
              step is discussed in the following chapters and package
              descriptions. Items that may seem complicated will be
              clarified, and everything will fall into place as the reader
              embarks on the CLFS adventure.
            </p>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="hostreqs" name="hostreqs"></a>1.2.&nbsp;Host
                    System Requirements
                  </h2>
                </div>
              </div>
            </div>
            <p>
              You should be able to build a CLFS system from just about any
              recent Linux distrubtion. Your host system should have the
              following software with the minimum versions indicated. Also
              note that many distributions will place software headers into
              separate packages, often in the form of &ldquo;<span class=
              "quote">[package-name]-devel</span>&rdquo; or
              &ldquo;<span class="quote">[package-name]-dev</span>&rdquo;. Be
              sure to install those if your distribution provides them.
            </p>
            <div class="itemizedlist">
              <ul class="compact">
                <li>
                  <p>
                    <span class="strong"><strong>Bash-4.0</strong></span>
                  </p>
                </li>
                <li>
                  <p>
                    <span class=
                    "strong"><strong>Binutils-2.20</strong></span>
                  </p>
                </li>
                <li>
                  <p>
                    <span class="strong"><strong>Bzip2-1.0.5</strong></span>
                  </p>
                </li>
                <li>
                  <p>
                    <span class=
                    "strong"><strong>Coreutils-8.1</strong></span>
                  </p>
                </li>
                <li>
                  <p>
                    <span class=
                    "strong"><strong>Diffutils-3.0</strong></span>
                  </p>
                </li>
                <li>
                  <p>
                    <span class=
                    "strong"><strong>Findutils-4.4.0</strong></span>
                  </p>
                </li>
                <li>
                  <p>
                    <span class="strong"><strong>Gawk-3.1</strong></span>
                  </p>
                </li>
                <li>
                  <p>
                    <span class="strong"><strong>GCC-4.4</strong></span>
                  </p>
                </li>
                <li>
                  <p>
                    <span class="strong"><strong>Glibc-2.11</strong></span>
                  </p>
                </li>
                <li>
                  <p>
                    <span class="strong"><strong>Grep-2.6</strong></span>
                  </p>
                </li>
                <li>
                  <p>
                    <span class="strong"><strong>Gzip-1.3</strong></span>
                  </p>
                </li>
                <li>
                  <p>
                    <span class="strong"><strong>M4-1.4.16</strong></span>
                  </p>
                </li>
                <li>
                  <p>
                    <span class="strong"><strong>Make-3.81</strong></span>
                  </p>
                </li>
                <li>
                  <p>
                    <span class="strong"><strong>ncurses5</strong></span>
                  </p>
                </li>
                <li>
                  <p>
                    <span class="strong"><strong>libelf from
                    Elfutils</strong></span>
                  </p>
                </li>
                <li>
                  <p>
                    <span class="strong"><strong>libssl from
                    OpenSSL</strong></span>
                  </p>
                </li>
                <li>
                  <p>
                    <span class="strong"><strong>Patch-2.6</strong></span>
                  </p>
                </li>
                <li>
                  <p>
                    <span class="strong"><strong>Sed-4.2.1</strong></span>
                  </p>
                </li>
                <li>
                  <p>
                    <span class="strong"><strong>Sudo-1.7.4p4</strong></span>
                  </p>
                </li>
                <li>
                  <p>
                    <span class="strong"><strong>Tar-1.23</strong></span>
                  </p>
                </li>
                <li>
                  <p>
                    <span class="strong"><strong>Texinfo-4.13</strong></span>
                  </p>
                </li>
              </ul>
            </div>
            <p>
              To see whether your host system has all the appropriate
              versions, run the following:
            </p>
            <pre class="userinput"><kbd class=
            "command">cat &gt; version-check.sh &lt;&lt; "EOF"
<code class="literal">#!/bin/bash

# Simple script to list version numbers of critical development tools
set -e
bash --version | head -n1 | cut -d" " -f2-4
echo -n "Binutils: "; ld --version | head -n1 | cut -d" " -f3-
bzip2 --version 2&gt;&amp;1 &lt; /dev/null | head -n1 | cut -d" " -f1,6-
echo -n "Coreutils: "; chown --version | head -n1 | cut -d")" -f2
diff --version | head -n1
find --version | head -n1
gawk --version | head -n1
gcc --version | head -n1
ldd $(which ${SHELL}) | grep libc.so | cut -d ' ' -f 3 | ${SHELL} | head -n 1 \
| cut -d ' ' -f 1-10
grep --version | head -n1
gzip --version | head -n1
m4 --version | head -n1
make --version | head -n1
echo "#include &lt;ncurses.h&gt;" | gcc -E - &gt; /dev/null
echo "#include &lt;openssl/ssl2.h&gt;" | gcc -E - &gt; /dev/null
echo "#include &lt;libelf.h&gt;" | gcc -E - &gt; /dev/null
patch --version | head -n1
sed --version | head -n1
sudo -V | head -n1
tar --version | head -n1
makeinfo --version | head -n1</code>

EOF

bash version-check.sh</kbd></pre>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-intro-resources" name=
                    "ch-intro-resources"></a>1.3.&nbsp;Resources
                  </h2>
                </div>
              </div>
            </div>
            <div class="sect2" lang="en" xml:lang="en">
              <h3 class="sect2">
                <a id="ch-intro-faq" name="ch-intro-faq"></a>1.3.1. FAQ
              </h3>
              <p>
                If during the building of the CLFS system you encounter any
                errors, have any questions, or think there is a typo in the
                book, please start by consulting the Frequently Asked
                Questions (FAQ) that is located at <a class="ulink" href=
                "http://trac.clfs.org/wiki/faq">http://trac.clfs.org/wiki/faq</a>.
              </p>
            </div>
            <div class="sect2" lang="en" xml:lang="en">
              <h3 class="sect2">
                <a id="ch-intro-maillists" name=
                "ch-intro-maillists"></a>1.3.2. Mailing Lists
              </h3>
              <p>
                The <code class="uri">clfs.org</code> server hosts a number
                of mailing lists used for the development of the CLFS
                project. These lists include the main development and support
                lists, among others. If the FAQ does not solve the problem
                you are having, the next step would be to search the mailing
                lists at <a class="ulink" href=
                "http://trac.clfs.org/wiki/lists">http://trac.clfs.org/wiki/lists</a>.
              </p>
              <p>
                For information on the different lists, how to subscribe,
                archive locations, and additional information, visit
                <a class="ulink" href=
                "http://trac.clfs.org/wiki/lists">http://trac.clfs.org/wiki/lists</a>.
              </p>
            </div>
            <div class="sect2" lang="en" xml:lang="en">
              <h3 class="sect2">
                <a id="ch-intro-irc" name="ch-intro-irc"></a>1.3.3. IRC
              </h3>
              <p>
                Several members of the CLFS community offer assistance on our
                community Internet Relay Chat (IRC) network. Before using
                this support, please make sure that your question is not
                already answered in the CLFS FAQ or the mailing list
                archives. You can find the IRC network at <code class=
                "uri">chat.freenode.net</code>. The support channel for
                cross-lfs is named #cross-lfs. If you need to show people the
                output of your problems, please use <a class="ulink" href=
                "http://pastebin.clfs.org">http://pastebin.clfs.org</a> and
                reference the pastebin URL when asking your questions.
              </p>
            </div>
            <div class="sect2" lang="en" xml:lang="en">
              <h3 class="sect2">
                <a id="ch-intro-mirrors" name="ch-intro-mirrors"></a>1.3.4.
                Mirror Sites
              </h3>
              <p>
                The CLFS project has a number of world-wide mirrors to make
                accessing the website and downloading the required packages
                more convenient. Please visit <a class="ulink" href=
                "http://trac.clfs.org/wiki/mirrors">http://trac.clfs.org/wiki/mirrors</a>
                for CLFS mirror information.
              </p>
            </div>
            <div class="sect2" lang="en" xml:lang="en">
              <h3 class="sect2">
                <a id="ch-intro-contactinfo" name=
                "ch-intro-contactinfo"></a>1.3.5. Contact Information
              </h3>
              <p>
                Please direct all your questions and comments to one of the
                CLFS mailing lists (see above).
              </p>
            </div>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-intro-askforhelp" name=
                    "ch-intro-askforhelp"></a>1.4.&nbsp;Help
                  </h2>
                </div>
              </div>
            </div>
            <p>
              If an issue or a question is encountered while working through
              this book, check the FAQ page at <a class="ulink" href=
              "http://trac.clfs.org/wiki/faq#generalfaq">http://trac.clfs.org/wiki/faq#generalfaq</a>.
              Questions are often already answered there. If your question is
              not answered on this page, try to find the source of the
              problem. The following hint will give you some guidance for
              troubleshooting: <a class="ulink" href=
              "http://www.linuxfromscratch.org/hints/downloads/files/errors.txt">
              http://www.linuxfromscratch.org/hints/downloads/files/errors.txt</a>.
            </p>
            <p>
              We also have a wonderful CLFS community that is willing to
              offer assistance through the mailing lists and IRC (see the
              <a class="xref" href="#ch-intro-resources" title=
              "1.3.&nbsp;Resources">Section&nbsp;1.3,
              &ldquo;Resources&rdquo;</a> section of this book). However, we
              get several support questions everyday and many of them can be
              easily answered by going to the FAQ and by searching the
              mailing lists first. So for us to offer the best assistance
              possible, you need to do some research on your own first. This
              allows us to focus on the more unusual support needs. If your
              searches do not produce a solution, please include all relevant
              information (mentioned below) in your request for help.
            </p>
            <div class="sect2" lang="en" xml:lang="en">
              <h3 class="sect2">
                1.4.1. Things to Mention
              </h3>
              <p>
                Apart from a brief explanation of the problem being
                experienced, the essential things to include in any request
                for help are:
              </p>
              <div class="itemizedlist">
                <ul>
                  <li>
                    <p>
                      The version of the book being used (in this case CLFS
                      Embedded GIT-20240401)
                    </p>
                  </li>
                  <li>
                    <p>
                      The host distribution and version being used to create
                      CLFS.
                    </p>
                  </li>
                  <li>
                    <p>
                      The architecture of the host and target.
                    </p>
                  </li>
                  <li>
                    <p>
                      The value of the ${CLFS_TARGET}, and ${BUILD}
                      environment variables.
                    </p>
                  </li>
                  <li>
                    <p>
                      The package or section in which the problem was
                      encountered.
                    </p>
                  </li>
                  <li>
                    <p>
                      The exact error message or symptom received. See
                      <a class="xref" href=
                      "#ch-intro-askforhelp-compilation-problems" title=
                      "1.4.3.&nbsp;Compilation Problems">Section&nbsp;1.4.3,
                      &ldquo;Compilation Problems&rdquo;</a> below for an
                      example.
                    </p>
                  </li>
                  <li>
                    <p>
                      Note whether you have deviated from the book at all. A
                      package version change or even a minor change to any
                      command is considered deviation.
                    </p>
                  </li>
                </ul>
              </div>
              <div class="admon note">
                <h3>
                  Note
                </h3>
                <p>
                  Deviating from this book does <span class=
                  "emphasis"><em>not</em></span> mean that we will not help
                  you. After all, the CLFS project is about personal
                  preference. Be upfront about any changes to the established
                  procedure&mdash;this helps us evaluate and determine
                  possible causes of your problem.
                </p>
              </div>
            </div>
            <div class="sect2" lang="en" xml:lang="en">
              <h3 class="sect2">
                1.4.2. Configure Script Problems
              </h3>
              <p>
                If something goes wrong while running the <span class=
                "command"><strong>configure</strong></span> script, review
                the <code class="filename">config.log</code> file. This file
                may contain the errors you encountered during <span class=
                "command"><strong>configure</strong></span>. It often logs
                errors that may have not been printed to the screen. Include
                only the <span class="emphasis"><em>relevant</em></span>
                lines if you need to ask for help.
              </p>
            </div>
            <div class="sect2" lang="en" xml:lang="en">
              <h3 class="sect2">
                <a id="ch-intro-askforhelp-compilation-problems" name=
                "ch-intro-askforhelp-compilation-problems"></a>1.4.3.
                Compilation Problems
              </h3>
              <p>
                Both the screen output and the contents of various files are
                useful in determining the cause of compilation problems. The
                screen output from the <span class=
                "command"><strong>configure</strong></span> script and the
                <span class="command"><strong>make</strong></span> run can be
                helpful. It is not necessary to include the entire output,
                but do include enough of the relevant information. Below is
                an example of the type of information to include from the
                screen output from <span class=
                "command"><strong>make</strong></span>:
              </p>
              <pre class="screen"><code class=
              "computeroutput">gcc -DALIASPATH=\"/mnt/clfs/usr/share/locale:.\"
-DLOCALEDIR=\"/mnt/clfs/usr/share/locale\"
-DLIBDIR=\"/mnt/clfs/usr/lib\"
-DINCLUDEDIR=\"/mnt/clfs/usr/include\" -DHAVE_CONFIG_H -I. -I.
-g -O2 -c getopt1.c
gcc -g -O2 -static -o make ar.o arscan.o commands.o dir.o
expand.o file.o function.o getopt.o implicit.o job.o main.o
misc.o read.o remake.o rule.o signame.o variable.o vpath.o
default.o remote-stub.o version.o opt1.o
-lutil job.o: In function `load_too_high':
/clfs/tmp/make-3.79.1/job.c:1565: undefined reference
to `getloadavg'
collect2: ld returned 1 exit status
make[2]: *** [make] Error 1
make[2]: Leaving directory `/clfs/tmp/make-3.79.1'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/clfs/tmp/make-3.79.1'
make: *** [all-recursive-am] Error 2</code></pre>
              <p>
                In this case, many people would just include the bottom
                section:
              </p>
              <pre class="screen"><code class=
              "computeroutput">make [2]: *** [make] Error 1</code></pre>
              <p>
                This is not enough information to properly diagnose the
                problem because it only notes that something went wrong, not
                <span class="emphasis"><em>what</em></span> went wrong. The
                entire section, as in the example above, is what should be
                saved because it includes the command that was executed and
                the associated error message(s).
              </p>
              <p>
                An excellent article about asking for help on the Internet is
                available online at <a class="ulink" href=
                "http://catb.org/~esr/faqs/smart-questions.html">http://catb.org/~esr/faqs/smart-questions.html</a>.
                Read and follow the hints in this document to increase the
                likelihood of getting the help you need.
              </p>
            </div>
          </div>
        </div>
      </div>
      <div class="part" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h1 class="title">
                <a id="part2" name="part2"></a>Part&nbsp;II.&nbsp;Preparing
                for the Build
              </h1>
            </div>
          </div>
        </div>
        <div class="chapter" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title">
                  <a id="chapter-getting-materials" name=
                  "chapter-getting-materials"></a>Chapter&nbsp;2.&nbsp;Build
                  Directory, Packages, and Patches
                </h2>
              </div>
            </div>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-materials-introduction" name=
                    "ch-materials-introduction"></a>2.1.&nbsp;Introduction
                  </h2>
                </div>
              </div>
            </div>
            <p>
              This chapter creates a directory where the cross compiler
              toolchain wil be built and a directory where sources are kept.
              It includes a list of packages that need to be downloaded for
              building a basic Linux system.
            </p>
            <p>
              The listed version numbers correspond to versions of the
              software that are known to work, and this book is based on
              their use. We highly recommend not using newer or older
              versions because the build commands for one version may not
              work with another version.
            </p>
            <p>
              Download locations may not always be accessible. If a download
              location has changed since this book was published, Google
              (<a class="ulink" href=
              "http://www.google.com/">http://www.google.com/</a>) provides a
              useful search engine for most packages.
            </p>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-materials-creatingbuilddir" name=
                    "ch-materials-creatingbuilddir"></a>2.2.&nbsp;Creating
                    Build and Sources Directories
                  </h2>
                </div>
              </div>
            </div>
            <p>
              Create a directory for the CLFS build. The exact location is up
              to you but depending on the location you choose, you may need
              to do this as the root user:
            </p>
            <pre class="userinput"><kbd class=
            "command">sudo mkdir -p /mnt/clfs</kbd></pre>
            <p>
              Assign it to the <code class="envar">CLFS</code> environment
              variable:
            </p>
            <pre class="userinput"><kbd class=
            "command">export CLFS=/mnt/clfs</kbd></pre>
            <p>
              Ensure that this new directory has permissions that are not too
              restrictive such that you can write to it as a non-root user.
              Depending on the location of the <code class=
              "envar">CLFS</code> directory, you may need to do this as the
              root user:
            </p>
            <pre class="userinput"><kbd class=
            "command">sudo chmod 777 ${CLFS}</kbd></pre>
            <p>
              Downloaded packages and patches will need to be stored
              somewhere that is conveniently available throughout the entire
              build. A working directory is also required to unpack the
              sources and build them. <code class=
              "filename">${CLFS}/sources</code> can be used both as the place
              to store the tarballs and patches and as a working directory.
            </p>
            <p>
              Create a directory to store the sources:
            </p>
            <pre class="userinput"><kbd class=
            "command">mkdir -v ${CLFS}/sources</kbd></pre>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-materials-packages-common" name=
                    "ch-materials-packages-common"></a>2.3.&nbsp;All Packages
                  </h2>
                </div>
              </div>
            </div>
            <p>
              Download or otherwise obtain the following packages:
            </p>
            <div class="materials">
              <div class="variablelist">
                <dl>
                  <dt>
                    <span class="term">Binutils (2.42) - <span class=
                    "token">26922 KB</span>:</span>
                  </dt>
                  <dd>
                    <p>
                      Home page: <a class="ulink" href=
                      "http://www.gnu.org/software/binutils/">http://www.gnu.org/software/binutils/</a>
                    </p>
                    <p>
                      Download: <a class="ulink" href=
                      "http://ftp.gnu.org/gnu/binutils/binutils-2.42.tar.xz">http://ftp.gnu.org/gnu/binutils/binutils-2.42.tar.xz</a>
                    </p>
                    <p>
                      MD5 sum: <code class=
                      "literal">a075178a9646551379bfb64040487715</code>
                    </p>
                  </dd>
                  <dt>
                    <span class="term">BusyBox (1.36.1) - <span class=
                    "token">2466 KB</span>:</span>
                  </dt>
                  <dd>
                    <p>
                      Home page: <a class="ulink" href=
                      "http://www.busybox.net">http://www.busybox.net</a>
                    </p>
                    <p>
                      Download: <a class="ulink" href=
                      "http://busybox.net/downloads/busybox-1.36.1.tar.bz2">http://busybox.net/downloads/busybox-1.36.1.tar.bz2</a>
                    </p>
                    <p>
                      MD5 sum: <code class=
                      "literal">0fc591bc9f4e365dfd9ade0014f32561</code>
                    </p>
                  </dd>
                  <dt>
                    <span class="term">CLFS-Bootscripts (git master HEAD) -
                    <span class="token">3 KB</span>:</span>
                  </dt>
                  <dd>
                    <p>
                      Home page: <a class="ulink" href=
                      "https://github.com/cross-lfs/bootscripts-embedded">https://github.com/cross-lfs/bootscripts-embedded</a>
                    </p>
                    <p>
                      Download: <a class="ulink" href=
                      "https://github.com/cross-lfs/bootscripts-embedded/archive/master.tar.gz">
                      https://github.com/cross-lfs/bootscripts-embedded/archive/master.tar.gz</a>
                    </p>
                    <p>
                      MD5 sum: <code class="literal">N/A</code>
                    </p>
                  </dd>
                  <dt>
                    <span class="term">GCC (13.2.0) - <span class=
                    "token">85800 KB</span>:</span>
                  </dt>
                  <dd>
                    <p>
                      Home page: <a class="ulink" href=
                      "http://gcc.gnu.org">http://gcc.gnu.org</a>
                    </p>
                    <p>
                      Download: <a class="ulink" href=
                      "http://gcc.gnu.org/pub/gcc/releases/gcc-13.2.0/gcc-13.2.0.tar.xz">
                      http://gcc.gnu.org/pub/gcc/releases/gcc-13.2.0/gcc-13.2.0.tar.xz</a>
                    </p>
                    <p>
                      MD5 sum: <code class=
                      "literal">e0e48554cc6e4f261d55ddee9ab69075</code>
                    </p>
                  </dd>
                  <dt>
                    <span class="term">GMP (6.3.0) - <span class="token">2046
                    KB</span>:</span>
                  </dt>
                  <dd>
                    <p>
                      Home page: <a class="ulink" href=
                      "https://www.gnu.org/software/gmp/">https://www.gnu.org/software/gmp/</a>
                    </p>
                    <p>
                      Download: <a class="ulink" href=
                      "http://ftp.gnu.org/gnu/gmp/gmp-6.3.0.tar.xz">http://ftp.gnu.org/gnu/gmp/gmp-6.3.0.tar.xz</a>
                    </p>
                    <p>
                      MD5 sum: <code class=
                      "literal">956dc04e864001a9c22429f761f2c283</code>
                    </p>
                  </dd>
                  <dt>
                    <span class="term">iana-etc (20240125) - <span class=
                    "token">200 KB</span>:</span>
                  </dt>
                  <dd>
                    <p>
                      Home page: <a class="ulink" href=
                      "https://www.iana.org/protocols">https://www.iana.org/protocols</a>
                    </p>
                    <p>
                      Download: <a class="ulink" href=
                      "https://github.com/Mic92/iana-etc/releases/download/20240125/iana-etc-20240125.tar.gz">
                      https://github.com/Mic92/iana-etc/releases/download/20240125/iana-etc-20240125.tar.gz</a>
                    </p>
                    <p>
                      MD5 sum: <code class=
                      "literal">aed66d04de615d76c70890233081e584</code>
                    </p>
                  </dd>
                  <dt>
                    <span class="term">Linux (6.7.4) - <span class=
                    "token">138130 KB</span>:</span>
                  </dt>
                  <dd>
                    <p>
                      Home page: <a class="ulink" href=
                      "http://www.kernel.org">http://www.kernel.org</a>
                    </p>
                    <p>
                      Download: <a class="ulink" href=
                      "http://www.kernel.org/pub/linux/kernel/v6.x/linux-6.7.4.tar.xz">
                      http://www.kernel.org/pub/linux/kernel/v6.x/linux-6.7.4.tar.xz</a>
                    </p>
                    <p>
                      MD5 sum: <code class=
                      "literal">370e1b6155ae63133380e421146619e0</code>
                    </p>
                  </dd>
                  <dt>
                    <span class="term">MPC (1.3.1) - <span class="token">655
                    KB</span>:</span>
                  </dt>
                  <dd>
                    <p>
                      Home page: <a class="ulink" href=
                      "http://www.multiprecision.org/">http://www.multiprecision.org/</a>
                    </p>
                    <p>
                      Download: <a class="ulink" href=
                      "http://ftp.gnu.org/gnu/mpc/mpc-1.3.1.tar.gz">http://ftp.gnu.org/gnu/mpc/mpc-1.3.1.tar.gz</a>
                    </p>
                    <p>
                      MD5 sum: <code class=
                      "literal">5c9bc658c9fd0f940e8e3e0f09530c62</code>
                    </p>
                  </dd>
                  <dt>
                    <span class="term">MPFR (4.2.1) - <span class=
                    "token">1459 KB</span>:</span>
                  </dt>
                  <dd>
                    <p>
                      Home page: <a class="ulink" href=
                      "http://www.mpfr.org/">http://www.mpfr.org/</a>
                    </p>
                    <p>
                      Download: <a class="ulink" href=
                      "http://ftp.gnu.org/gnu/mpfr/mpfr-4.2.1.tar.xz">http://ftp.gnu.org/gnu/mpfr/mpfr-4.2.1.tar.xz</a>
                    </p>
                    <p>
                      MD5 sum: <code class=
                      "literal">523c50c6318dde6f9dc523bc0244690a</code>
                    </p>
                  </dd>
                  <dt>
                    <span class="term">musl (1.2.5) - <span class=
                    "token">1055 KB</span>:</span>
                  </dt>
                  <dd>
                    <p>
                      Home page: <a class="ulink" href=
                      "https://musl.libc.org/">https://musl.libc.org/</a>
                    </p>
                    <p>
                      Download: <a class="ulink" href=
                      "https://musl.libc.org/releases/musl-1.2.5.tar.gz">https://musl.libc.org/releases/musl-1.2.5.tar.gz</a>
                    </p>
                    <p>
                      MD5 sum: <code class=
                      "literal">ac5cfde7718d0547e224247ccfe59f18</code>
                    </p>
                  </dd>
                </dl>
              </div>
            </div>
            <p>
              Total size of these packages: about 253 MB
            </p>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-materials-patches-common" name=
                    "ch-materials-patches-common"></a>2.4.&nbsp;Needed
                    Patches
                  </h2>
                </div>
              </div>
            </div>
            <p>
              In addition to the packages, several patches are also required.
              These patches correct any mistakes in the packages that should
              be fixed by the maintainer. The patches also make small
              modifications to make the packages easier to work with. The
              following patches will be needed to build a CLFS system:
            </p>
            <p>
              <span class="strong"><strong>There aren't any patches to
              download at this time.</strong></span>
            </p>
            <p>
              Total size of these patches: about 0 KB
            </p>
          </div>
        </div>
        <div class="chapter" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title">
                  <a id="chapter-final-preps" name=
                  "chapter-final-preps"></a>Chapter&nbsp;3.&nbsp;Final
                  Preparations
                </h2>
              </div>
            </div>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-final-preps-aboutlfs" name=
                    "ch-final-preps-aboutlfs"></a>3.1.&nbsp;About $CLFS
                  </h2>
                </div>
              </div>
            </div>
            <p>
              Throughout this book, the environment variable <code class=
              "envar">CLFS</code> will be used several times. It is paramount
              that this variable is always defined. It should be set to the
              mount point chosen for the CLFS partition. Check that the
              <code class="envar">CLFS</code> variable is set up properly
              with:
            </p>
            <pre class="userinput"><kbd class=
            "command">echo ${CLFS}</kbd></pre>
            <p>
              Make sure the output shows the path to the CLFS partition's
              mount point, which is <code class="filename">/mnt/clfs</code>
              if the provided example was followed. If the output is
              incorrect, the variable can be set with:
            </p>
            <pre class="userinput"><kbd class=
            "command">export CLFS=/mnt/clfs</kbd></pre>
            <p>
              Having this variable set is beneficial in that commands such as
              <span class="command"><strong>install -d
              ${CLFS}/tools</strong></span> can be typed literally. The shell
              will automatically replace &ldquo;<span class=
              "quote">${CLFS}</span>&rdquo; with &ldquo;<span class=
              "quote">/mnt/clfs</span>&rdquo; (or whatever the variable was
              set to) when it processes the command line.
            </p>
            <p>
              Do not forget to check that <code class="envar">${CLFS}</code>
              is set whenever you leave and reenter the current working
              environment (as when doing a &ldquo;<span class=
              "quote">su</span>&rdquo; to <code class=
              "systemitem">root</code> or another user).
            </p>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-final-preps-addinguser" name=
                    "ch-final-preps-addinguser"></a>3.2.&nbsp;Adding the CLFS
                    User
                  </h2>
                </div>
              </div>
            </div>
            <p>
              When logged in as user <code class="systemitem">root</code>,
              making a single mistake can damage or destroy a system.
              Therefore, we recommend building the packages as an
              unprivileged user. You could use your own user name, but to
              make it easier to set up a clean work environment, create a new
              user called <code class="systemitem">clfs</code> as a member of
              a new group (also named <code class="systemitem">clfs</code>)
              and use this user during the installation process. You may need
              to do this as the root user:
            </p>
            <pre class="userinput"><kbd class="command">sudo groupadd clfs
sudo useradd -s /bin/bash -g clfs -m -k /dev/null clfs</kbd></pre>
            <div class="variablelist">
              <p class="title">
                <b>The meaning of the command line options:</b>
              </p>
              <dl>
                <dt>
                  <span class="term"><em class="parameter"><code>-s
                  /bin/bash</code></em></span>
                </dt>
                <dd>
                  <p>
                    This makes <span class=
                    "command"><strong>bash</strong></span> the default shell
                    for user <code class="systemitem">clfs</code>.
                  </p>
                </dd>
                <dt>
                  <span class="term"><em class="parameter"><code>-g
                  clfs</code></em></span>
                </dt>
                <dd>
                  <p>
                    This option adds user <code class=
                    "systemitem">clfs</code> to group <code class=
                    "systemitem">clfs</code>.
                  </p>
                </dd>
                <dt>
                  <span class="term"><em class=
                  "parameter"><code>-m</code></em></span>
                </dt>
                <dd>
                  <p>
                    This creates a home directory for <code class=
                    "systemitem">clfs</code>.
                  </p>
                </dd>
                <dt>
                  <span class="term"><em class="parameter"><code>-k
                  /dev/null</code></em></span>
                </dt>
                <dd>
                  <p>
                    This parameter prevents possible copying of files from a
                    skeleton directory (default is <code class=
                    "filename">/etc/skel</code>) by changing the input
                    location to the special null device.
                  </p>
                </dd>
                <dt>
                  <span class="term"><em class=
                  "parameter"><code>clfs</code></em></span>
                </dt>
                <dd>
                  <p>
                    This is the actual name for the created group and user.
                  </p>
                </dd>
              </dl>
            </div>
            <p>
              To log in as <code class="systemitem">clfs</code> (as opposed
              to switching to user <code class="systemitem">clfs</code> when
              logged in as <code class="systemitem">root</code>, which does
              not require the <code class="systemitem">clfs</code> user to
              have a password), give <code class="systemitem">clfs</code> a
              password. You may need to do this as the root user:
            </p>
            <pre class="userinput"><kbd class=
            "command">sudo passwd clfs</kbd></pre>
            <p>
              Grant <code class="systemitem">clfs</code> full access to
              <code class="filename">${CLFS}</code> by making <code class=
              "systemitem">clfs</code> the directory's owner. You may need to
              do this as the root user:
            </p>
            <pre class="userinput"><kbd class=
            "command">sudo chown -Rv clfs ${CLFS}</kbd></pre>
            <p>
              Next, login as user <code class="systemitem">clfs</code>. This
              can be done via a virtual console, through a display manager,
              or with the following substitute user command:
            </p>
            <pre class="userinput"><kbd class="command">su - clfs</kbd></pre>
            <p>
              The &ldquo;<span class="quote"><em class=
              "parameter"><code>-</code></em></span>&rdquo; instructs
              <span class="command"><strong>su</strong></span> to start a
              login shell as opposed to a non-login shell. The difference
              between these two types of shells can be found in detail in
              <code class="filename">bash(1)</code> and <span class=
              "command"><strong>info bash</strong></span>.
            </p>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-final-preps-settingenviron" name=
                    "ch-final-preps-settingenviron"></a>3.3.&nbsp;Setting Up
                    the Environment
                  </h2>
                </div>
              </div>
            </div>
            <p>
              Set up a good working environment by creating two new startup
              files for the <span class=
              "command"><strong>bash</strong></span> shell. While logged in
              as user <code class="systemitem">clfs</code>, issue the
              following command to create a new <code class=
              "filename">.bash_profile</code>:
            </p>
            <pre class="userinput"><kbd class=
            "command">cat &gt; ~/.bash_profile &lt;&lt; "EOF"
<code class=
"literal">exec env -i HOME=${HOME} TERM=${TERM} PS1='\u:\w\$ ' /bin/bash</code>
EOF</kbd></pre>
            <p>
              When logged on as user <code class="systemitem">clfs</code>,
              the initial shell is usually a <span class=
              "emphasis"><em>login</em></span> shell which reads the
              <code class="filename">/etc/profile</code> of the host
              (probably containing some settings and environment variables)
              and then <code class="filename">.bash_profile</code>. The
              <span class="command"><strong>exec env
              -i.../bin/bash</strong></span> command in the <code class=
              "filename">.bash_profile</code> file replaces the running shell
              with a new one with a completely empty environment, except for
              the <code class="envar">HOME</code>, <code class=
              "envar">TERM</code>, and <code class="envar">PS1</code>
              variables. This ensures that no unwanted and potentially
              hazardous environment variables from the host system leak into
              the build environment. The technique used here achieves the
              goal of ensuring a clean environment.
            </p>
            <p>
              The new instance of the shell is a <span class=
              "emphasis"><em>non-login</em></span> shell, which does not read
              the <code class="filename">/etc/profile</code> or <code class=
              "filename">.bash_profile</code> files, but rather reads the
              <code class="filename">.bashrc</code> file instead. Create the
              <code class="filename">.bashrc</code> file now:
            </p>
            <pre class="userinput"><kbd class=
            "command">cat &gt; ~/.bashrc &lt;&lt; "EOF"
<code class="literal">set +h
umask 022
CLFS=/mnt/clfs
LC_ALL=POSIX
PATH=${CLFS}/cross-tools/bin:/bin:/usr/bin
export CLFS LC_ALL PATH</code>
EOF</kbd></pre>
            <p>
              The <span class="command"><strong>set +h</strong></span>
              command turns off <span class=
              "command"><strong>bash</strong></span>'s hash function. Hashing
              is ordinarily a useful feature&mdash;<span class=
              "command"><strong>bash</strong></span> uses a hash table to
              remember the full path of executable files to avoid searching
              the <code class="envar">PATH</code> time and again to find the
              same executable. However, the new tools should be used as soon
              as they are installed. By switching off the hash function, the
              shell will always search the <code class="envar">PATH</code>
              when a program is to be run. As such, the shell will find the
              newly compiled tools in <code class=
              "filename">${CLFS}/cross-tools</code> as soon as they are
              available without remembering a previous version of the same
              program in a different location.
            </p>
            <p>
              Setting the user file-creation mask (umask) to 022 ensures that
              newly created files and directories are only writable by their
              owner, but are readable and executable by anyone (assuming
              default modes are used by the open(2) system call, new files
              will end up with permission mode 644 and directories with mode
              755).
            </p>
            <p>
              The <code class="envar">CLFS</code> variable should be set to
              the chosen mount point.
            </p>
            <p>
              The <code class="envar">LC_ALL</code> variable controls the
              localization of certain programs, making their messages follow
              the conventions of a specified country. If the host system uses
              a version of Glibc older than 2.2.4, having <code class=
              "envar">LC_ALL</code> set to something other than
              &ldquo;<span class="quote">POSIX</span>&rdquo; or
              &ldquo;<span class="quote">C</span>&rdquo; (during this
              chapter) may cause issues.
            </p>
            <p>
              By putting <code class=
              "filename">${CLFS}/cross-tools/bin</code> at the beginning of
              the <code class="envar">PATH</code>, the cross-compiler built
              in <a class="xref" href="#chapter-cross-tools" title=
              "Chapter&nbsp;4.&nbsp;Constructing Cross-Compile Tools">Constructing
              Cross-Compile Tools</a> will be picked up by the build process
              for the temp-system packages before anything that may be
              installed on the host. This, combined with turning off hashing,
              helps to ensure that you will be using the cross-compile tools
              to build the temp-system in /tools.
            </p>
            <p>
              Finally, to have the environment fully prepared for building
              the temporary tools, source the just-created user profile:
            </p>
            <pre class="userinput"><kbd class=
            "command">source ~/.bash_profile</kbd></pre>
          </div>
        </div>
      </div>
      <div class="part" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h1 class="title">
                <a id="part3" name="part3"></a>Part&nbsp;III.&nbsp;Make the
                Cross-Compile Tools
              </h1>
            </div>
          </div>
        </div>
        <div class="chapter" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title">
                  <a id="chapter-cross-tools" name=
                  "chapter-cross-tools"></a>Chapter&nbsp;4.&nbsp;Constructing
                  Cross-Compile Tools
                </h2>
              </div>
            </div>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-cross-tools-introduction" name=
                    "ch-cross-tools-introduction"></a>4.1.&nbsp;Introduction
                  </h2>
                </div>
              </div>
            </div>
            <p>
              This chapter shows you how to create cross platform tools.
            </p>
            <p>
              If for some reason you have to stop and come back later,
              remember to use the <span class="command"><strong>su -
              clfs</strong></span> command, and it will setup the build
              environment that you left.
            </p>
            <div class="sect2" lang="en" xml:lang="en">
              <h3 class="sect2">
                4.1.1. Common Notes
              </h3>
              <div class="admon important">
                <h3>
                  Important
                </h3>
                <p>
                  Before issuing the build instructions for a package, the
                  package should be unpacked as user <code class=
                  "systemitem">clfs</code>, and a <span class=
                  "command"><strong>cd</strong></span> into the created
                  directory should be performed. The build instructions
                  assume that the <span class=
                  "command"><strong>bash</strong></span> shell is in use.
                </p>
              </div>
              <p>
                Several of the packages are patched before compilation, but
                only when the patch is needed to circumvent a problem or
                supply a default configuration. Warning messages about
                <span class="emphasis"><em>offset</em></span> or <span class=
                "emphasis"><em>fuzz</em></span> may also be encountered when
                applying a patch. Do not worry about these warnings, as the
                patch was still successfully applied.
              </p>
              <p>
                During the compilation of most packages, there will be
                several warnings that scroll by on the screen. These are
                normal and can safely be ignored. These warnings are as they
                appear&mdash;warnings about deprecated, but not invalid, use
                of the C or C++ syntax. C standards change fairly often, and
                some packages still use the older standard. This is not a
                problem, but does prompt the warning.
              </p>
              <div class="admon important">
                <h3>
                  Important
                </h3>
                <p>
                  After installing each package, both in this and the next
                  chapters, delete its source and build directories, unless
                  specifically instructed otherwise.
                </p>
              </div>
            </div>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-cross-tools-cflags" name=
                    "ch-cross-tools-cflags"></a>4.2.&nbsp;Build CFLAGS
                  </h2>
                </div>
              </div>
            </div>
            <p>
              <code class="envar">CFLAGS</code> must not be set during the
              building of cross-tools.
            </p>
            <p>
              To disable <code class="envar">CFLAGS</code> use the following
              commands:
            </p>
            <pre class="userinput"><kbd class="command">unset CFLAGS
echo unset CFLAGS &gt;&gt; ~/.bashrc</kbd></pre>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-cross-tools-variables" name=
                    "ch-cross-tools-variables"></a>4.3.&nbsp;Build Variables
                  </h2>
                </div>
              </div>
            </div>
            <h5>
              <a id="idm1047" name="idm1047"></a>Setting Host and Target
            </h5>
            <p>
              During the building of the cross-compile tools you will need to
              set a few variables that will be dependent on your particular
              needs. You will need to set the target triplet for the target
              architecture, and the CPU type. If you do not know what triplet
              or CPU type you want, you can use the table as a reference. Set
              the command using the method listed below:
            </p>
            <pre class="userinput"><kbd class=
            "command">export CLFS_HOST=$(echo ${MACHTYPE} | sed "s/-[^-]*/-cross/")
export CLFS_TARGET=<em class="replaceable"><code>[target triplet]</code></em>
export CLFS_CPU=<em class=
"replaceable"><code>[cpu type]</code></em></kbd></pre>
            <div class="table">
              <a id="idm1053" name="idm1053"></a>
              <p class="title">
                <b>Table&nbsp;4.1.&nbsp;Processor Type and Target
                Triplets</b>
              </p>
              <div class="table-contents">
                <table summary="Processor Type and Target Triplets" border=
                "1">
                  <colgroup>
                    <col />
                    <col />
                    <col />
                    <col />
                  </colgroup>
                  <thead>
                    <tr>
                      <th>
                        Processor
                      </th>
                      <th>
                        Target Triplet
                      </th>
                      <th>
                        CPU Type
                      </th>
                      <th>
                        Note
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        486 Compatibles
                      </td>
                      <td>
                        i486-linux-musl
                      </td>
                      <td>
                        i486
                      </td>
                      <td>
                        Intel's i486
                      </td>
                    </tr>
                    <tr>
                      <td>
                        Pentium, K6, 586 Compatibles
                      </td>
                      <td>
                        i586-linux-musl
                      </td>
                      <td>
                        i586
                      </td>
                      <td>
                        Intel Pentium without MMX
                      </td>
                    </tr>
                    <tr>
                      <td>
                        Pentium II, Pentium III, Pentium 4
                      </td>
                      <td>
                        i686-linux-musl
                      </td>
                      <td>
                        i686
                      </td>
                      <td>
                        PentiumPro instruction set
                      </td>
                    </tr>
                    <tr>
                      <td>
                        Athlon
                      </td>
                      <td>
                        i686-linux-musl
                      </td>
                      <td>
                        athlon
                      </td>
                      <td>
                        AMD 32 bit Athlon
                      </td>
                    </tr>
                    <tr>
                      <td>
                        Opteron
                      </td>
                      <td>
                        x86_64-linux-musl
                      </td>
                      <td>
                        k8
                      </td>
                      <td>
                        AMD K8 processors with x86-64
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div><br class="table-break" />
            <p>
              Now set the architecture of the CPU:
            </p>
            <pre class="userinput"><kbd class=
            "command">export CLFS_ARCH="x86"</kbd></pre>
            <p>
              Now we will add this to <code class=
              "filename">~/.bashrc</code>, just in case you have to exit and
              restart building later:
            </p>
            <pre class="userinput"><kbd class=
            "command">echo export CLFS_HOST=\""${CLFS_HOST}\"" &gt;&gt; ~/.bashrc
echo export CLFS_TARGET=\""${CLFS_TARGET}\"" &gt;&gt; ~/.bashrc
echo export CLFS_ARCH=\""${CLFS_ARCH}\"" &gt;&gt; ~/.bashrc
echo export CLFS_CPU=\""${CLFS_CPU}\"" &gt;&gt; ~/.bashrc</kbd></pre>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-cross-tools-sysroot" name=
                    "ch-cross-tools-sysroot"></a>4.4.&nbsp;Create the Cross
                    Tools Sysroot Directory
                  </h2>
                </div>
              </div>
            </div>
            <p>
              Create a sysroot directory which will be used when building the
              cross compiler and link its <code class="filename">usr</code>
              directory to itself such that everything installs to the
              sysroot:
            </p>
            <pre class="userinput"><kbd class=
            "command">mkdir -p ${CLFS}/cross-tools/${CLFS_TARGET}
ln -sfv . ${CLFS}/cross-tools/${CLFS_TARGET}/usr</kbd></pre>
          </div>
          <div class="wrap" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-cross-tools-linux-headers" name=
                    "ch-cross-tools-linux-headers"></a>4.5.&nbsp;Linux-Headers-6.7.4
                  </h2>
                </div>
              </div>
            </div>
            <div class="package" lang="en" xml:lang="en">
              <p>
                The Linux Kernel contains a make target that installs
                &ldquo;<span class="quote">sanitized</span>&rdquo; kernel
                headers.
              </p>
            </div>
            <div class="installation" lang="en" xml:lang="en">
              <h3 class="sect2">
                4.5.1. Installation of Linux Headers
              </h3>
              <p>
                For this step you will need the kernel tarball.
              </p>
              <p>
                Install the header files that are common to all
                architectures:
              </p>
              <pre class="userinput"><kbd class="command">make mrproper
make ARCH=${CLFS_ARCH} headers
find usr/include -type f ! -name '*.h' -delete
cp -rv usr/include ${CLFS}/cross-tools/${CLFS_TARGET}</kbd></pre>
            </div>
            <div class="content" lang="en" xml:lang="en">
              <h3 class="sect2">
                <a id="contents-linux-headers" name=
                "contents-linux-headers"></a>4.5.2. Contents of Linux-Headers
              </h3>
              <div class="segmentedlist">
                <div class="seglistitem">
                  <div class="seg">
                    <strong class="segtitle">Installed headers:</strong>
                    <span class=
                    "segbody">${CLFS}/cross-tools/${CLFS_TARGET}/include/{asm,asm-generic,drm,linux,mtd,rdma,scsi,sound,video,xen}/*.h</span>
                  </div>
                </div>
              </div>
              <div class="variablelist">
                <h4>
                  <a id="idm1126" name="idm1126"></a>Short Descriptions
                </h4>
                <table border="0">
                  <col align="left" valign="top" />
                  <tbody>
                    <tr>
                      <td>
                        <p>
                          <a id="linux-headers" name=
                          "linux-headers"></a><span class="term"><code class=
                          "filename">${CLFS}/cross-tools/${CLFS_TARGET}/include/{asm,asm-generic,drm,linux,mtd,rdma,scsi,sound,video,xen}/*.h</code></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          The Linux API headers
                        </p>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <div class="wrap" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-cross-tools-binutils" name=
                    "ch-cross-tools-binutils"></a>4.6.&nbsp;Binutils-2.42
                  </h2>
                </div>
              </div>
            </div>
            <div class="package" lang="en" xml:lang="en">
              <p>
                The Binutils package contains a linker, an assembler, and
                other tools for handling object files.
              </p>
            </div>
            <div class="installation" lang="en" xml:lang="en">
              <h3 class="sect2">
                4.6.1. Installation of Cross Binutils
              </h3>
              <p>
                It is important that Binutils be the first package compiled
                because both the C library and GCC perform various tests on
                the available linker and assembler to determine which of
                their own features to enable.
              </p>
              <p>
                The Binutils documentation recommends building Binutils
                outside of the source directory in a dedicated build
                directory:
              </p>
              <pre class="userinput"><kbd class=
              "command">mkdir -v ../binutils-build
cd ../binutils-build</kbd></pre>
              <p>
                Prepare Binutils for compilation:
              </p>
              <pre class="userinput"><kbd class=
              "command">../binutils-2.42/configure \
   --prefix=${CLFS}/cross-tools \
   --target=${CLFS_TARGET} \
   --with-sysroot=${CLFS}/cross-tools/${CLFS_TARGET} \
   --disable-nls \
   --enable-gprofng=no \
   --disable-multilib</kbd></pre>
              <div class="variablelist">
                <p class="title">
                  <b>The meaning of the configure options:</b>
                </p>
                <dl>
                  <dt>
                    <span class="term"><em class=
                    "parameter"><code>--prefix=${CLFS}/cross-tools</code></em></span>
                  </dt>
                  <dd>
                    <p>
                      This tells the configure script to prepare to install
                      the package in the <code class=
                      "filename">${CLFS}/cross-tools</code> directory.
                    </p>
                  </dd>
                  <dt>
                    <span class="term"><em class=
                    "parameter"><code>--target=${CLFS_TARGET}</code></em></span>
                  </dt>
                  <dd>
                    <p>
                      This creates a cross-architecture executable that
                      creates files for ${CLFS_TARGET} but runs on the host
                      system.
                    </p>
                  </dd>
                  <dt>
                    <span class="term"><em class=
                    "parameter"><code>--with-sysroot=${CLFS}/cross-tools/${CLFS_TARGET}</code></em></span>
                  </dt>
                  <dd>
                    <p>
                      This tells configure that ${CLFS} is going to be the
                      root of our system. It will now use the specified
                      sysroot, ${CLFS}, as a prefix of the default search
                      paths.
                    </p>
                  </dd>
                  <dt>
                    <span class="term"><em class=
                    "parameter"><code>--disable-nls</code></em></span>
                  </dt>
                  <dd>
                    <p>
                      This disables internationalization as i18n is not
                      needed for the cross-compile tools.
                    </p>
                  </dd>
                  <dt>
                    <span class="term"><em class=
                    "parameter"><code>--disable-multilib</code></em></span>
                  </dt>
                  <dd>
                    <p>
                      This option disables the building of a multilib capable
                      binutils.
                    </p>
                  </dd>
                </dl>
              </div>
              <p>
                Compile the package:
              </p>
              <pre class="userinput"><kbd class="command">make configure-host
make</kbd></pre>
              <div class="variablelist">
                <p class="title">
                  <b>The meaning of the make options:</b>
                </p>
                <dl>
                  <dt>
                    <span class="term"><em class=
                    "parameter"><code>configure-host</code></em></span>
                  </dt>
                  <dd>
                    <p>
                      This checks the host environment and makes sure all the
                      necessary tools are available to compile Binutils.
                    </p>
                  </dd>
                </dl>
              </div>
              <p>
                Install the package:
              </p>
              <pre class="userinput"><kbd class=
              "command">make install</kbd></pre>
            </div>
            <div class="content" lang="en" xml:lang="en">
              <h3 class="sect2">
                <a id="contents-binutils" name="contents-binutils"></a>4.6.2.
                Contents of Binutils
              </h3>
              <div class="segmentedlist">
                <div class="seglistitem">
                  <div class="seg">
                    <strong class="segtitle">Installed programs:</strong>
                    <span class="segbody">addr2line, ar, as, c++filt,
                    elfedit, gprof, ld, nm, objcopy, objdump, ranlib,
                    readelf, size, strings, and strip</span>
                  </div>
                  <div class="seg">
                    <strong class="segtitle">Installed libraries:</strong>
                    <span class="segbody">libiberty.a, libbfd.[a,so], and
                    libopcodes.[a,so]</span>
                  </div>
                </div>
              </div>
              <div class="variablelist">
                <h4>
                  <a id="idm1201" name="idm1201"></a>Short Descriptions
                </h4>
                <table border="0">
                  <col align="left" valign="top" />
                  <tbody>
                    <tr>
                      <td>
                        <p>
                          <a id="addr2line" name="addr2line"></a><span class=
                          "term"><span class=
                          "command"><strong>addr2line</strong></span></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          Translates program addresses to file names and line
                          numbers; given an address and the name of an
                          executable, it uses the debugging information in
                          the executable to determine which source file and
                          line number are associated with the address
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>
                          <a id="ar" name="ar"></a><span class=
                          "term"><span class=
                          "command"><strong>ar</strong></span></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          Creates, modifies, and extracts from archives
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>
                          <a id="as" name="as"></a><span class=
                          "term"><span class=
                          "command"><strong>as</strong></span></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          An assembler that assembles the output of
                          <span class="command"><strong>gcc</strong></span>
                          into object files
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>
                          <a id="c-filt" name="c-filt"></a><span class=
                          "term"><span class=
                          "command"><strong>c++filt</strong></span></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          Used by the linker to de-mangle C++ and Java
                          symbols and to keep overloaded functions from
                          clashing
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>
                          <a id="elfedit" name="elfedit"></a><span class=
                          "term"><span class=
                          "command"><strong>elfedit</strong></span></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          Examine and modify ELF metadata within an ELF
                          object
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>
                          <a id="gprof" name="gprof"></a><span class=
                          "term"><span class=
                          "command"><strong>gprof</strong></span></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          Displays call graph profile data
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>
                          <a id="ld" name="ld"></a><span class=
                          "term"><span class=
                          "command"><strong>ld</strong></span></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          A linker that combines a number of object and
                          archive files into a single file, relocating their
                          data and tying up symbol references
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>
                          <a id="nm" name="nm"></a><span class=
                          "term"><span class=
                          "command"><strong>nm</strong></span></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          Lists the symbols occurring in a given object file
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>
                          <a id="objcopy" name="objcopy"></a><span class=
                          "term"><span class=
                          "command"><strong>objcopy</strong></span></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          Copy the contents of one object file to another
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>
                          <a id="objdump" name="objdump"></a><span class=
                          "term"><span class=
                          "command"><strong>objdump</strong></span></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          Displays information about the given object file,
                          with options controlling the particular information
                          to display; the information shown is useful to
                          programmers who are working on the compilation
                          tools
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>
                          <a id="ranlib" name="ranlib"></a><span class=
                          "term"><span class=
                          "command"><strong>ranlib</strong></span></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          Generates an index of the contents of an archive
                          and stores it in the archive; the index lists all
                          of the symbols defined by archive members that are
                          relocatable object files
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>
                          <a id="readelf" name="readelf"></a><span class=
                          "term"><span class=
                          "command"><strong>readelf</strong></span></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          Displays information about ELF type binaries
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>
                          <a id="size" name="size"></a><span class=
                          "term"><span class=
                          "command"><strong>size</strong></span></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          Lists the section sizes and the total size for the
                          given object files
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>
                          <a id="strings" name="strings"></a><span class=
                          "term"><span class=
                          "command"><strong>strings</strong></span></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          Outputs, for each given file, the sequences of
                          printable characters that are of at least the
                          specified length (defaulting to four); for object
                          files, it prints, by default, only the strings from
                          the initializing and loading sections while for
                          other types of files, it scans the entire file
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>
                          <a id="strip" name="strip"></a><span class=
                          "term"><span class=
                          "command"><strong>strip</strong></span></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          Discards symbols from object files
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>
                          <a id="libiberty" name="libiberty"></a><span class=
                          "term"><code class=
                          "filename">libiberty</code></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          Contains routines used by various GNU programs,
                          including <span class=
                          "command"><strong>getopt</strong></span>,
                          <span class=
                          "command"><strong>obstack</strong></span>,
                          <span class=
                          "command"><strong>strerror</strong></span>,
                          <span class=
                          "command"><strong>strtol</strong></span>, and
                          <span class=
                          "command"><strong>strtoul</strong></span>
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>
                          <a id="libbfd" name="libbfd"></a><span class=
                          "term"><code class="filename">libbfd</code></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          The Binary File Descriptor library
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>
                          <a id="libopcodes" name=
                          "libopcodes"></a><span class="term"><code class=
                          "filename">libopcodes</code></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          A library for dealing with opcodes&mdash;the
                          &ldquo;<span class="quote">readable
                          text</span>&rdquo; versions of instructions for the
                          processor; it is used for building utilities like
                          <span class=
                          "command"><strong>objdump</strong></span>.
                        </p>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <div class="wrap" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-cross-tools-gcc-static" name=
                    "ch-cross-tools-gcc-static"></a>4.7.&nbsp;GCC-13.2.0 -
                    Static
                  </h2>
                </div>
              </div>
            </div>
            <div class="package" lang="en" xml:lang="en">
              <p>
                The GCC package contains the GNU compiler collection, which
                includes the C compiler. This build of GCC is mainly done so
                that the C library can be built next.
              </p>
            </div>
            <div class="installation" lang="en" xml:lang="en">
              <h3 class="sect2">
                4.7.1. Installation of Cross GCC Compiler with Static libgcc
                and no Threads
              </h3>
              <p>
                GCC requires the GMP, MPFR, and MPC packages to either be
                present on the host or to be present in source form within
                the gcc source tree. Unpack these into the GCC directory
                after unpacking GCC:
              </p>
              <pre class="userinput"><kbd class=
              "command">tar xf ../mpfr-4.2.1.tar.bz2
mv -v mpfr-4.2.1 mpfr
tar xf ../gmp-6.3.0.tar.bz2
mv -v gmp-6.3.0 gmp
tar xf ../mpc-1.3.1.tar.gz
mv -v mpc-1.3.1 mpc</kbd></pre>
              <p>
                The GCC documentation recommends building GCC outside of the
                source directory in a dedicated build directory:
              </p>
              <pre class="userinput"><kbd class=
              "command">mkdir -v ../gcc-build
cd ../gcc-build</kbd></pre>
              <p>
                Prepare GCC for compilation:
              </p>
              <pre class="userinput"><kbd class=
              "command">../gcc-13.2.0/configure \
  --prefix=${CLFS}/cross-tools \
  --build=${CLFS_HOST} \
  --host=${CLFS_HOST} \
  --target=${CLFS_TARGET} \
  --with-sysroot=${CLFS}/cross-tools/${CLFS_TARGET} \
  --disable-nls  \
  --disable-shared \
  --without-headers \
  --with-newlib \
  --disable-decimal-float \
  --disable-libgomp \
  --disable-libmudflap \
  --disable-libssp \
  --disable-libatomic \
  --disable-libquadmath \
  --disable-threads \
  --enable-languages=c \
  --disable-multilib \
  --with-mpfr-include=$(pwd)/../gcc-13.2.0/mpfr/src \
  --with-mpfr-lib=$(pwd)/mpfr/src/.libs \
  --with-arch=${CLFS_CPU}</kbd></pre>
              <div class="variablelist">
                <p class="title">
                  <b>The meaning of the configure options:</b>
                </p>
                <dl>
                  <dt>
                    <span class="term"><em class=
                    "parameter"><code>--prefix=${CLFS}/cross-tools</code></em></span>
                  </dt>
                  <dd>
                    <p>
                      This tells the configure script to prepare to install
                      the package in the <code class=
                      "filename">${CLFS}/cross-tools</code> directory.
                    </p>
                  </dd>
                  <dt>
                    <span class="term"><em class=
                    "parameter"><code>--build=${CLFS_HOST}</code></em></span>
                  </dt>
                  <dd>
                    <p>
                      This tells the configure script the triplet to use to
                      build GCC. It will use ${CLFS_HOST} as that's where
                      it's being built.
                    </p>
                  </dd>
                  <dt>
                    <span class="term"><em class=
                    "parameter"><code>--host=${CLFS_HOST}</code></em></span>
                  </dt>
                  <dd>
                    <p>
                      This tells the configure script the triplet of the
                      machine GCC will be executed on when actually cross
                      compiling. It will use ${CLFS_HOST} as that's where GCC
                      will execute when cross compiling software later.
                    </p>
                  </dd>
                  <dt>
                    <span class="term"><em class=
                    "parameter"><code>--target=${CLFS_TARGET}</code></em></span>
                  </dt>
                  <dd>
                    <p>
                      This tells the configure script the triplet of the
                      machine GCC will build executables for. It will use
                      ${CLFS_TARGET} so that software compiled with this
                      version of GCC can be executed on the embedded machine
                      target.
                    </p>
                  </dd>
                  <dt>
                    <span class="term"><em class=
                    "parameter"><code>--with-sysroot=${CLFS}/cross-tools/${CLFS_TARGET}</code></em></span>
                  </dt>
                  <dd>
                    <p>
                      This tells configure that
                      ${CLFS}/cross-tools/${CLFS_TARGET} is going to be the
                      temporary root of our system. It will now use the
                      specified sysroot as a prefix of the default search
                      paths.
                    </p>
                  </dd>
                  <dt>
                    <span class="term"><em class=
                    "parameter"><code>--disable-nls</code></em></span>
                  </dt>
                  <dd>
                    <p>
                      This disables internationalization as i18n is not
                      needed for the cross-compile tools.
                    </p>
                  </dd>
                  <dt>
                    <span class="term"><em class=
                    "parameter"><code>--disable-shared</code></em></span>
                  </dt>
                  <dd>
                    <p>
                      Disables the creation of the shared libraries.
                    </p>
                  </dd>
                  <dt>
                    <span class="term"><em class=
                    "parameter"><code>--without-headers</code></em></span>
                  </dt>
                  <dd>
                    <p>
                      Tells configure to not use any headers from any C
                      libraries. This is needed as we haven't yet built the C
                      library and to prevent influence from the host
                      environment.
                    </p>
                  </dd>
                  <dt>
                    <span class="term"><em class=
                    "parameter"><code>--with-newlib</code></em></span>
                  </dt>
                  <dd>
                    <p>
                      Tells configure to build libgcc without needing any C
                      libraries.
                    </p>
                  </dd>
                  <dt>
                    <span class="term"><em class=
                    "parameter"><code>--disable-decimal-float</code></em></span>
                  </dt>
                  <dd>
                    <p>
                      Tells configure to disable IEEE 754-2008 decimal
                      floating point support. Decimal floating point support
                      isn't needed yet.
                    </p>
                  </dd>
                  <dt>
                    <span class="term"><em class=
                    "parameter"><code>--disable-libgomp</code></em></span>
                  </dt>
                  <dd>
                    <p>
                      Tells configure to not build the GOMP run-time
                      libraries. GOMP is the GNU implementation of OpenMP, a
                      API for shared-memory parallel programming.
                    </p>
                  </dd>
                  <dt>
                    <span class="term"><em class=
                    "parameter"><code>--disable-libmudflap</code></em></span>
                  </dt>
                  <dd>
                    <p>
                      Tells configure to not build libmudflap. Mudflap is a
                      library that can be used to help check for proper
                      pointer usage.
                    </p>
                  </dd>
                  <dt>
                    <span class="term"><em class=
                    "parameter"><code>--disable-libssp</code></em></span>
                  </dt>
                  <dd>
                    <p>
                      Tells configure not to build run-time libraries for
                      stack smashing detection.
                    </p>
                  </dd>
                  <dt>
                    <span class="term"><em class=
                    "parameter"><code>--disable-libatomic</code></em></span>
                  </dt>
                  <dd>
                    <p>
                      Tells configure not to build atomic operations.
                    </p>
                  </dd>
                  <dt>
                    <span class="term"><em class=
                    "parameter"><code>--disable-libquadmath</code></em></span>
                  </dt>
                  <dd>
                    <p>
                      Tells configure not to build quad math operations.
                    </p>
                  </dd>
                  <dt>
                    <span class="term"><em class=
                    "parameter"><code>--disable-threads</code></em></span>
                  </dt>
                  <dd>
                    <p>
                      This will prevent GCC from looking for the multi-thread
                      include files, since they haven't been created for this
                      architecture yet. GCC will be able to find the
                      multi-thread information after the glibc headers are
                      created.
                    </p>
                  </dd>
                  <dt>
                    <span class="term"><em class=
                    "parameter"><code>--enable-languages=c</code></em></span>
                  </dt>
                  <dd>
                    <p>
                      This option ensures that only the C compiler is built.
                    </p>
                  </dd>
                  <dt>
                    <span class="term"><em class=
                    "parameter"><code>--disable-multilib</code></em></span>
                  </dt>
                  <dd>
                    <p>
                      This option specifies that multiple target libraries
                      should not be built.
                    </p>
                  </dd>
                  <dt>
                    <span class="term"><em class=
                    "parameter"><code>--with-mpfr-include=$(pwd)/../gcc-13.2.0/mpfr/src</code></em></span>
                  </dt>
                  <dd>
                    <p>
                      Tells configure how to find the mpfr headers.
                    </p>
                  </dd>
                  <dt>
                    <span class="term"><em class=
                    "parameter"><code>--with-mpfr-lib=$(pwd)/mpfr/src/.libs</code></em></span>
                  </dt>
                  <dd>
                    <p>
                      Tells configure to use the mpfr libraries built within
                      the GCC build directory. This happens automatically but
                      is needed to prevent GCC from searching the host's
                      normal library paths.
                    </p>
                  </dd>
                </dl>
              </div>
              <div class="variablelist">
                <dl>
                  <dt>
                    <span class="term"><em class=
                    "parameter"><code>--with-arch=${CLFS_CPU}</code></em></span>
                  </dt>
                  <dd>
                    <p>
                      This option configures the cross compiler to only
                      output instructions for our previously selected CPU.
                    </p>
                  </dd>
                </dl>
              </div>
              <p>
                Continue with compiling the package:
              </p>
              <pre class="userinput"><kbd class=
              "command">make all-gcc all-target-libgcc</kbd></pre>
              <p>
                Install the package:
              </p>
              <pre class="userinput"><kbd class=
              "command">make install-gcc install-target-libgcc</kbd></pre>
            </div>
            <div class="content" lang="en" xml:lang="en">
              <p>
                Details on this package are located in <a class="xref" href=
                "#contents-gcc" title=
                "4.9.2.&nbsp;Contents of GCC">Section&nbsp;4.9.2,
                &ldquo;Contents of GCC.&rdquo;</a>
              </p>
            </div>
          </div>
          <div class="wrap" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-cross-tools-libc" name=
                    "ch-cross-tools-libc"></a>4.8.&nbsp;musl-1.2.5
                  </h2>
                </div>
              </div>
            </div>
            <div class="package" lang="en" xml:lang="en">
              <p>
                The musl package contains the main C library. This library
                provides the basic routines for allocating memory, searching
                directories, opening and closing files, reading and writing
                files, string handling, pattern matching, arithmetic, and so
                on.
              </p>
            </div>
            <div class="installation" lang="en" xml:lang="en">
              <h3 class="sect2">
                4.8.1. Installation of musl
              </h3>
              <p>
                Configure the package:
              </p>
              <pre class="userinput"><kbd class="command">./configure \
  CROSS_COMPILE=${CLFS_TARGET}- \
  --prefix=/ \
  --target=${CLFS_TARGET}</kbd></pre>
              <p>
                Compile the package:
              </p>
              <pre class="userinput"><kbd class="command">make</kbd></pre>
              <p>
                Install the package:
              </p>
              <pre class="userinput"><kbd class=
              "command">DESTDIR=${CLFS}/cross-tools/${CLFS_TARGET} make install</kbd></pre>
            </div>
            <div class="content" lang="en" xml:lang="en">
              <h3 class="sect2">
                <a id="contents-musl" name="contents-musl"></a>4.8.2.
                Contents of musl
              </h3>
              <div class="segmentedlist">
                <div class="seglistitem">
                  <div class="seg">
                    <strong class="segtitle">Installed Programs:</strong>
                    <span class="segbody">ld-musl.so.0</span>
                  </div>
                  <div class="seg">
                    <strong class="segtitle">Installed Libraries:</strong>
                    <span class="segbody">libc.so.0, libcrypt.so.0,
                    libdl.so.0, libm.so.0, libpthread.so.0, librt.so.0</span>
                  </div>
                  <div class="seg">
                    <strong class="segtitle">Installed Headers:</strong>
                    <span class="segbody">To be written...</span>
                  </div>
                </div>
              </div>
              <div class="variablelist">
                <h4>
                  <a id="idm1504" name="idm1504"></a>Short Descriptions
                </h4>
                <table border="0">
                  <col align="left" valign="top" />
                  <tbody>
                    <tr>
                      <td>
                        <p>
                          <a id="ld-musl" name="ld-musl"></a><span class=
                          "term"><span class=
                          "command"><strong>ld-musl</strong></span></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          The musl dynamic linker / loader
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>
                          <a id="libc" name="libc"></a><span class=
                          "term"><code class="filename">libc</code></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          The C library
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>
                          <a id="libcrypt" name="libcrypt"></a><span class=
                          "term"><code class=
                          "filename">libcrypt</code></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          The cryptographic library
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>
                          <a id="libdl" name="libdl"></a><span class=
                          "term"><code class="filename">libdl</code></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          The musl dynamic linker / loader library
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>
                          <a id="libm" name="libm"></a><span class=
                          "term"><code class="filename">libm</code></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          The math library
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>
                          <a id="libpthread" name=
                          "libpthread"></a><span class="term"><code class=
                          "filename">libpthread</code></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          The POSIX thread library
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>
                          <a id="librt" name="librt"></a><span class=
                          "term"><code class="filename">librt</code></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          The clock and timer library
                        </p>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <div class="wrap" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-cross-tools-gcc-final" name=
                    "ch-cross-tools-gcc-final"></a>4.9.&nbsp;GCC-13.2.0 -
                    Final
                  </h2>
                </div>
              </div>
            </div>
            <div class="package" lang="en" xml:lang="en">
              <p>
                The GCC package contains the GNU compiler collection, which
                includes the C compiler. This second build of GCC will
                produce the final cross compiler which will use the
                previously built C library.
              </p>
            </div>
            <div class="installation" lang="en" xml:lang="en">
              <h3 class="sect2">
                4.9.1. Installation of GCC Cross Compiler
              </h3>
              <p>
                GCC requires the GMP, MPFR, and MPC packages to either be
                present on the host or to be present in source form within
                the gcc source tree. Unpack these into the GCC directory
                after unpacking GCC:
              </p>
              <pre class="userinput"><kbd class=
              "command">tar xf ../mpfr-4.2.1.tar.bz2
mv -v mpfr-4.2.1 mpfr
tar xf ../gmp-6.3.0.tar.bz2
mv -v gmp-6.3.0 gmp
tar xf ../mpc-1.3.1.tar.gz
mv -v mpc-1.3.1 mpc</kbd></pre>
              <p>
                The GCC documentation recommends building GCC outside of the
                source directory in a dedicated build directory:
              </p>
              <pre class="userinput"><kbd class=
              "command">mkdir -v ../gcc-build
cd ../gcc-build</kbd></pre>
              <p>
                Prepare GCC for compilation:
              </p>
              <div class="admon note">
                <h3>
                  Note
                </h3>
                <p>
                  If you would like to build a C++ compiler in addition to
                  the C compiler, change the following --enable-languages=c
                  option to be --enable-languages=c,c++ instead. A C++
                  compiler is not required for any of the software included
                  in this book.
                </p>
              </div>
              <pre class="userinput"><kbd class=
              "command">../gcc-13.2.0/configure \
  --prefix=${CLFS}/cross-tools \
  --build=${CLFS_HOST} \
  --host=${CLFS_HOST} \
  --target=${CLFS_TARGET} \
  --with-sysroot=${CLFS}/cross-tools/${CLFS_TARGET} \
  --disable-nls \
  --enable-languages=c \
  --enable-c99 \
  --enable-long-long \
  --disable-libmudflap \
  --disable-multilib \
  --with-mpfr-include=$(pwd)/../gcc-13.2.0/mpfr/src \
  --with-mpfr-lib=$(pwd)/mpfr/src/.libs \
  --with-arch=${CLFS_CPU}</kbd></pre>
              <div class="variablelist">
                <p class="title">
                  <b>The meaning of the configure options not used
                  previously:</b>
                </p>
                <dl>
                  <dt>
                    <span class="term"><em class=
                    "parameter"><code>--enable-c99</code></em></span>
                  </dt>
                  <dd>
                    <p>
                      Enable C99 support for C programs.
                    </p>
                  </dd>
                  <dt>
                    <span class="term"><em class=
                    "parameter"><code>--enable-long-long</code></em></span>
                  </dt>
                  <dd>
                    <p>
                      Enables long long support in the compiler.
                    </p>
                  </dd>
                </dl>
              </div>
              <p>
                Continue with compiling the package:
              </p>
              <pre class="userinput"><kbd class="command">make</kbd></pre>
              <p>
                Install the package:
              </p>
              <pre class="userinput"><kbd class=
              "command">make install</kbd></pre>
            </div>
            <div class="content" lang="en" xml:lang="en">
              <h3 class="sect2">
                <a id="contents-gcc" name="contents-gcc"></a>4.9.2. Contents
                of GCC
              </h3>
              <div class="segmentedlist">
                <div class="seglistitem">
                  <div class="seg">
                    <strong class="segtitle">Installed programs:</strong>
                    <span class="segbody">gcc, and gcov</span>
                  </div>
                  <div class="seg">
                    <strong class="segtitle">Installed libraries:</strong>
                    <span class="segbody">libgcc.a, libgcc_eh.a, and
                    libgcc_s.so</span>
                  </div>
                </div>
              </div>
              <div class="variablelist">
                <h4>
                  <a id="idm1602" name="idm1602"></a>Short Descriptions
                </h4>
                <table border="0">
                  <col align="left" valign="top" />
                  <tbody>
                    <tr>
                      <td>
                        <p>
                          <a id="gcc" name="gcc"></a><span class=
                          "term"><span class=
                          "command"><strong>gcc</strong></span></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          The C compiler
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>
                          <a id="gcov" name="gcov"></a><span class=
                          "term"><span class=
                          "command"><strong>gcov</strong></span></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          A coverage testing tool; it is used to analyze
                          programs to determine where optimizations will have
                          the most effect
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>
                          <a id="libgcc" name="libgcc"></a><span class=
                          "term"><code class="filename">libgcc</code></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          Contains run-time support for <span class=
                          "command"><strong>gcc</strong></span>
                        </p>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-system-toolchain" name=
                    "ch-system-toolchain"></a>4.10.&nbsp;ToolChain Variables
                  </h2>
                </div>
              </div>
            </div>
            <p>
              Setup target-specific variables for the compiler, linker, and
              other compile-time tools. For the compiler and linker, use the
              target file system directory as a sysroot rather than the
              sysroot we setup before for the cross-tools. This time we write
              them to <code class="filename">~/.bashrc</code> so that they
              persist even if the clfs user logs out:
            </p>
            <pre class="userinput"><kbd class="command">echo <code class=
            "literal">export CC=\""${CLFS_TARGET}-gcc --sysroot=${CLFS}/targetfs\""</code> &gt;&gt; ~/.bashrc
echo <code class=
"literal">export CXX=\""${CLFS_TARGET}-g++ --sysroot=${CLFS}/targetfs\""</code> &gt;&gt; ~/.bashrc
echo <code class=
"literal">export AR=\""${CLFS_TARGET}-ar\""</code> &gt;&gt; ~/.bashrc
echo <code class=
"literal">export AS=\""${CLFS_TARGET}-as\""</code> &gt;&gt; ~/.bashrc
echo <code class=
"literal">export LD=\""${CLFS_TARGET}-ld --sysroot=${CLFS}/targetfs\""</code> &gt;&gt; ~/.bashrc
echo <code class=
"literal">export RANLIB=\""${CLFS_TARGET}-ranlib\""</code> &gt;&gt; ~/.bashrc
echo <code class=
"literal">export READELF=\""${CLFS_TARGET}-readelf\""</code> &gt;&gt; ~/.bashrc
echo <code class=
"literal">export STRIP=\""${CLFS_TARGET}-strip\""</code> &gt;&gt; ~/.bashrc
source ~/.bashrc</kbd></pre>
          </div>
        </div>
      </div>
      <div class="part" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h1 class="title">
                <a id="part4" name="part4"></a>Part&nbsp;IV.&nbsp;Building
                the CLFS System
              </h1>
            </div>
          </div>
        </div>
        <div class="chapter" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title">
                  <a id="chapter-building-system" name=
                  "chapter-building-system"></a>Chapter&nbsp;5.&nbsp;Installing
                  Basic System Software
                </h2>
              </div>
            </div>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-system-introduction" name=
                    "ch-system-introduction"></a>5.1.&nbsp;Introduction
                  </h2>
                </div>
              </div>
            </div>
            <p>
              In this chapter, we enter the building site and start
              constructing the CLFS system in earnest. The installation of
              this software is straightforward. Although in many cases the
              installation instructions could be made shorter and more
              generic, we have opted to provide the full instructions for
              every package to minimize the possibilities for mistakes. The
              key to learning what makes a Linux system work is to know what
              each package is used for and why the user (or the system) needs
              it. For every installed package, a summary of its contents is
              given, followed by concise descriptions of each program and
              library the package installed.
            </p>
            <p>
              The order that packages are installed in this chapter needs to
              be strictly followed to ensure that no program accidentally
              acquires a path referring to <code class=
              "filename">${CLFS}/cross-tools</code> hard-wired into it. For
              the same reason, do not compile packages in parallel. Compiling
              more than one package at a time may save time, but it could
              result in a program containing a hard-wired path to
              <code class="filename">${CLFS}/cross-tools</code>, which will
              cause the program to stop working when that directory is
              removed.
            </p>
            <p>
              Compiling any single package using make's parallel job
              execution option, "-j" is OK if you want to speed up compiling
              any one package.
            </p>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-final-system-creatingdirs" name=
                    "ch-final-system-creatingdirs"></a>5.2.&nbsp;Creating
                    Directories
                  </h2>
                </div>
              </div>
            </div>
            <p>
              It is time to create some structure in the target CLFS file
              system. Create a standard directory tree by issuing the
              following commands:
            </p>
            <pre class="userinput"><kbd class=
            "command">mkdir -pv ${CLFS}/targetfs/{bin,boot,dev,etc,home,lib/{firmware,modules}}
mkdir -pv ${CLFS}/targetfs/{mnt,opt,proc,sbin,srv,sys}
mkdir -pv ${CLFS}/targetfs/var/{cache,lib,local,lock,log,opt,run,spool}
install -dv -m 0750 ${CLFS}/targetfs/root
install -dv -m 1777 ${CLFS}/targetfs/{var/,}tmp
mkdir -pv ${CLFS}/targetfs/usr/{,local/}{bin,include,lib,sbin,share,src}</kbd></pre>
            <p>
              Directories are, by default, created with permission mode 755,
              but this is not desirable for all directories. In the commands
              above, two changes are made&mdash;one to the home directory of
              user <code class="systemitem">root</code>, and another to the
              directories for temporary files.
            </p>
            <p>
              The first mode change ensures that not just anybody can enter
              the <code class="filename">/root</code> directory&mdash;the
              same as a normal user would do with his or her home directory.
              The second mode change makes sure that any user can write to
              the <code class="filename">/tmp</code> and <code class=
              "filename">/var/tmp</code> directories, but cannot remove
              another user's files from them. The latter is prohibited by the
              so-called &ldquo;<span class="quote">sticky bit,</span>&rdquo;
              the highest bit (1) in the 1777 bit mask.
            </p>
            <div class="sect2" lang="en" xml:lang="en">
              <h3 class="sect2">
                5.2.1. FHS Compliance Note
              </h3>
              <p>
                The directory tree is based on the Filesystem Hierarchy
                Standard (FHS) (available at <a class="ulink" href=
                "http://refspecs.linuxfoundation.org/fhs.shtml">http://refspecs.linuxfoundation.org/fhs.shtml</a>).
              </p>
            </div>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-final-system-creatingfiles" name=
                    "ch-final-system-creatingfiles"></a>5.3.&nbsp;Creating
                    the passwd, group, and lastlog Files
                  </h2>
                </div>
              </div>
            </div>
            <p>
              A proper Linux system maintains a list of the mounted file
              systems in the file <code class="filename">/etc/mtab</code>.
              With the way our embedded system is designed, we will be using
              a symlink to <code class="filename">/proc/mounts</code>:
            </p>
            <pre class="userinput"><kbd class=
            "command">ln -svf ../proc/mounts ${CLFS}/targetfs/etc/mtab</kbd></pre>
            <p>
              In order for user <code class="systemitem">root</code> to be
              able to login and for the name &ldquo;<span class=
              "quote">root</span>&rdquo; to be recognized, there must be
              relevant entries in the <code class=
              "filename">/etc/passwd</code> and <code class=
              "filename">/etc/group</code> files.
            </p>
            <p>
              Create the <code class="filename">/etc/passwd</code> file by
              running the following command:
            </p>
            <pre class="userinput"><kbd class=
            "command">cat &gt; ${CLFS}/targetfs/etc/passwd &lt;&lt; "EOF"
<code class="literal">root::0:0:root:/root:/bin/ash</code>
EOF</kbd></pre>
            <p>
              The actual password for <code class="systemitem">root</code>
              (the &ldquo;<span class="quote">::</span>&rdquo; used here is
              just a placeholder and allow you to login with no password)
              will be set later.
            </p>
            <div class="variablelist">
              <p class="title">
                <b>Additional optional users you may want to add:</b>
              </p>
              <dl>
                <dt>
                  <span class="term"><code class=
                  "literal">bin:x:1:1:bin:/bin:/bin/false</code></span>
                </dt>
                <dd>
                  <p>
                    Can be useful for compatibility with legacy applications.
                  </p>
                </dd>
                <dt>
                  <span class="term"><code class=
                  "literal">daemon:x:2:6:daemon:/sbin:/bin/false</code></span>
                </dt>
                <dd>
                  <p>
                    It is often recommended to use an unprivileged User
                    ID/Group ID for daemons in order to limit their access to
                    the system.
                  </p>
                </dd>
                <dt>
                  <span class="term"><code class=
                  "literal">adm:x:3:16:adm:/var/adm:/bin/false</code></span>
                </dt>
                <dd>
                  <p>
                    Was used for programs that performed administrative
                    tasks.
                  </p>
                </dd>
                <dt>
                  <span class="term"><code class=
                  "literal">lp:x:10:9:lp:/var/spool/lp:/bin/false</code></span>
                </dt>
                <dd>
                  <p>
                    Used by programs for printing.
                  </p>
                </dd>
                <dt>
                  <span class="term"><code class=
                  "literal">mail:x:30:30:mail:/var/mail:/bin/false</code></span>
                </dt>
                <dd>
                  <p>
                    Often used by email programs.
                  </p>
                </dd>
                <dt>
                  <span class="term"><code class=
                  "literal">news:x:31:31:news:/var/spool/news:/bin/false</code></span>
                </dt>
                <dd>
                  <p>
                    Often used for network news servers.
                  </p>
                </dd>
                <dt>
                  <span class="term"><code class=
                  "literal">uucp:x:32:32:uucp:/var/spool/uucp:/bin/false</code></span>
                </dt>
                <dd>
                  <p>
                    Often used for Unix-to-Unix Copy of files from one server
                    to the next
                  </p>
                </dd>
                <dt>
                  <span class="term"><code class=
                  "literal">operator:x:50:0:operator:/root:/bin/ash</code></span>
                </dt>
                <dd>
                  <p>
                    Often used to allow system operators to access the
                    system.
                  </p>
                </dd>
                <dt>
                  <span class="term"><code class=
                  "literal">postmaster:x:51:30:postmaster:/var/spool/mail:/bin/false</code></span>
                </dt>
                <dd>
                  <p>
                    Generally used as an account that receives all the
                    information of troubles with the mail server.
                  </p>
                </dd>
                <dt>
                  <span class="term"><code class=
                  "literal">nobody:x:65534:65534:nobody:/:/bin/false</code></span>
                </dt>
                <dd>
                  <p>
                    Used by NFS.
                  </p>
                </dd>
              </dl>
            </div>
            <p>
              Create the <code class="filename">/etc/group</code> file by
              running the following command:
            </p>
            <pre class="userinput"><kbd class=
            "command">cat &gt; ${CLFS}/targetfs/etc/group &lt;&lt; "EOF"
<code class="literal">root:x:0:
bin:x:1:
sys:x:2:
kmem:x:3:
tty:x:4:
tape:x:5:
daemon:x:6:
floppy:x:7:
disk:x:8:
lp:x:9:
dialout:x:10:
audio:x:11:
video:x:12:
utmp:x:13:
usb:x:14:
cdrom:x:15:</code>
EOF</kbd></pre>
            <div class="variablelist">
              <p class="title">
                <b>Additional optional groups you may want to add</b>
              </p>
              <dl>
                <dt>
                  <span class="term"><code class=
                  "literal">adm:x:16:root,adm,daemon</code></span>
                </dt>
                <dd>
                  <p>
                    All users in this group are allowed to do administrative
                    tasks
                  </p>
                </dd>
                <dt>
                  <span class="term"><code class=
                  "literal">console:x:17:</code></span>
                </dt>
                <dd>
                  <p>
                    This group has direct access to the console
                  </p>
                </dd>
                <dt>
                  <span class="term"><code class=
                  "literal">cdrw:x:18:</code></span>
                </dt>
                <dd>
                  <p>
                    This group is allowed to use the CDRW drive
                  </p>
                </dd>
                <dt>
                  <span class="term"><code class=
                  "literal">mail:x:30:mail</code></span>
                </dt>
                <dd>
                  <p>
                    Used by MTAs (Mail Transport Agents)
                  </p>
                </dd>
                <dt>
                  <span class="term"><code class=
                  "literal">news:x:31:news</code></span>
                </dt>
                <dd>
                  <p>
                    Used by Network News Servers
                  </p>
                </dd>
                <dt>
                  <span class="term"><code class=
                  "literal">uucp:x:32:uucp</code></span>
                </dt>
                <dd>
                  <p>
                    Used by the Unix-to-Unix copy users
                  </p>
                </dd>
                <dt>
                  <span class="term"><code class=
                  "literal">users:x:100:</code></span>
                </dt>
                <dd>
                  <p>
                    The default GID used by shadow for new users
                  </p>
                </dd>
                <dt>
                  <span class="term"><code class=
                  "literal">nogroup:x:65533:</code></span>
                </dt>
                <dd>
                  <p>
                    This is a default group used by some programs that do not
                    require a group
                  </p>
                </dd>
                <dt>
                  <span class="term"><code class=
                  "literal">nobody:x:65534:</code></span>
                </dt>
                <dd>
                  <p>
                    This is used by NFS
                  </p>
                </dd>
              </dl>
            </div>
            <p>
              The created groups are not part of any standard&mdash;they are
              groups decided on in part by the requirements of BusyBox later
              in this chapter, and in part by common convention employed by a
              number of existing Linux distributions. The Linux Standard Base
              (LSB, available at <a class="ulink" href=
              "http://www.linuxbase.org">http://www.linuxbase.org</a>)
              recommends only that, besides the group <code class=
              "systemitem">root</code> with a Group ID (GID) of 0, a group
              <code class="systemitem">bin</code> with a GID of 1 be present.
              All other group names and GIDs can be chosen freely by the
              system administrator since well-written programs do not depend
              on GID numbers, but rather use the group's name.
            </p>
            <p>
              The <span class="command"><strong>login</strong></span>,
              <span class="command"><strong>agetty</strong></span>, and
              <span class="command"><strong>init</strong></span> programs
              (and others) use the lastlog file to record information such as
              who was logged into the system and when. However, these
              programs will not write to the lastlog file if it does not
              already exist. Initialize the lastlog file and give it proper
              permissions:
            </p>
            <pre class="userinput"><kbd class=
            "command">touch ${CLFS}/targetfs/var/log/lastlog
chmod -v 664 ${CLFS}/targetfs/var/log/lastlog</kbd></pre>
          </div>
          <div class="wrap" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-final-system-libgcc" name=
                    "ch-final-system-libgcc"></a>5.4.&nbsp;libgcc-13.2.0
                  </h2>
                </div>
              </div>
            </div>
            <div class="package" lang="en" xml:lang="en">
              <p>
                When compiling dynamically linked software using GCC, GCC
                requires that libgcc be able to be loaded during runtime when
                executing the software. Hence, we must be sure to provide the
                final system with a copy of the libgcc we previously built
                for our cross tools.
              </p>
            </div>
            <div class="installation" lang="en" xml:lang="en">
              <h3 class="sect2">
                5.4.1. Installation of libgcc
              </h3>
              <p>
                Install the package:
              </p>
              <pre class="userinput"><kbd class=
              "command">cp -v ${CLFS}/cross-tools/${CLFS_TARGET}/lib/libgcc_s.so.1 ${CLFS}/targetfs/lib/</kbd></pre>
              <p>
                Strip libgcc to make it smaller:
              </p>
              <pre class="userinput"><kbd class=
              "command">${CLFS_TARGET}-strip ${CLFS}/targetfs/lib/libgcc_s.so.1</kbd></pre>
            </div>
          </div>
          <div class="wrap" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-final-system-libc" name=
                    "ch-final-system-libc"></a>5.5.&nbsp;musl-1.2.5
                  </h2>
                </div>
              </div>
            </div>
            <div class="package" lang="en" xml:lang="en">
              <p>
                The musl package contains the main C library. This library
                provides the basic routines for allocating memory, searching
                directories, opening and closing files, reading and writing
                files, string handling, pattern matching, arithmetic, and so
                on. We build it again here so that it can be installed into
                our targetfs sysroot but this time we only build the shared
                object version.
              </p>
            </div>
            <div class="installation" lang="en" xml:lang="en">
              <h3 class="sect2">
                5.5.1. Installation of musl
              </h3>
              <p>
                Configure the package:
              </p>
              <pre class="userinput"><kbd class="command">./configure \
  CROSS_COMPILE=${CLFS_TARGET}- \
  --prefix=/ \
  --disable-static \
  --target=${CLFS_TARGET}</kbd></pre>
              <p>
                Compile the package:
              </p>
              <pre class="userinput"><kbd class="command">make</kbd></pre>
              <p>
                Install just the shared library:
              </p>
              <pre class="userinput"><kbd class=
              "command">DESTDIR=${CLFS}/targetfs make install-libs</kbd></pre>
            </div>
            <div class="content" lang="en" xml:lang="en">
              <p>
                Details on this package are located in <a class="xref" href=
                "#contents-musl" title=
                "4.8.2.&nbsp;Contents of musl">Section&nbsp;4.8.2,
                &ldquo;Contents of musl.&rdquo;</a>
              </p>
            </div>
          </div>
          <div class="wrap" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-system-busybox" name=
                    "ch-system-busybox"></a>5.6.&nbsp;BusyBox-1.36.1
                  </h2>
                </div>
              </div>
            </div>
            <div class="package" lang="en" xml:lang="en">
              <p>
                BusyBox combines tiny versions of many common UNIX utilities
                into a single small executable. It provides replacements for
                most of the utilities you usually find in GNU fileutils,
                shellutils, etc. The utilities in BusyBox generally have
                fewer options than their full-featured GNU cousins; however,
                the options that are included provide the expected
                functionality and behave very much like their GNU
                counterparts. BusyBox provides a fairly complete environment
                for any small or embedded system.
              </p>
            </div>
            <div class="installation" lang="en" xml:lang="en">
              <h3 class="sect2">
                5.6.1. Installation of BusyBox
              </h3>
              <p>
                First ensure the BusyBox source is completely clean:
              </p>
              <pre class="userinput"><kbd class=
              "command">make distclean</kbd></pre>
              <div class="admon note">
                <h3>
                  Note
                </h3>
                <p>
                  We tell BusyBox to use the generic defconfig. For those who
                  are more adventurous, you can use <span class=
                  "command"><strong>make menuconfig</strong></span>, and
                  create a custom or modified configuration for your build.
                </p>
              </div>
              <p>
                The following tells BusyBox to use the default configuration:
              </p>
              <pre class="userinput"><kbd class=
              "command">make ARCH="${CLFS_ARCH}" defconfig</kbd></pre>
              <p>
                Disable building both ifplugd and inetd as they both have
                issues building against musl:
              </p>
              <pre class="userinput"><kbd class=
              "command">sed -i 's/\(CONFIG_\)\(.*\)\(INETD\)\(.*\)=y/# \1\2\3\4 is not set/g' .config
sed -i 's/\(CONFIG_IFPLUGD\)=y/# \1 is not set/' .config</kbd></pre>
              <p>
                Disable the use of utmp/wtmp as musl does not support them:
              </p>
              <pre class="userinput"><kbd class=
              "command">sed -i 's/\(CONFIG_FEATURE_WTMP\)=y/# \1 is not set/' .config
sed -i 's/\(CONFIG_FEATURE_UTMP\)=y/# \1 is not set/' .config</kbd></pre>
              <p>
                Disable the use of ipsvd for both TCP and UDP as it has
                issues building against musl (similar to inetd's issues):
              </p>
              <pre class="userinput"><kbd class=
              "command">sed -i 's/\(CONFIG_UDPSVD\)=y/# \1 is not set/' .config
sed -i 's/\(CONFIG_TCPSVD\)=y/# \1 is not set/' .config</kbd></pre>
              <p>
                Compile the package:
              </p>
              <pre class="userinput"><kbd class=
              "command">make ARCH="${CLFS_ARCH}" CROSS_COMPILE="${CLFS_TARGET}-"</kbd></pre>
              <p>
                Install the package:
              </p>
              <pre class="userinput"><kbd class=
              "command">make ARCH="${CLFS_ARCH}" CROSS_COMPILE="${CLFS_TARGET}-"\
  CONFIG_PREFIX="${CLFS}/targetfs" install</kbd></pre>
              <p>
                If you're going to build your kernel with modules, you will
                need to make sure <span class=
                "command"><strong>depmod.pl</strong></span> is available for
                your host to execute:
              </p>
              <pre class="userinput"><kbd class=
              "command">cp -v examples/depmod.pl ${CLFS}/cross-tools/bin
chmod -v 755 ${CLFS}/cross-tools/bin/depmod.pl</kbd></pre>
            </div>
            <div class="content" lang="en" xml:lang="en">
              <h3 class="sect2">
                <a id="contents-busybox" name="contents-busybox"></a>5.6.2.
                Contents of BusyBox
              </h3>
              <div class="segmentedlist">
                <div class="seglistitem">
                  <div class="seg">
                    <strong class="segtitle">Installed programs:</strong>
                    <span class="segbody">To be Written</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="wrap" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-system-iana-etc" name=
                    "ch-system-iana-etc"></a>5.7.&nbsp;iana-etc-20240125
                  </h2>
                </div>
              </div>
            </div>
            <div class="package" lang="en" xml:lang="en">
              <p>
                The iana-etc package provides data for network services and
                protocols.
              </p>
            </div>
            <div class="installation" lang="en" xml:lang="en">
              <h3 class="sect2">
                5.7.1. Installation of Iana-Etc
              </h3>
              <p>
                For this package, we only need to copy the files into place:
              </p>
              <pre class="userinput"><kbd class=
              "command">cp services protocols ${CLFS}/targetfs/etc</kbd></pre>
            </div>
            <div class="content" lang="en" xml:lang="en">
              <h3 class="sect2">
                <a id="contents-iana-etc" name="contents-iana-etc"></a>5.7.2.
                Contents of iana-etc
              </h3>
              <div class="segmentedlist">
                <div class="seglistitem">
                  <div class="seg">
                    <strong class="segtitle">Installed files:</strong>
                    <span class="segbody">/etc/protocols and
                    /etc/services</span>
                  </div>
                </div>
              </div>
              <div class="variablelist">
                <h4>
                  <a id="idm1907" name="idm1907"></a>Short Descriptions
                </h4>
                <table border="0">
                  <col align="left" valign="top" />
                  <tbody>
                    <tr>
                      <td>
                        <p>
                          <a id="protocols" name="protocols"></a><span class=
                          "term"><code class=
                          "filename">/etc/protocols</code></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          Describes the various DARPA Internet protocols that
                          are available from the TCP/IP subsystem
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>
                          <a id="services" name="services"></a><span class=
                          "term"><code class=
                          "filename">/etc/services</code></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          Provides a mapping between friendly textual names
                          for internet services, and their underlying
                          assigned port numbers and protocol types
                        </p>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
        <div class="chapter" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title">
                  <a id="chapter-bootable" name=
                  "chapter-bootable"></a>Chapter&nbsp;6.&nbsp;Making the CLFS
                  System Bootable
                </h2>
              </div>
            </div>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-bootable-introduction" name=
                    "ch-bootable-introduction"></a>6.1.&nbsp;Introduction
                  </h2>
                </div>
              </div>
            </div>
            <p>
              It is time to make the CLFS system bootable. This chapter
              discusses creating an <code class="filename">fstab</code> file,
              building a kernel for the new CLFS system, and installing the
              boot loader so that the CLFS system can be selected for booting
              at startup.
            </p>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-bootable-fstab" name=
                    "ch-bootable-fstab"></a>6.2.&nbsp;Creating the /etc/fstab
                    File
                  </h2>
                </div>
              </div>
            </div>
            <p>
              The <code class="filename">/etc/fstab</code> file is used by
              some programs to determine where file systems are to be mounted
              by default, in which order, and which must be checked (for
              integrity errors) prior to mounting. For our embedded system,
              the bootloader will tell Linux where to find the root file
              system and we will not mount any additional file systems, so we
              can create an empty file system table like this:
            </p>
            <pre class="userinput"><kbd class=
            "command">cat &gt; ${CLFS}/targetfs/etc/fstab &lt;&lt; "EOF"
<code class=
"literal"># file-system  mount-point  type   options          dump  fsck</code>
EOF</kbd></pre>
            <p>
              You may add any other file systems, such as swap or other
              partitions or network file systems, to this fstab if you wish.
            </p>
          </div>
          <div class="wrap" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-bootable-kernel" name=
                    "ch-bootable-kernel"></a>6.3.&nbsp;Linux-6.7.4
                  </h2>
                </div>
              </div>
            </div>
            <div class="package" lang="en" xml:lang="en">
              <p>
                The Linux package contains the Linux kernel.
              </p>
            </div>
            <div class="installation" lang="en" xml:lang="en">
              <h3 class="sect2">
                6.3.1. Installation of the kernel
              </h3>
              <p>
                Building the kernel involves a few steps&mdash;configuration,
                compilation, and installation. Read the <code class=
                "filename">README</code> file in the kernel source tree for
                alternative methods to the way this book configures the
                kernel.
              </p>
              <p>
                Prepare for compilation by running the following command:
              </p>
              <pre class="userinput"><kbd class=
              "command">make mrproper</kbd></pre>
              <p>
                This ensures that the kernel tree is absolutely clean. The
                kernel team recommends that this command be issued prior to
                each kernel compilation. Do not rely on the source tree being
                clean after un-tarring.
              </p>
              <p>
                A good starting place for setting up the kernel configuration
                is to use a <span class="emphasis"><em>defconfig</em></span>.
                This will set the base configuration to a good state that
                takes your target system architecture into account.
              </p>
              <p>
                To list the all available default configuratinons available
                use this command:
              </p>
              <pre class="userinput"><kbd class=
              "command">ARCH=${CLFS_ARCH} make help | grep defconfig</kbd></pre>
              <p>
                Then run <span class="command"><strong>make [your default
                configuration]</strong></span> to generate the <code class=
                "filename">.config</code> file.
              </p>
              <p>
                Configure the kernel via a menu-driven interface. Be sure to
                enable DEVTMPFS so that <code class="filename">/dev</code>
                will be populated automatically.
              </p>
              <div class="admon note">
                <h3>
                  Note
                </h3>
                <p>
                  Since you are building for an embedded system make sure all
                  key components are built into the kernel and not as
                  modules. The key components are console/video, disk, and
                  network. Without these built in, the system will not
                  function properly. It is recommended to configure the
                  kernel without modules in order to conserve disk space and
                  to reduce the complexity of booting.
                </p>
              </div>
              <pre class="userinput"><kbd class=
              "command">make ARCH=${CLFS_ARCH} CROSS_COMPILE=${CLFS_TARGET}- menuconfig</kbd></pre>
              <p>
                Alternatively, the <span class="command"><strong>make
                oldconfig</strong></span> may be more appropriate in some
                situations. See the <code class="filename">README</code> file
                for more information.
              </p>
              <p>
                If desired, skip kernel configuration by copying the kernel
                config file, <code class="filename">.config</code>, from an
                example system (assuming it is available) to the root
                directory of the unpacked kernel sources.
              </p>
              <div class="admon note">
                <h3>
                  Note
                </h3>
                <p>
                  If you are using the u-boot bootloader, creating a
                  <code class="filename">uImage</code> type kernel is
                  recommended. Install the u-boot tools (not documented here)
                  and append "uImage" when compiling the kernel.
                </p>
              </div>
              <p>
                Compile the configured kernel image and modules:
              </p>
              <pre class="userinput"><kbd class=
              "command">make ARCH=${CLFS_ARCH} CROSS_COMPILE=${CLFS_TARGET}-</kbd></pre>
              <p>
                If using kernel modules, an <code class=
                "filename">/etc/modprobe.conf</code> file may be needed.
                Information pertaining to modules and kernel configuration is
                located in the kernel documentation in the <code class=
                "filename">Documentation</code> directory of the kernel
                sources tree. Also, <code class=
                "filename">modprobe.conf(5)</code> may be of interest.
              </p>
              <p>
                If building modules, install the modules:
              </p>
              <pre class="userinput"><kbd class=
              "command">make ARCH=${CLFS_ARCH} CROSS_COMPILE=${CLFS_TARGET}- \
    INSTALL_MOD_PATH=${CLFS}/targetfs modules_install</kbd></pre>
              <p>
                The kernel configuration file <code class=
                "filename">.config</code> produced by the <span class=
                "command"><strong>make menuconfig</strong></span> step above
                contains all the configuration selections for the kernel that
                was just compiled. It is a good idea to keep this file for
                future reference.
              </p>
              <p>
                The resulting kernel will be located within the <code class=
                "filename">arch/${CLFS_ARCH}/boot</code>. There may be more
                than one version of the same kernel, simply with different
                compression or bootloader helpers added. Follow your
                bootloader's instructions on how to copy the kernel to the
                final system.
              </p>
            </div>
            <div class="content" lang="en" xml:lang="en">
              <h3 class="sect2">
                <a id="contents-kernel" name="contents-kernel"></a>6.3.2.
                Contents of Linux
              </h3>
              <div class="segmentedlist">
                <div class="seglistitem">
                  <div class="seg">
                    <strong class="segtitle">Installed files:</strong>
                    <span class="segbody">.config, Image files, and
                    System.map</span>
                  </div>
                </div>
              </div>
              <div class="variablelist">
                <h4>
                  <a id="idm1997" name="idm1997"></a>Short Descriptions
                </h4>
                <table border="0">
                  <col align="left" valign="top" />
                  <tbody>
                    <tr>
                      <td>
                        <p>
                          <a id="config" name="config"></a><span class=
                          "term"><code class="filename">.config</code></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          Contains all the configuration selections for the
                          kernel
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>
                          <a id="kernel" name="kernel"></a><span class=
                          "term"><code class="filename">zImage, uImage,
                          bzImage, vmlinux</code></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          The compiled Linux kernel.
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>
                          <a id="System.map" name=
                          "System.map"></a><span class="term"><code class=
                          "filename">System.map</code></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          A list of addresses and symbols; it maps the entry
                          points and addresses of all the functions and data
                          structures in the kernel. Useful for debugging,
                          sometimes.
                        </p>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-bootable-bootloaders" name=
                    "ch-bootable-bootloaders"></a>6.4.&nbsp;Bootloaders
                  </h2>
                </div>
              </div>
            </div>
            <p>
              There are many different bootloaders. Creating detailed
              instructions on how to use even the more popular ones is
              difficult as each architecture and board often has different
              levels of support or configuration options within each
              bootloader. Often, development kits will ship with a bootloader
              already configured, if your board comes with a bootloader
              pre-configured, it's best to start using that and then venture
              on to building the bootloader yourself later.
            </p>
            <p>
              A few of the popular bootloaders include:
            </p>
            <div class="variablelist">
              <dl>
                <dt>
                  <span class="term">Barebox</span>
                </dt>
                <dd>
                  <p>
                    <a class="ulink" href=
                    "http://barebox.org/">http://barebox.org/</a>
                  </p>
                </dd>
                <dt>
                  <span class="term">CoLo</span>
                </dt>
                <dd>
                  <p>
                    <a class="ulink" href=
                    "http://www.colonel-panic.org/cobalt-mips/">http://www.colonel-panic.org/cobalt-mips/</a>
                  </p>
                </dd>
                <dt>
                  <span class="term">GNU GRUB</span>
                </dt>
                <dd>
                  <p>
                    <a class="ulink" href=
                    "https://www.gnu.org/software/grub/">https://www.gnu.org/software/grub/</a>
                  </p>
                </dd>
                <dt>
                  <span class="term">Syslinux</span>
                </dt>
                <dd>
                  <p>
                    <a class="ulink" href=
                    "http://www.syslinux.org/wiki/index.php/The_Syslinux_Project">
                    http://www.syslinux.org/wiki/index.php/The_Syslinux_Project</a>
                  </p>
                </dd>
                <dt>
                  <span class="term">u-boot</span>
                </dt>
                <dd>
                  <p>
                    <a class="ulink" href=
                    "http://www.denx.de/wiki/U-Boot">http://www.denx.de/wiki/U-Boot</a>
                  </p>
                </dd>
              </dl>
            </div>
          </div>
        </div>
        <div class="chapter" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title">
                  <a id="chapter-bootscripts" name=
                  "chapter-bootscripts"></a>Chapter&nbsp;7.&nbsp;Setting Up
                  System Bootscripts
                </h2>
              </div>
            </div>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-scripts-introduction" name=
                    "ch-scripts-introduction"></a>7.1.&nbsp;Introduction
                  </h2>
                </div>
              </div>
            </div>
            <p>
              This chapter details how to install and configure the
              CLFS-Bootscripts package. Most of these scripts will work
              without modification, but a few require additional
              configuration files because they deal with hardware-dependent
              information.
            </p>
            <p>
              System-V style init scripts are employed in this book because
              they are widely used. For additional options, a hint detailing
              the BSD style init setup is available at <a class="ulink" href=
              "http://www.linuxfromscratch.org/hints/downloads/files/bsd-init.txt">
              http://www.linuxfromscratch.org/hints/downloads/files/bsd-init.txt</a>.
              Searching the LFS mailing lists for &ldquo;<span class=
              "quote">depinit</span>&rdquo; will also offer additional
              choices.
            </p>
            <p>
              If using an alternative style of init scripts, skip this
              chapter and move on to <a class="xref" href="#chapter-bootable"
              title=
              "Chapter&nbsp;6.&nbsp;Making the CLFS System Bootable">Making
              the CLFS System Bootable</a>.
            </p>
          </div>
          <div class="wrap" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-scripts-bootscripts" name=
                    "ch-scripts-bootscripts"></a>7.2.&nbsp;CLFS-Bootscripts-git
                    master HEAD
                  </h2>
                </div>
              </div>
            </div>
            <div class="package" lang="en" xml:lang="en">
              <p>
                The CLFS-Bootscripts package contains a set of scripts to
                start/stop the CLFS system at bootup/shutdown.
              </p>
            </div>
            <div class="installation" lang="en" xml:lang="en">
              <h3 class="sect2">
                7.2.1. Installation of CLFS-Bootscripts
              </h3>
              <div class="admon important">
                <h3>
                  Important
                </h3>
                <p>
                  Unlike other chapters, after installing the bootscripts, do
                  not delete the bootscripts source directory. The
                  bootscripts source directory may be needed later.
                </p>
              </div>
              <p>
                Install the package:
              </p>
              <pre class="userinput"><kbd class=
              "command">make DESTDIR=${CLFS}/targetfs install-bootscripts</kbd></pre>
            </div>
            <div class="content" lang="en" xml:lang="en">
              <h3 class="sect2">
                <a id="contents-bootscripts" name=
                "contents-bootscripts"></a>7.2.2. Contents of
                CLFS-Bootscripts
              </h3>
              <div class="segmentedlist">
                <div class="seglistitem">
                  <div class="seg">
                    <strong class="segtitle">Installed scripts:</strong>
                    <span class="segbody">functions, startup, shutdown, and
                    syslog.</span>
                  </div>
                </div>
              </div>
              <div class="variablelist">
                <h4>
                  <a id="idm2074" name="idm2074"></a>Short Descriptions
                </h4>
                <table border="0">
                  <col align="left" valign="top" />
                  <tbody>
                    <tr>
                      <td>
                        <p>
                          <a id="functions-bootscripts" name=
                          "functions-bootscripts"></a><span class=
                          "term"><span class=
                          "command"><strong>functions</strong></span></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          Contains common functions, such as error and status
                          checking, that are used by several bootscripts
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>
                          <a id="startup-bootscripts" name=
                          "startup-bootscripts"></a><span class=
                          "term"><span class=
                          "command"><strong>startup</strong></span></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          Performs all startup script operations
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>
                          <a id="shutdown-bootscripts" name=
                          "shutdown-bootscripts"></a><span class=
                          "term"><span class=
                          "command"><strong>shutdown</strong></span></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          Performs all shutdown operations
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>
                          <a id="syslog-bootscripts" name=
                          "syslog-bootscripts"></a><span class=
                          "term"><span class=
                          "command"><strong>syslog</strong></span></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          Starts and stops the system log daemons
                        </p>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-scripts-mdev" name=
                    "ch-scripts-mdev"></a>7.3.&nbsp;Configure mdev
                  </h2>
                </div>
              </div>
            </div>
            <div class="package" lang="en" xml:lang="en">
              <p>
                Is a BusyBox replacement of udev. With a different rule base.
              </p>
            </div>
            <div class="sect2" lang="en" xml:lang="en">
              <h3 class="sect2">
                7.3.1. Creating /etc/mdev.conf
              </h3>
              <p>
                Now we will create the mdev.conf file for use with our
                system:
              </p>
              <pre class="userinput"><kbd class=
              "command">cat &gt; ${CLFS}/targetfs/etc/mdev.conf&lt;&lt; "EOF"
<code class="literal"># /etc/mdev/conf

# Devices:
# Syntax: %s %d:%d %s
# devices user:group mode

# null does already exist; therefore ownership has to be changed with command
null    root:root 0666  @chmod 666 $MDEV
zero    root:root 0666
grsec   root:root 0660
full    root:root 0666

random  root:root 0666
urandom root:root 0444
hwrandom root:root 0660

# console does already exist; therefore ownership has to be changed with command
#console        root:tty 0600   @chmod 600 $MDEV &amp;&amp; mkdir -p vc &amp;&amp; ln -sf ../$MDEV vc/0
console root:tty 0600 @mkdir -pm 755 fd &amp;&amp; cd fd &amp;&amp; for x in 0 1 2 3 ; do ln -sf /proc/self/fd/$x $x; done

fd0     root:floppy 0660
kmem    root:root 0640
mem     root:root 0640
port    root:root 0640
ptmx    root:tty 0666

# ram.*
ram([0-9]*)     root:disk 0660 &gt;rd/%1
loop([0-9]+)    root:disk 0660 &gt;loop/%1
sd[a-z].*       root:disk 0660 */lib/mdev/usbdisk_link
hd[a-z][0-9]*   root:disk 0660 */lib/mdev/ide_links
md[0-9]         root:disk 0660

tty             root:tty 0666
tty[0-9]        root:root 0600
tty[0-9][0-9]   root:tty 0660
ttyS[0-9]*      root:tty 0660
pty.*           root:tty 0660
vcs[0-9]*       root:tty 0660
vcsa[0-9]*      root:tty 0660

ttyLTM[0-9]     root:dialout 0660 @ln -sf $MDEV modem
ttySHSF[0-9]    root:dialout 0660 @ln -sf $MDEV modem
slamr           root:dialout 0660 @ln -sf $MDEV slamr0
slusb           root:dialout 0660 @ln -sf $MDEV slusb0
fuse            root:root  0666

# dri device
card[0-9]       root:video 0660 =dri/

# alsa sound devices and audio stuff
pcm.*           root:audio 0660 =snd/
control.*       root:audio 0660 =snd/
midi.*          root:audio 0660 =snd/
seq             root:audio 0660 =snd/
timer           root:audio 0660 =snd/

adsp            root:audio 0660 &gt;sound/
audio           root:audio 0660 &gt;sound/
dsp             root:audio 0660 &gt;sound/
mixer           root:audio 0660 &gt;sound/
sequencer.*     root:audio 0660 &gt;sound/

# misc stuff
agpgart         root:root 0660  &gt;misc/
psaux           root:root 0660  &gt;misc/
rtc             root:root 0664  &gt;misc/

# input stuff
event[0-9]+     root:root 0640 =input/
mice            root:root 0640 =input/
mouse[0-9]      root:root 0640 =input/
ts[0-9]         root:root 0600 =input/

# v4l stuff
vbi[0-9]        root:video 0660 &gt;v4l/
video[0-9]      root:video 0660 &gt;v4l/

# dvb stuff
dvb.*           root:video 0660 */lib/mdev/dvbdev

# load drivers for usb devices
usbdev[0-9].[0-9]       root:root 0660 */lib/mdev/usbdev
usbdev[0-9].[0-9]_.*    root:root 0660

# net devices
tun[0-9]*       root:root 0600 =net/
tap[0-9]*       root:root 0600 =net/

# zaptel devices
zap(.*)         root:dialout 0660 =zap/%1
dahdi!(.*)      root:dialout 0660 =dahdi/%1

# raid controllers
cciss!(.*)      root:disk 0660 =cciss/%1
ida!(.*)        root:disk 0660 =ida/%1
rd!(.*)         root:disk 0660 =rd/%1

sr[0-9]         root:cdrom 0660 @ln -sf $MDEV cdrom 

# hpilo
hpilo!(.*)      root:root 0660 =hpilo/%1

# xen stuff
xvd[a-z]        root:root 0660 */lib/mdev/xvd_links</code>
EOF</kbd></pre>
            </div>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-scripts-profile" name=
                    "ch-scripts-profile"></a>7.4.&nbsp;Creating /etc/profile
                  </h2>
                </div>
              </div>
            </div>
            <p>
              Is the file that specifices how your environment will function.
            </p>
            <p>
              Now we will create the profile file for use with our system:
            </p>
            <pre class="userinput"><kbd class=
            "command">cat &gt; ${CLFS}/targetfs/etc/profile &lt;&lt; "EOF"
<code class="literal"># /etc/profile

# Set the initial path
export PATH=/bin:/usr/bin

if [ `id -u` -eq 0 ] ; then
        PATH=/bin:/sbin:/usr/bin:/usr/sbin
        unset HISTFILE
fi

# Setup some environment variables.
export USER=`id -un`
export LOGNAME=$USER
export HOSTNAME=`/bin/hostname`
export HISTSIZE=1000
export HISTFILESIZE=1000
export PAGER='/bin/more '
export EDITOR='/bin/vi'

# End /etc/profile</code>
EOF</kbd></pre>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-scripts-inittab" name=
                    "ch-scripts-inittab"></a>7.5.&nbsp;Creating /etc/inittab
                  </h2>
                </div>
              </div>
            </div>
            <p>
              Is the file that specifices how to boot and shutdown a system.
            </p>
            <p>
              Now we will create the inittab file for use with our system,
              please note that if you'd like a login prompt on a serial
              console to uncomment enabling of this and verify the serial
              port device name as many embedded boards have serial ports
              which are not named 'ttyS':
            </p>
            <pre class="userinput"><kbd class=
            "command">cat &gt; ${CLFS}/targetfs/etc/inittab&lt;&lt; "EOF"
<code class="literal"># /etc/inittab

::sysinit:/etc/rc.d/startup

tty1::respawn:/sbin/getty 38400 tty1
tty2::respawn:/sbin/getty 38400 tty2
tty3::respawn:/sbin/getty 38400 tty3
tty4::respawn:/sbin/getty 38400 tty4
tty5::respawn:/sbin/getty 38400 tty5
tty6::respawn:/sbin/getty 38400 tty6

# Put a getty on the serial line (for a terminal).  Uncomment this line if
# you're using a serial console on ttyS0, or uncomment and adjust it if using a
# serial console on a different serial port.
#::respawn:/sbin/getty -L ttyS0 115200 vt100

::shutdown:/etc/rc.d/shutdown
::ctrlaltdel:/sbin/reboot</code>
EOF</kbd></pre>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-scripts-hostname" name=
                    "ch-scripts-hostname"></a>7.6.&nbsp;Setting Hostname
                  </h2>
                </div>
              </div>
            </div>
            <p>
              Part of the job of the bootscripts is setting the system's
              hostname. This needs to be configured in the <code class=
              "filename">/etc/HOSTNAME</code> file.
            </p>
            <p>
              Create the <code class="filename">HOSTNAME</code> file and
              enter a hostname by running:
            </p>
            <pre class="userinput"><kbd class="command">echo "<em class=
            "replaceable"><code>[clfs]</code></em>" &gt; ${CLFS}/targetfs/etc/HOSTNAME</kbd></pre>
            <p>
              <em class="replaceable"><code>[clfs]</code></em> needs to be
              replaced with the name given to the computer. Do not enter the
              Fully Qualified Domain Name (FQDN) here. That information will
              be put in the <code class="filename">/etc/hosts</code> file in
              the next section.
            </p>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-scripts-hosts" name=
                    "ch-scripts-hosts"></a>7.7.&nbsp;Customizing the
                    /etc/hosts File
                  </h2>
                </div>
              </div>
            </div>
            <p>
              If a network card is to be configured, decide on the IP
              address, FQDN, and possible aliases for use in the <code class=
              "filename">/etc/hosts</code> file. The syntax is:
            </p>
            <pre class=
            "screen">&lt;IP address&gt; myhost.example.org aliases</pre>
            <p>
              Unless the computer is to be visible to the Internet (i.e.,
              there is a registered domain and a valid block of assigned IP
              addresses&mdash;most users do not have this), make sure that
              the IP address is in the private network IP address range.
              Valid ranges are:
            </p>
            <pre class="screen"><code class="literal">  Class Networks
  A     10.0.0.0
  B     172.16.0.0 through 172.31.0.255
  C     192.168.0.0 through 192.168.255.255</code></pre>
            <p>
              A valid IP address could be 192.168.1.1. A valid FQDN for this
              IP could be <code class="uri">www.linuxfromscratch.org</code>
              (not recommended because this is a valid registered domain
              address and could cause domain name server issues).
            </p>
            <p>
              Even if not using a network card, an FQDN is still required.
              This is necessary for certain programs to operate correctly.
            </p>
            <p>
              Create the <code class="filename">/etc/hosts</code> file by
              running:
            </p>
            <pre class="userinput"><kbd class=
            "command">cat &gt; ${CLFS}/targetfs/etc/hosts &lt;&lt; "EOF"
<code class="literal"># Begin /etc/hosts (network card version)

127.0.0.1 localhost
<em class="replaceable"><code>[192.168.1.1]</code></em> <em class=
"replaceable"><code>[&lt;HOSTNAME&gt;.example.org]</code></em> <em class=
"replaceable"><code>[HOSTNAME]</code></em>

# End /etc/hosts (network card version)</code>
EOF</kbd></pre>
            <p>
              The <em class="replaceable"><code>[192.168.1.1]</code></em> and
              <em class=
              "replaceable"><code>[&lt;HOSTNAME&gt;.example.org]</code></em>
              values need to be changed for specific users or requirements
              (if assigned an IP address by a network/system administrator
              and the machine will be connected to an existing network).
            </p>
            <p>
              If a network card is not going to be configured, create the
              <code class="filename">/etc/hosts</code> file by running:
            </p>
            <pre class="userinput"><kbd class=
            "command">cat &gt; ${CLFS}/targetfs/etc/hosts &lt;&lt; "EOF"
<code class="literal"># Begin /etc/hosts (no network card version)

127.0.0.1 <em class=
"replaceable"><code>[&lt;HOSTNAME&gt;.example.org]</code></em> <em class=
"replaceable"><code>[HOSTNAME]</code></em> localhost

# End /etc/hosts (no network card version)</code>
EOF</kbd></pre>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-scripts-network" name=
                    "ch-scripts-network"></a>7.8.&nbsp;Configuring the
                    network Script
                  </h2>
                </div>
              </div>
            </div>
            <div class="sect2" lang="en" xml:lang="en">
              <h3 class="sect2">
                7.8.1. Creating Network Interface Configuration Files
              </h3>
              <p>
                Which interfaces are brought up and down by the network
                utilities depends on the files and directories in the
                <code class="filename">/etc/network</code> directory. The
                <code class="filename">interfaces</code> file should contain
                a description of the interfaces, as done by Debian, and each
                of the directories contain scripts for actions to perform on
                each type of network event.
              </p>
              <p>
                The following command creates the required directories and
                the <code class="filename">interfaces</code> file, assuming
                DHCP will be used for eth0:
              </p>
              <pre class="userinput"><kbd class=
              "command">mkdir -pv ${CLFS}/targetfs/etc/network/if-{post-{up,down},pre-{up,down},up,down}.d
mkdir -pv ${CLFS}/targetfs/usr/share/udhcpc

cat &gt; ${CLFS}/targetfs/etc/network/interfaces &lt;&lt; "EOF"
<code class="literal">auto eth0
iface eth0 inet dhcp</code>
EOF</kbd></pre>
              <p>
                For DHCP to work properly with udhcpc, the BusyBox dhcp
                client, a configuration script is needed. Create a simple
                script to assign the provided DHCP address and update
                <code class="filename">/etc/resolv.conf</code>:
              </p>
              <pre class="userinput"><kbd class=
              "command">cat &gt; ${CLFS}/targetfs/usr/share/udhcpc/default.script &lt;&lt; "EOF"
<code class="literal">#!/bin/sh
# udhcpc Interface Configuration
# Based on http://lists.debian.org/debian-boot/2002/11/msg00500.html
# udhcpc script edited by Tim Riker &lt;Tim@Rikers.org&gt;

[ -z "$1" ] &amp;&amp; echo "Error: should be called from udhcpc" &amp;&amp; exit 1

RESOLV_CONF="/etc/resolv.conf"
[ -n "$broadcast" ] &amp;&amp; BROADCAST="broadcast $broadcast"
[ -n "$subnet" ] &amp;&amp; NETMASK="netmask $subnet"

case "$1" in
        deconfig)
                /sbin/ifconfig $interface 0.0.0.0
                ;;

        renew|bound)
                /sbin/ifconfig $interface $ip $BROADCAST $NETMASK

                if [ -n "$router" ] ; then
                        while route del default gw 0.0.0.0 dev $interface ; do
                                true
                        done

                        for i in $router ; do
                                route add default gw $i dev $interface
                        done
                fi

                echo -n &gt; $RESOLV_CONF
                [ -n "$domain" ] &amp;&amp; echo search $domain &gt;&gt; $RESOLV_CONF
                for i in $dns ; do
                        echo nameserver $i &gt;&gt; $RESOLV_CONF
                done
                ;;
esac

exit 0
</code>EOF

chmod +x ${CLFS}/targetfs/usr/share/udhcpc/default.script</kbd></pre>
            </div>
          </div>
        </div>
      </div>
      <div class="part" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h1 class="title">
                <a id="part5" name="part5"></a>Part&nbsp;V.&nbsp;Beyond CLFS
                Embedded
              </h1>
            </div>
          </div>
        </div>
        <div class="chapter" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title">
                  <a id="chapter-beyond" name=
                  "chapter-beyond"></a>Chapter&nbsp;8.&nbsp;Beyond CLFS
                  Embedded
                </h2>
              </div>
            </div>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-bclfs" name=
                    "ch-bclfs"></a>8.1.&nbsp;Introduction
                  </h2>
                </div>
              </div>
            </div>
            <p>
              Now that we have our base system built, we may add some
              optional additional networking software.
            </p>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-beyond-packages" name=
                    "ch-beyond-packages"></a>8.2.&nbsp;Beyond CLFS Packages
                  </h2>
                </div>
              </div>
            </div>
            <p>
              Download or otherwise obtain the following packages:
            </p>
            <div class="beyond">
              <div class="variablelist">
                <dl>
                  <dt>
                    <span class="term">Dropbear (2022.83) - <span class=
                    "token">2268 KB</span>:</span>
                  </dt>
                  <dd>
                    <p>
                      Home page: <a class="ulink" href=
                      "http://matt.ucc.asn.au/dropbear/dropbear.html">http://matt.ucc.asn.au/dropbear/dropbear.html</a>
                    </p>
                    <p>
                      Download: <a class="ulink" href=
                      "http://matt.ucc.asn.au/dropbear/releases/dropbear-2022.83.tar.bz2">
                      http://matt.ucc.asn.au/dropbear/releases/dropbear-2022.83.tar.bz2</a>
                    </p>
                    <p>
                      MD5 sum: <code class=
                      "literal">a75a34bcc03cacf71a2db9da3b7c94a5</code>
                    </p>
                  </dd>
                  <dt>
                    <span class="term">Netplug (1.2.9.2) - <span class=
                    "token">21 KB</span>:</span>
                  </dt>
                  <dd>
                    <p>
                      Home page: <a class="ulink" href=
                      "http://www.red-bean.com/~bos/">http://www.red-bean.com/~bos/</a>
                    </p>
                    <p>
                      Download: <a class="ulink" href=
                      "http://www.red-bean.com/~bos/netplug/netplug-1.2.9.2.tar.bz2">
                      http://www.red-bean.com/~bos/netplug/netplug-1.2.9.2.tar.bz2</a>
                    </p>
                    <p>
                      MD5 sum: <code class=
                      "literal">1d6db99536bdf875ce441f2c0e45ebf2</code>
                    </p>
                  </dd>
                  <dt>
                    <span class="term">Wireless Tools (29) - <span class=
                    "token">288 KB</span>:</span>
                  </dt>
                  <dd>
                    <p>
                      Home page: <a class="ulink" href=
                      "https://hewlettpackard.github.io/wireless-tools/Tools.html">
                      https://hewlettpackard.github.io/wireless-tools/Tools.html</a>
                    </p>
                    <p>
                      Download: <a class="ulink" href=
                      "https://hewlettpackard.github.io/wireless-tools/wireless_tools.29.tar.gz">
                      https://hewlettpackard.github.io/wireless-tools/wireless_tools.29.tar.gz</a>
                    </p>
                    <p>
                      MD5 sum: <code class=
                      "literal">e06c222e186f7cc013fd272d023710cb</code>
                    </p>
                  </dd>
                  <dt>
                    <span class="term">Zlib (1.3.1) - <span class=
                    "token">1478 KB</span>:</span>
                  </dt>
                  <dd>
                    <p>
                      Home page: <a class="ulink" href=
                      "http://www.zlib.net">http://www.zlib.net</a>
                    </p>
                    <p>
                      Download: <a class="ulink" href=
                      "https://zlib.net/fossils/zlib-1.3.1.tar.gz">https://zlib.net/fossils/zlib-1.3.1.tar.gz</a>
                    </p>
                    <p>
                      MD5 sum: <code class=
                      "literal">9855b6d802d7fe5b7bd5b196a2271655</code>
                    </p>
                  </dd>
                </dl>
              </div>
            </div>
            <p>
              Total size of these packages: about 4,055 KB
            </p>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-beyond-patches" name=
                    "ch-beyond-patches"></a>8.3.&nbsp;Beyond CLFS Patches
                  </h2>
                </div>
              </div>
            </div>
            <p>
              In addition to the packages, several patches are also required.
              These patches correct any mistakes in the packages that should
              be fixed by the maintainer. The patches also make small
              modifications to make the packages easier to work with. The
              following patches will be needed in order to build the
              associated packages:
            </p>
            <div class="patches">
              <div class="variablelist">
                <dl>
                  <dt>
                    <span class="term">Netplug Patch - <span class="token">1
                    KB</span>:</span>
                  </dt>
                  <dd>
                    <p>
                      Download: <a class="ulink" href=
                      "http://patches.clfs.org/embedded-dev/netplug-1.2.9.2-fixes-1.patch">
                      http://patches.clfs.org/embedded-dev/netplug-1.2.9.2-fixes-1.patch</a>
                    </p>
                    <p>
                      MD5 sum:
                    </p>
                  </dd>
                </dl>
              </div>
            </div>
            <p>
              Total size of these patches: about 1 KB
            </p>
          </div>
          <div class="wrap" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-beyond-zlib" name=
                    "ch-beyond-zlib"></a>8.4.&nbsp;Zlib-1.3.1
                  </h2>
                </div>
              </div>
            </div>
            <div class="package" lang="en" xml:lang="en">
              <p>
                The Zlib package contains compression and decompression
                routines used by some programs.
              </p>
            </div>
            <div class="installation" lang="en" xml:lang="en">
              <h3 class="sect2">
                8.4.1. Installation of Zlib
              </h3>
              <p>
                Prepare Zlib for compilation and set to optimize for size:
              </p>
              <pre class="userinput"><kbd class=
              "command">CFLAGS="-Os" ./configure --shared</kbd></pre>
              <div class="variablelist">
                <p class="title">
                  <b>The meaning of the configure options:</b>
                </p>
                <dl>
                  <dt>
                    <span class="term"><em class=
                    "parameter"><code>--shared</code></em></span>
                  </dt>
                  <dd>
                    <p>
                      Tells Zlib to build its shared library.
                    </p>
                  </dd>
                </dl>
              </div>
              <p>
                Compile the package:
              </p>
              <pre class="userinput"><kbd class="command">make</kbd></pre>
              <p>
                Install the package into the cross-tools:
              </p>
              <pre class="userinput"><kbd class=
              "command">make prefix=${CLFS}/cross-tools/${CLFS_TARGET} install</kbd></pre>
              <p>
                Copy only the shared library into the target file system and
                ensure that its symlink is present so the runtime loader can
                find it:
              </p>
              <pre class="userinput"><kbd class=
              "command">cp -v ${CLFS}/cross-tools/${CLFS_TARGET}/lib/libz.so.1.3.1 ${CLFS}/targetfs/lib/
ln -sv libz.so.1.3.1 ${CLFS}/targetfs/lib/libz.so.1</kbd></pre>
            </div>
            <div class="content" lang="en" xml:lang="en">
              <h3 class="sect2">
                <a id="contents-zlib" name="contents-zlib"></a>8.4.2.
                Contents of Zlib
              </h3>
              <div class="segmentedlist">
                <div class="seglistitem">
                  <div class="seg">
                    <strong class="segtitle">Installed libraries:</strong>
                    <span class="segbody">libz.[a,so]</span>
                  </div>
                </div>
              </div>
              <div class="variablelist">
                <h4>
                  <a id="idm2310" name="idm2310"></a>Short Descriptions
                </h4>
                <table border="0">
                  <col align="left" valign="top" />
                  <tbody>
                    <tr>
                      <td>
                        <p>
                          <a id="libz" name="libz"></a><span class=
                          "term"><code class="filename">libz</code></span>
                        </p>
                      </td>
                      <td>
                        <p>
                          Contains compression and decompression functions
                          used by some programs
                        </p>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <div class="wrap" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-beyond-netplug" name=
                    "ch-beyond-netplug"></a>8.5.&nbsp;Netplug-1.2.9.2
                  </h2>
                </div>
              </div>
            </div>
            <div class="package" lang="en" xml:lang="en">
              <p>
                Netplug is a daemon that detects insertion and removal of
                network cables and reacts to bring up or take down the
                network interface.
              </p>
            </div>
            <div class="installation" lang="en" xml:lang="en">
              <h3 class="sect2">
                8.5.1. Installation of Netplug
              </h3>
              <p>
                Patch netplug to fix issues:
              </p>
              <pre class="userinput"><kbd class=
              "command">patch -Np1 -i ../netplug-1.2.9.2-fixes-1.patch</kbd></pre>
              <p>
                Compile the package:
              </p>
              <pre class="userinput"><kbd class="command">make</kbd></pre>
              <p>
                Install the package:
              </p>
              <pre class="userinput"><kbd class=
              "command">make DESTDIR=${CLFS}/targetfs install</kbd></pre>
            </div>
            <div class="bootscripts" lang="en" xml:lang="en">
              <h3 class="sect2">
                8.5.2. Installation of Netplug Bootscripts
              </h3>
              <p>
                From the clfs-bootscripts package, install the Netplug
                bootscripts:
              </p>
              <pre class="userinput"><kbd class=
              "command">make install-netplug DESTDIR=${CLFS}/targetfs</kbd></pre>
            </div>
            <div class="content" lang="en" xml:lang="en">
              <h3 class="sect2">
                <a id="contents-netplug" name="contents-netplug"></a>8.5.3.
                Contents of Netplug
              </h3>
              <div class="segmentedlist">
                <div class="seglistitem">
                  <div class="seg">
                    <strong class="segtitle">Installed programs:</strong>
                    <span class="segbody">/sbin/netplugd</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="wrap" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-beyond-dropbear" name=
                    "ch-beyond-dropbear"></a>8.6.&nbsp;Dropbear-2022.83
                  </h2>
                </div>
              </div>
            </div>
            <div class="package" lang="en" xml:lang="en">
              <p>
                Dropbear is a relatively small SSH server and client.
                Dropbear has a small memory footprint suitable for
                memory-constrained environments, while still having the same
                features as OpenSSH. It does not depend on OpenSSL and it has
                a MIT style license.
              </p>
              <p>
                Dropbear depends on zlib.
              </p>
            </div>
            <div class="installation" lang="en" xml:lang="en">
              <h3 class="sect2">
                8.6.1. Installation of Dropbear
              </h3>
              <p>
                Fix dropbear so it doesn't install man pages:
              </p>
              <pre class="userinput"><kbd class=
              "command">sed -i 's/.*mandir.*//g' Makefile.in</kbd></pre>
              <p>
                Configure dropbear:
              </p>
              <pre class="userinput"><kbd class=
              "command">CC="${CC} -Os" ./configure --prefix=/usr --host=${CLFS_TARGET}</kbd></pre>
              <div class="admon note">
                <h3>
                  Note
                </h3>
                <p>
                  We are just telling dropbear to use the default
                  configuration plus scp. For those who are more adventurous,
                  edit options.h to further configure dropbear.
                </p>
              </div>
              <p>
                Compile the package:
              </p>
              <pre class="userinput"><kbd class="command">make MULTI=1 \
  PROGRAMS="dropbear dbclient dropbearkey dropbearconvert scp"</kbd></pre>
              <p>
                Install the package:
              </p>
              <pre class="userinput"><kbd class="command">make MULTI=1 \
  PROGRAMS="dropbear dbclient dropbearkey dropbearconvert scp" \
  install DESTDIR=${CLFS}/targetfs</kbd></pre>
              <p>
                Create the directory for the dropbear key files:
              </p>
              <pre class="userinput"><kbd class=
              "command">install -dv ${CLFS}/targetfs/etc/dropbear</kbd></pre>
            </div>
            <div class="bootscripts" lang="en" xml:lang="en">
              <h3 class="sect2">
                8.6.2. Installation of Dropbear Bootscripts
              </h3>
              <p>
                From the clfs-bootscripts package, install the Dropbear
                bootscripts:
              </p>
              <pre class="userinput"><kbd class=
              "command">make install-dropbear DESTDIR=${CLFS}/targetfs</kbd></pre>
            </div>
            <div class="content" lang="en" xml:lang="en">
              <h3 class="sect2">
                <a id="contents-dropbear" name="contents-dropbear"></a>8.6.3.
                Contents of Dropbear
              </h3>
              <div class="segmentedlist">
                <div class="seglistitem">
                  <div class="seg">
                    <strong class="segtitle">Installed programs:</strong>
                    <span class="segbody">/usr/bin/dropbearmulti</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="wrap" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-beyond-wireless_tools" name=
                    "ch-beyond-wireless_tools"></a>8.7.&nbsp;Wireless
                    Tools-29
                  </h2>
                </div>
              </div>
            </div>
            <div class="package" lang="en" xml:lang="en">
              <p>
                Wireless Tools is the reference implementation of tools
                supporting the ability to manipulate the Wireless Extensions
                API supported by most wireless LAN networking drivers.
              </p>
            </div>
            <div class="installation" lang="en" xml:lang="en">
              <h3 class="sect2">
                8.7.1. Installation of Wireless Tools
              </h3>
              <p>
                Wireless Tools' <code class="filename">Makefile</code>
                contains explicitly which <span class=
                "command"><strong>gcc</strong></span>, <span class=
                "command"><strong>ar</strong></span>, and <span class=
                "command"><strong>ranlib</strong></span> to use. Make sure
                the <code class="filename">${CLFS}/cross-tools</code>
                versions of these programs are used instead of the host's:
              </p>
              <pre class="userinput"><kbd class=
              "command">sed -i s/gcc/\$\{CLFS\_TARGET\}\-gcc/g Makefile
sed -i s/\ ar/\ \$\{CLFS\_TARGET\}\-ar/g Makefile
sed -i s/ranlib/\$\{CLFS\_TARGET\}\-ranlib/g Makefile</kbd></pre>
              <p>
                Compile the package:
              </p>
              <div class="admon note">
                <h3>
                  Note
                </h3>
                <p>
                  There are options that can be passed to <span class=
                  "command"><strong>make</strong></span> and <span class=
                  "command"><strong>make install</strong></span> that will
                  reduce the size and functionality of the Wireless Tools.
                  See the Wireless Tools <code class=
                  "filename">INSTALL</code> file for more information.
                </p>
              </div>
              <pre class="userinput"><kbd class=
              "command">make PREFIX=${CLFS}/targetfs/usr</kbd></pre>
              <p>
                Install the package:
              </p>
              <pre class="userinput"><kbd class=
              "command">make install PREFIX=${CLFS}/targetfs/usr</kbd></pre>
            </div>
            <div class="content" lang="en" xml:lang="en">
              <h3 class="sect2">
                <a id="contents-wireless_tools" name=
                "contents-wireless_tools"></a>8.7.2. Contents of Wireless
                Tools
              </h3>
              <div class="segmentedlist">
                <div class="seglistitem">
                  <div class="seg">
                    <strong class="segtitle">Installed programs:</strong>
                    <span class="segbody">iwconfig, iwevent, iwgetid, iwlist,
                    iwpriv, and iwspy</span>
                  </div>
                  <div class="seg">
                    <strong class="segtitle">Installed libraries:</strong>
                    <span class="segbody">libiw.so</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="part" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h1 class="title">
                <a id="part6" name="part6"></a>Part&nbsp;VI.&nbsp;Cleanup and
                Boot
              </h1>
            </div>
          </div>
        </div>
        <div class="chapter" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title">
                  <a id="chapter-cleanup" name=
                  "chapter-cleanup"></a>Chapter&nbsp;9.&nbsp;Backup and
                  Cleanup
                </h2>
              </div>
            </div>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-bootable-chowning" name=
                    "ch-bootable-chowning"></a>9.1.&nbsp;Changing the
                    Ownership of the CLFS System
                  </h2>
                </div>
              </div>
            </div>
            <p>
              Throughout the book, every package has been compiled and
              installed as the <code class="systemitem">clfs</code> user. The
              final system should be owned by <code class=
              "systemitem">root</code>.
            </p>
            <div class="admon important">
              <h3>
                Important
              </h3>
              <p>
                The commands on this page of the book must be performed while
                logged in as <code class="systemitem">root</code>. Check that
                ${CLFS} is still set:
              </p>
              <pre class="userinput"><kbd class=
              "command">echo ${CLFS}</kbd></pre>
            </div>
            <p>
              Make <code class="systemitem">root</code> the owner of the
              entire CLFS system:
            </p>
            <pre class="userinput"><kbd class=
            "command">chown -Rv root:root ${CLFS}/targetfs</kbd></pre>
            <p>
              The following file should not to belong to the <code class=
              "systemitem">root</code> group, it should belong to the
              <code class="systemitem">utmp</code> group (group 13):
            </p>
            <pre class="userinput"><kbd class=
            "command">chgrp -v 13 ${CLFS}/targetfs/var/log/lastlog</kbd></pre>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-cleanup-copy-to-target" name=
                    "ch-cleanup-copy-to-target"></a>9.2.&nbsp;Copy to Target
                  </h2>
                </div>
              </div>
            </div>
            <p>
              We just created a cleaned-up version of our build, now compress
              it so it can be archived and transferred to the target.
            </p>
            <p>
              Create a tarball of the build:
            </p>
            <pre class="userinput"><kbd class=
            "command">install -dv ${CLFS}/build
cd ${CLFS}/targetfs
tar jcfv ${CLFS}/build/clfs-embedded.tar.bz2 *</kbd></pre>
            <p>
              Now you can move your compressed tarball to your target system.
              This will be different on every embedded device.
            </p>
            <p>
              When uncompressing the tarball, make sure to pass tar the "-p"
              switch to ensure permissions are preserved.
            </p>
          </div>
        </div>
        <div class="chapter" lang="en" xml:lang="en">
          <div class="titlepage">
            <div>
              <div>
                <h2 class="title">
                  <a id="chapter-finalizing" name=
                  "chapter-finalizing"></a>Chapter&nbsp;10.&nbsp;The End
                </h2>
              </div>
            </div>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-finish-theend" name=
                    "ch-finish-theend"></a>10.1.&nbsp;The End
                  </h2>
                </div>
              </div>
            </div>
            <p>
              Well done! The new CLFS system is installed! We wish you much
              success with your shiny new custom-built Linux system.
            </p>
            <p>
              Assuming the boot loader was set up properly, <span class=
              "emphasis"><em>CLFS GIT-20240401</em></span> will boot
              automatically when you power on the target.
            </p>
          </div>
          <div class="sect1" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title">
                    <a id="ch-finish-whatnow" name=
                    "ch-finish-whatnow"></a>10.2.&nbsp;What Now?
                  </h2>
                </div>
              </div>
            </div>
            <p>
              Thank you for reading this CLFS book. We hope that you have
              found this book helpful and have learned more about the system
              creation process.
            </p>
            <p>
              Now that the CLFS system is installed, you may be wondering
              &ldquo;<span class="quote">What next?</span>&rdquo; To answer
              that question, we have compiled a list of resources for you.
            </p>
            <div class="itemizedlist">
              <ul>
                <li>
                  <p>
                    Maintenance
                  </p>
                  <p>
                    Bugs and security notices are reported regularly for all
                    software. Since an CLFS system is compiled from source,
                    it is up to you to keep abreast of such reports. There
                    are several online resources that track such reports,
                    some of which are shown below:
                  </p>
                  <div class="itemizedlist">
                    <ul>
                      <li>
                        <p>
                          <a class="ulink" href=
                          "http://www.cert.org/">CERT</a> (Computer Emergency
                          Response Team)
                        </p>
                        <p>
                          CERT has a mailing list that publishes security
                          alerts concerning various operating systems and
                          applications. Subscription information is available
                          at <a class="ulink" href=
                          "http://www.us-cert.gov/cas/signup.html">http://www.us-cert.gov/cas/signup.html</a>.
                        </p>
                      </li>
                      <li>
                        <p>
                          Bugtraq
                        </p>
                        <p>
                          Bugtraq is a full-disclosure computer security
                          mailing list. It publishes newly discovered
                          security issues, and occasionally potential fixes
                          for them. Subscription information is available at
                          <a class="ulink" href=
                          "http://www.securityfocus.com/archive">http://www.securityfocus.com/archive</a>.
                        </p>
                      </li>
                    </ul>
                  </div>
                </li>
                <li>
                  <p>
                    Community Driven Beyond Linux From Scratch
                  </p>
                  <p>
                    The Community Driven Beyond Linux From Scratch wiki
                    provides information, installation procedures, and other
                    tips for a large variety of software that can be
                    installed on a CLFS system. The CBLFS wiki is located at
                    <a class="ulink" href=
                    "http://cblfs.clfs.org/">http://cblfs.clfs.org/</a>.
                  </p>
                </li>
                <li>
                  <p>
                    Beyond Linux From Scratch
                  </p>
                  <p>
                    The Beyond Linux From Scratch book covers installation
                    procedures for a wide range of software beyond the scope
                    of the LFS Book. The BLFS project is located at <a class=
                    "ulink" href=
                    "http://www.linuxfromscratch.org/blfs/">http://www.linuxfromscratch.org/blfs/</a>.
                  </p>
                </li>
                <li>
                  <p>
                    LFS Hints
                  </p>
                  <p>
                    The LFS Hints are a collection of educational documents
                    submitted by volunteers in the LFS community. The hints
                    are available at <a class="ulink" href=
                    "http://www.linuxfromscratch.org/hints/list.html">http://www.linuxfromscratch.org/hints/list.html</a>.
                  </p>
                </li>
                <li>
                  <p>
                    Mailing lists
                  </p>
                  <p>
                    There are several LFS mailing lists you may subscribe to
                    if you are in need of help, want to stay current with the
                    latest developments, want to contribute to the project,
                    and more. See <a class="xref" href="#ch-intro-maillists"
                    title="1.3.2.&nbsp;Mailing Lists">Chapter 1 - Mailing
                    Lists</a> for more information.
                  </p>
                </li>
                <li>
                  <p>
                    The Linux Documentation Project
                  </p>
                  <p>
                    The goal of The Linux Documentation Project (TLDP) is to
                    collaborate on all of the issues of Linux documentation.
                    The TLDP features a large collection of HOWTOs, guides,
                    and man pages. It is located at <a class="ulink" href=
                    "http://www.tldp.org/">http://www.tldp.org/</a>.
                  </p>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <div class="index">
        <h1 class="index">
          Index
        </h1>
        <div class="index">
          <h2>
            <a id="package-index" name="package-index"></a>Packages
          </h2>
          <ul>
            <li>
              <strong class="item">Binutils:</strong>
              <ul>
                <li>
                  <strong class="secitem">cross tools:</strong> <span class=
                  "indexref"><a href=
                  "#ch-cross-tools-binutils">Binutils-2.42</a></span>
                </li>
              </ul>
            </li>
            <li>
              <strong class="item">Bootscripts:</strong> <span class=
              "indexref"><a href=
              "#ch-scripts-bootscripts">CLFS-Bootscripts-git master
              HEAD</a></span>
            </li>
            <li>
              <strong class="item">BusyBox:</strong> <span class=
              "indexref"><a href=
              "#ch-system-busybox">BusyBox-1.36.1</a></span>
            </li>
            <li>
              <strong class="item">Dropbear:</strong> <span class=
              "indexref"><a href=
              "#ch-beyond-dropbear">Dropbear-2022.83</a></span>
            </li>
            <li>
              <strong class="item">GCC:</strong>
              <ul>
                <li>
                  <strong class="secitem">cross tools, final:</strong>
                  <span class="indexref"><a href=
                  "#ch-cross-tools-gcc-final">GCC-13.2.0 - Final</a></span>
                </li>
                <li>
                  <strong class="secitem">cross tools, static:</strong>
                  <span class="indexref"><a href=
                  "#ch-cross-tools-gcc-static">GCC-13.2.0 - Static</a></span>
                </li>
              </ul>
            </li>
            <li>
              <strong class="item">iana-etc:</strong> <span class=
              "indexref"><a href=
              "#ch-system-iana-etc">iana-etc-20240125</a></span>
            </li>
            <li>
              <strong class="item">musl:</strong>
              <ul>
                <li>
                  <strong class="secitem">cross tools:</strong> <span class=
                  "indexref"><a href=
                  "#ch-cross-tools-libc">musl-1.2.5</a></span>
                </li>
                <li>
                  <strong class="secitem">final system:</strong> <span class=
                  "indexref"><a href=
                  "#ch-final-system-libc">musl-1.2.5</a></span>
                </li>
              </ul>
            </li>
            <li>
              <strong class="item">libgcc:</strong>
              <ul>
                <li>
                  <strong class="secitem">final system:</strong> <span class=
                  "indexref"><a href=
                  "#ch-final-system-libgcc">libgcc-13.2.0</a></span>
                </li>
              </ul>
            </li>
            <li>
              <strong class="item">Linux:</strong> <span class=
              "indexref"><a href="#ch-bootable-kernel">Linux-6.7.4</a></span>
            </li>
            <li>
              <strong class="item">Linux-Headers:</strong> <span class=
              "indexref"><a href=
              "#ch-cross-tools-linux-headers">Linux-Headers-6.7.4</a></span>
            </li>
            <li>
              <strong class="item">mdev:</strong> <span class=
              "indexref"><a href="#ch-scripts-mdev">Configure mdev</a></span>
            </li>
            <li>
              <strong class="item">Netplug:</strong> <span class=
              "indexref"><a href=
              "#ch-beyond-netplug">Netplug-1.2.9.2</a></span>
            </li>
            <li>
              <strong class="item">wireless_tools:</strong> <span class=
              "indexref"><a href="#ch-beyond-wireless_tools">Wireless
              Tools-29</a></span>
            </li>
            <li>
              <strong class="item">Zlib:</strong> <span class=
              "indexref"><a href="#ch-beyond-zlib">Zlib-1.3.1</a></span>
            </li>
          </ul>
          <h2>
            <a id="program-index" name="program-index"></a>Programs
          </h2>
          <ul>
            <li>
              <strong class="item">addr2line:</strong> <span class=
              "indexref"><a href="#ch-cross-tools-binutils">Binutils-2.42</a>
              -- <a href="#addr2line">description</a><br /></span>
            </li>
            <li>
              <strong class="item">ar:</strong> <span class=
              "indexref"><a href="#ch-cross-tools-binutils">Binutils-2.42</a>
              -- <a href="#ar">description</a><br /></span>
            </li>
            <li>
              <strong class="item">as:</strong> <span class=
              "indexref"><a href="#ch-cross-tools-binutils">Binutils-2.42</a>
              -- <a href="#as">description</a><br /></span>
            </li>
            <li>
              <strong class="item">c++filt:</strong> <span class=
              "indexref"><a href="#ch-cross-tools-binutils">Binutils-2.42</a>
              -- <a href="#c-filt">description</a><br /></span>
            </li>
            <li>
              <strong class="item">elfedit:</strong> <span class=
              "indexref"><a href="#ch-cross-tools-binutils">Binutils-2.42</a>
              -- <a href="#elfedit">description</a><br /></span>
            </li>
            <li>
              <strong class="item">gcc:</strong> <span class=
              "indexref"><a href="#ch-cross-tools-gcc-final">GCC-13.2.0 -
              Final</a> -- <a href="#gcc">description</a><br /></span>
            </li>
            <li>
              <strong class="item">gcov:</strong> <span class=
              "indexref"><a href="#ch-cross-tools-gcc-final">GCC-13.2.0 -
              Final</a> -- <a href="#gcov">description</a><br /></span>
            </li>
            <li>
              <strong class="item">gprof:</strong> <span class=
              "indexref"><a href="#ch-cross-tools-binutils">Binutils-2.42</a>
              -- <a href="#gprof">description</a><br /></span>
            </li>
            <li>
              <strong class="item">ld:</strong> <span class=
              "indexref"><a href="#ch-cross-tools-binutils">Binutils-2.42</a>
              -- <a href="#ld">description</a><br /></span>
            </li>
            <li>
              <strong class="item">ld-musl:</strong> <span class=
              "indexref"><a href="#ch-cross-tools-libc">musl-1.2.5</a> --
              <a href="#ld-musl">description</a><br /></span>
            </li>
            <li>
              <strong class="item">nm:</strong> <span class=
              "indexref"><a href="#ch-cross-tools-binutils">Binutils-2.42</a>
              -- <a href="#nm">description</a><br /></span>
            </li>
            <li>
              <strong class="item">objcopy:</strong> <span class=
              "indexref"><a href="#ch-cross-tools-binutils">Binutils-2.42</a>
              -- <a href="#objcopy">description</a><br /></span>
            </li>
            <li>
              <strong class="item">objdump:</strong> <span class=
              "indexref"><a href="#ch-cross-tools-binutils">Binutils-2.42</a>
              -- <a href="#objdump">description</a><br /></span>
            </li>
            <li>
              <strong class="item">ranlib:</strong> <span class=
              "indexref"><a href="#ch-cross-tools-binutils">Binutils-2.42</a>
              -- <a href="#ranlib">description</a><br /></span>
            </li>
            <li>
              <strong class="item">readelf:</strong> <span class=
              "indexref"><a href="#ch-cross-tools-binutils">Binutils-2.42</a>
              -- <a href="#readelf">description</a><br /></span>
            </li>
            <li>
              <strong class="item">size:</strong> <span class=
              "indexref"><a href="#ch-cross-tools-binutils">Binutils-2.42</a>
              -- <a href="#size">description</a><br /></span>
            </li>
            <li>
              <strong class="item">strings:</strong> <span class=
              "indexref"><a href="#ch-cross-tools-binutils">Binutils-2.42</a>
              -- <a href="#strings">description</a><br /></span>
            </li>
            <li>
              <strong class="item">strip:</strong> <span class=
              "indexref"><a href="#ch-cross-tools-binutils">Binutils-2.42</a>
              -- <a href="#strip">description</a><br /></span>
            </li>
          </ul>
          <h2>
            <a id="library-index" name="library-index"></a>Libraries
          </h2>
          <ul>
            <li>
              <strong class="item">libbfd:</strong> <span class=
              "indexref"><a href="#ch-cross-tools-binutils">Binutils-2.42</a>
              -- <a href="#libbfd">description</a><br /></span>
            </li>
            <li>
              <strong class="item">libc:</strong> <span class=
              "indexref"><a href="#ch-cross-tools-libc">musl-1.2.5</a> --
              <a href="#libc">description</a><br /></span>
            </li>
            <li>
              <strong class="item">libcrypt:</strong> <span class=
              "indexref"><a href="#ch-cross-tools-libc">musl-1.2.5</a> --
              <a href="#libcrypt">description</a><br /></span>
            </li>
            <li>
              <strong class="item">libdl:</strong> <span class=
              "indexref"><a href="#ch-cross-tools-libc">musl-1.2.5</a> --
              <a href="#libdl">description</a><br /></span>
            </li>
            <li>
              <strong class="item">libgcc*:</strong> <span class=
              "indexref"><a href="#ch-cross-tools-gcc-final">GCC-13.2.0 -
              Final</a> -- <a href="#libgcc">description</a><br /></span>
            </li>
            <li>
              <strong class="item">libiberty:</strong> <span class=
              "indexref"><a href="#ch-cross-tools-binutils">Binutils-2.42</a>
              -- <a href="#libiberty">description</a><br /></span>
            </li>
            <li>
              <strong class="item">libm:</strong> <span class=
              "indexref"><a href="#ch-cross-tools-libc">musl-1.2.5</a> --
              <a href="#libm">description</a><br /></span>
            </li>
            <li>
              <strong class="item">libopcodes:</strong> <span class=
              "indexref"><a href="#ch-cross-tools-binutils">Binutils-2.42</a>
              -- <a href="#libopcodes">description</a><br /></span>
            </li>
            <li>
              <strong class="item">libpthread:</strong> <span class=
              "indexref"><a href="#ch-cross-tools-libc">musl-1.2.5</a> --
              <a href="#libpthread">description</a><br /></span>
            </li>
            <li>
              <strong class="item">librt:</strong> <span class=
              "indexref"><a href="#ch-cross-tools-libc">musl-1.2.5</a> --
              <a href="#librt">description</a><br /></span>
            </li>
            <li>
              <strong class="item">libz:</strong> <span class=
              "indexref"><a href="#ch-beyond-zlib">Zlib-1.3.1</a> -- <a href=
              "#libz">description</a><br /></span>
            </li>
          </ul>
          <h2>
            <a id="scripts-index" name="scripts-index"></a>Scripts
          </h2>
          <ul>
            <li>
              <strong class="item">functions:</strong> <span class=
              "indexref"><a href=
              "#ch-scripts-bootscripts">CLFS-Bootscripts-git master HEAD</a>
              -- <a href=
              "#functions-bootscripts">description</a><br /></span>
            </li>
            <li>
              <strong class="item">localnet:</strong>
              <ul>
                <li>
                  <strong class="secitem">/etc/hosts:</strong> <span class=
                  "indexref"><a href="#ch-scripts-hosts">Customizing the
                  /etc/hosts File</a></span>
                </li>
                <li>
                  <strong class="secitem">configuring:</strong> <span class=
                  "indexref"><a href="#ch-scripts-hostname">Setting
                  Hostname</a></span>
                </li>
              </ul>
            </li>
            <li>
              <strong class="item">network:</strong>
              <ul>
                <li>
                  <strong class="secitem">/etc/hosts:</strong> <span class=
                  "indexref"><a href="#ch-scripts-hosts">Customizing the
                  /etc/hosts File</a></span>
                </li>
                <li>
                  <strong class="secitem">configuring:</strong> <span class=
                  "indexref"><a href="#ch-scripts-network">Configuring the
                  network Script</a></span>
                </li>
              </ul>
            </li>
            <li>
              <strong class="item">shutdown:</strong> <span class=
              "indexref"><a href=
              "#ch-scripts-bootscripts">CLFS-Bootscripts-git master HEAD</a>
              -- <a href="#shutdown-bootscripts">description</a><br /></span>
            </li>
            <li>
              <strong class="item">startup:</strong> <span class=
              "indexref"><a href=
              "#ch-scripts-bootscripts">CLFS-Bootscripts-git master HEAD</a>
              -- <a href="#startup-bootscripts">description</a><br /></span>
            </li>
            <li>
              <strong class="item">syslog:</strong> <span class=
              "indexref"><a href=
              "#ch-scripts-bootscripts">CLFS-Bootscripts-git master HEAD</a>
              -- <a href="#syslog-bootscripts">description</a><br /></span>
            </li>
          </ul>
          <h2>
            <a id="other-index" name="other-index"></a>Others
          </h2>
          <ul>
            <li>
              <strong class="item">/usr/include/{asm,linux}/*.h:</strong>
              <span class="indexref"><a href=
              "#ch-cross-tools-linux-headers">Linux-Headers-6.7.4</a> --
              <a href="#linux-headers">description</a><br /></span>
            </li>
            <li>
              <strong class="item">/etc/fstab:</strong> <span class=
              "indexref"><a href="#ch-bootable-fstab">Creating the /etc/fstab
              File</a></span>
            </li>
            <li>
              <strong class="item">/etc/group:</strong> <span class=
              "indexref"><a href="#ch-final-system-creatingfiles">Creating
              the passwd, group, and lastlog Files</a></span>
            </li>
            <li>
              <strong class="item">/etc/hosts:</strong> <span class=
              "indexref"><a href="#ch-scripts-hosts">Customizing the
              /etc/hosts File</a></span>
            </li>
            <li>
              <strong class="item">/etc/inittab:</strong> <span class=
              "indexref"><a href="#ch-scripts-inittab">Creating
              /etc/inittab</a></span>
            </li>
            <li>
              <strong class="item">/etc/mdev.conf:</strong> <span class=
              "indexref"><a href="#ch-scripts-mdev">Configure mdev</a></span>
            </li>
            <li>
              <strong class="item">/etc/passwd:</strong> <span class=
              "indexref"><a href="#ch-final-system-creatingfiles">Creating
              the passwd, group, and lastlog Files</a></span>
            </li>
            <li>
              <strong class="item">/etc/profile:</strong> <span class=
              "indexref"><a href="#ch-scripts-profile">Creating
              /etc/profile</a></span>
            </li>
            <li>
              <strong class="item">/etc/protocols:</strong> <span class=
              "indexref"><a href=
              "#ch-system-iana-etc">iana-etc-20240125</a></span>
            </li>
            <li>
              <strong class="item">/etc/services:</strong> <span class=
              "indexref"><a href=
              "#ch-system-iana-etc">iana-etc-20240125</a></span>
            </li>
            <li>
              <strong class="item">/var/log/lastlog:</strong> <span class=
              "indexref"><a href="#ch-final-system-creatingfiles">Creating
              the passwd, group, and lastlog Files</a></span>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </body>
</html>
